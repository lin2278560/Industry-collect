(window.webpackJsonp=window.webpackJsonp||[]).push([["manifest"],{"00a5":function(t,e,a){"use strict";a.r(e);var i={name:"403",methods:{back:function(){if(window.history.length<=1)return this.$router.push({path:"/"}),!1;this.$router.go(-1)}}},n=a("c701"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"10px"}},[a("h1",{staticStyle:{"text-align":"center","margin-bottom":"15px"}},[t._v("403 Forbidden")]),a("p",{staticStyle:{"text-align":"center","margin-top":"10px"}},[t._v("openresty/1.13.6.1")]),a("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[a("i-button",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{type:"warning",label:"large"},on:{click:function(e){return t.back()}}},[t._v("返回上一页")])],1)])}),[],!1,null,"c249827e",null);e.default=s.exports},"02b58":function(t,e,a){},"02e8":function(t,e,a){},"0334":function(t,e,a){"use strict";a("bf10")},"0444":function(t,e,a){"use strict";a("5686")},"04d8":function(t,e,a){"use strict";a("a450");var i={name:"Pie",props:{id:String,dataArr:Object,warning:String},mounted:function(){},data:function(){return{data:null,url:"",file:null,loading:!1,legendData:[],seriesData:[],DriveLogData:[],driveWarningTitle:""}},methods:{chart:function(t){var e=this.$echarts.init(document.getElementById(this.id));e.clear();var a={title:{text:"拦截统计图",subtext:"点击饼图模块查看拦截详情",x:"center",y:10,textStyle:{fontSize:16,fontWeight:"bolder",color:"#000080"},subtextStyle:{fontSize:12,color:"#8B2323"}},grid:{x:50,y:0,x2:50,y2:60,borderWidth:10},legend:{orient:"horizontal",x:"center",y:"bottom",itemWidth:24,itemHeight:18,textStyle:{color:"#666"},itemGap:30,data:["北京","上海","广州","深圳","郑州"]},series:[{name:"拦截条数",type:"pie",radius:"50%",center:["50%","40%"],data:[{value:335,name:"北京"},{value:310,name:"上海"},{value:234,name:"广州"},{value:135,name:"深圳"},{value:148,name:"郑州"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(30, 144, 255，0.5)"}},labelLine:{normal:{show:!0}},label:{normal:{position:"inner",formatter:"{c}"}}}],noDataLoadingOption:{effect:"bubble",text:"暂无数据",effectOption:{effect:{n:0}},textStyle:{fontSize:32,fontWeight:"bold"}},tooltip:{trigger:"item",showDelay:20,hideDelay:20,backgroundColor:"#575d6a",textStyle:{fontSize:"16px",color:"white"},formatter:"{a} <br/>{b} : {c}个 ({d}%)"},color:["#7EC0EE","#FF9F7F","#FFD700","#C9C9C9","#E066FF","#C0FF3E","#418bca","#5db85b","#efad4f","#da5350","#677ce7"],backgroundColor:"#fff"};for(var i in function(){for(var e in t)return!1;return!0}()&&(a.title={subtext:"",extStyle:{color:"grey",fontSize:20},text:"暂无数据",left:"center",top:"center"}),this.legendData=[],this.seriesData=[],t){var n="";if("cpuWarnCount"==i?n="CPU预警":"cpuRiskCount"==i?n="CPU风险":"memWarnCount"==i?n="内存预警":"memRiskCount"==i?n="内存风险":"diskWarnCount"==i?n="磁盘预警":"diskRiskCount"==i?n="磁盘风险":"upFlowWarnCount"==i?n="上行流量预警":"upFlowRiskCount"==i?n="上行流量风险":"downFlowWarnCount"==i?n="下行流量预警":"downFlowRiskCount"==i&&(n="下行流量风险"),""!=n){this.legendData.push(n);var s={value:"",name:"",cname:"",uuid:""};s.value=t[i],s.cname=i,s.name=n,this.seriesData.push(s)}}a.legend.data=this.legendData,a.series[0].data=this.seriesData,e.setOption(a),e.off("click");var r=this;e.on("click",(function(t){r.driveWarningTitle=t.name,r.$emit("sendDriveLogData",t.name,t.data.cname)}))},barchart:function(t){var e=this.$echarts.init(document.getElementById(this.id));e.clear();var a={title:{text:"拦截统计图",subtext:"点击柱状图模块查看拦截详情",x:"center",y:10,textStyle:{fontSize:16,fontWeight:"bolder",color:"#000080"},subtextStyle:{fontSize:12,color:"#8B2323"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["Direct","Mail Ad","Affiliate Ad","Video Ad","Search Engine"],orient:"vertical",y:"center",x:"right",selectedMode:"single",padding:-.5},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value"},yAxis:{type:"category",data:["Mon","Tue","Wed","Thu","Fri"]},series:[{name:"预警拦截数",type:"bar",stack:"total",color:"#f8ac59",label:{show:!0},emphasis:{focus:"series"},data:[120,132,145,198,147]},{name:"风险拦截数",type:"bar",stack:"total",label:{show:!0},color:"#ed5565",emphasis:{focus:"series"},data:[320,302,322,342,334]}]};for(var i in function(){for(var e in t)return!1;return!0}()&&(a.title={subtext:"",extStyle:{color:"grey",fontSize:20},text:"暂无数据",left:"center",top:"center"}),this.legendData=[],this.seriesData=[],t)"cpuWarnCount"==i?a.series[0].data[0]=t[i]:"cpuRiskCount"==i?a.series[1].data[0]=t[i]:"memWarnCount"==i?a.series[0].data[1]=t[i]:"memRiskCount"==i?a.series[1].data[1]=t[i]:"diskWarnCount"==i?a.series[0].data[2]=t[i]:"diskRiskCount"==i?a.series[1].data[2]=t[i]:"upFlowWarnCount"==i?a.series[0].data[3]=t[i]:"upFlowRiskCount"==i?a.series[1].data[3]=t[i]:"downFlowWarnCount"==i?a.series[0].data[4]=t[i]:"downFlowRiskCount"==i&&(a.series[1].data[4]=t[i]);a.legend.data=["预警值","风险值"],a.yAxis.data=["CPU拦截统计数","内存拦截统计数","磁盘拦截统计数","上行流量统计数","下行流量拦截统计数"],e.setOption(a),e.off("click");var n=this;e.on("click",(function(t){var e="",a="";"0"==t.dataIndex&&"0"==t.seriesIndex?(e="cpuWarnCount",a="CPU预警"):"0"==t.dataIndex&&"1"==t.seriesIndex?(e="cpuRiskCount",a="CPU风险"):"1"==t.dataIndex&&"0"==t.seriesIndex?(e="memWarnCount",a="内存预警"):"1"==t.dataIndex&&"1"==t.seriesIndex?(e="memRiskCount",a="内存风险"):"2"==t.dataIndex&&"0"==t.seriesIndex?(e="diskWarnCount",a="磁盘预警"):"2"==t.dataIndex&&"1"==t.seriesIndex?(e="diskRiskCount",a="磁盘风险"):"3"==t.dataIndex&&"0"==t.seriesIndex?(e="upFlowWarnCount",a="上行流量预警"):"3"==t.dataIndex&&"1"==t.seriesIndex?(e="upFlowRiskCount",a="上行流量风险"):"4"==t.dataIndex&&"0"==t.seriesIndex?(e="downFlowWarnCount",a="下行流量预警"):"4"==t.dataIndex&&"1"==t.seriesIndex&&(e="downFlowRiskCount",a="下行流量风险"),n.driveWarningTitle=e,n.$emit("sendDriveLogData",a,e)}))}}},n=(a("216f"),a("c701")),s=Object(n.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"pie",staticStyle:{width:"100%"},attrs:{id:this.id}})}),[],!1,null,"03c7ab23",null);e.a=s.exports},"075c":function(t,e,a){"use strict";a("86b3")},"0791":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAADDSURBVDhP3ZHbDoIwDIbXYQzee0BHNHE+FFdGn9Los0hiomjUa8ADUIspJIQFvea76f5u/dduouUclH7clM5YGgGONS5Kp518H0C8EDMV+CTrSI4V7u4CLV7TDdAFkFcy9DzP5nSJ0YCKcBj4FlJMEZPBaS8tAFiuV/Fmt62MZDToU0EeI4Eh0ghFbuZOJ44zHn0T/3BU8/Cs9JOlEWMHBTbIHrXeeKZxM6H5pSjf08gvd0n/yMpMcwdCvCPEmGU7EeID0q85PW5H1f0AAAAASUVORK5CYII="},"07e0":function(t,e,a){"use strict";a("7204")},"08ec":function(t,e,a){},"09d0":function(t,e,a){},"0c52":function(t,e,a){},"0c6e":function(t,e,a){"use strict";a.r(e),a("a450"),a("1bc78");var i=a("25b1"),n={name:"NetworkInterfaceAdd",components:{},data:function(){var t=this;return{platForm:{show:!1,state:"禁用",form:{ipVersion:"IPV4",ip:"",genmask:"",remark:"",iface:"",state:""},ruleInline:{ipVersion:{required:!0,trigger:"change",message:"请选择网络版本"},ip:{required:!0,trigger:"change",validator:("请输入合法的ipv4地址","请输入合法的ipv6地址",function(e,a,i){var n=t.platForm.form.ipVersion,s="IPV6"==n?"请输入合法的ipv6地址":"请输入合法的ipv4地址";("IPV6"==n?/^(([\da-fA-F]{1,4}):){8}$/:/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/).test(a+="IPV6"==n?":":".")?i():i(new Error(s))})},genmask:{required:!0,trigger:"change",validator:function(e,a,i){"IPV4"==t.platForm.form.ipVersion?/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/.test(a+".")?i():i(new Error("请输入合法的ipv4子网掩码")):/^[0-9]*$/.test(a)&&a>0&&a<129?i():i(new Error("请输入合法的ipv6前缀，0~129之间的数字"))}},remark:{trigger:"change",max:20,message:"请输入0~20的字符串"},iface:{required:!0,message:"请选择要设置网络接口",trigger:"change"}}},netInfs:[]}},computed:{},mounted:function(){},methods:{showNetInterface:function(){var t=this;this.$https.fetchGet(this.$api.system.inf.showNetInterface.url).then((function(e){e.data.data.forEach((function(e){t.netInfs.push(e.name)}))})).catch((function(t){}))},addTest:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&("禁用"==t.platForm.state?t.platForm.form.state=!1:t.platForm.form.state=!0,t.$https.fetchPost(t.$api.system.inf.ip.url,t.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"接口添加成功",desc:"正在刷新界面",duration:2.5}),location.reload()):t.$Notice.error({title:"接口添加失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})})))}))},showAddDrawer:function(){this.showNetInterface(),this.platForm.show=!0},addPlatForm:function(){},restPlatForm:function(){this.$refs.plat_form.resetFields()}}},s=(a("5e07"),a("c701")),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{attrs:{type:"primary"},on:{click:t.showAddDrawer}},[t._v("\n            新增\n        ")]),a("Modal",{attrs:{title:"接口",width:"600",styles:{top:"25%"}},model:{value:t.platForm.show,callback:function(e){t.$set(t.platForm,"show",e)},expression:"platForm.show"}},[a("Form",{ref:"plat_form",attrs:{rules:t.platForm.ruleInline,model:t.platForm.form,"label-width":150}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"状态",prop:"status"}},[a("RadioGroup",{model:{value:t.platForm.state,callback:function(e){t.$set(t.platForm,"state",e)},expression:"platForm.state"}},[a("Radio",{attrs:{label:"禁用"}}),a("Radio",{attrs:{label:"启用"}})],1)],1),a("FormItem",{attrs:{prop:"ipVersion",label:"网络版本"}},[a("RadioGroup",{model:{value:t.platForm.form.ipVersion,callback:function(e){t.$set(t.platForm.form,"ipVersion",e)},expression:"platForm.form.ipVersion"}},[a("Radio",{attrs:{label:"IPV4"}},[t._v("IPV4")]),a("Radio",{attrs:{label:"IPV6"}},[t._v("IPV6")])],1)],1),a("FormItem",{attrs:{prop:"ip",label:"ip地址"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.1"},model:{value:t.platForm.form.ip,callback:function(e){t.$set(t.platForm.form,"ip",e)},expression:"platForm.form.ip"}})],1),a("FormItem",{attrs:{prop:"genmask",label:"掩码/前缀"}},[a("Input",{attrs:{type:"text",placeholder:"255.255.255.0"},model:{value:t.platForm.form.genmask,callback:function(e){t.$set(t.platForm.form,"genmask",e)},expression:"platForm.form.genmask"}})],1),a("FormItem",{attrs:{prop:"iface",label:"网络接口"}},[a("Select",{model:{value:t.platForm.form.iface,callback:function(e){t.$set(t.platForm.form,"iface",e)},expression:"platForm.form.iface"}},t._l(t.netInfs,(function(e,i){return a("Option",{key:i,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{prop:"remark",label:"备注"}},[a("Input",{attrs:{type:"textarea",placeholder:"192.168.1.254"},model:{value:t.platForm.form.remark,callback:function(e){t.$set(t.platForm.form,"remark",e)},expression:"platForm.form.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.platForm.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.addTest}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"28634e0e",null).exports,o={name:"SysInterface",components:{jk_tabs:i.a,interface_add:r},data:function(){var t=this;return{columns1:[{title:"序号",width:70,type:"index",align:"center"},{title:"运行状态",key:"state",align:"center",width:100,render:function(t,e){var a=e.row.state,i=e.row.state?"success":"error",n=e.row.desc;return a?t("Tag",{props:{type:"dot",color:i}}):t("Tooltip",{props:{content:n,maxWidth:"200"}},[t("Tag",{props:{type:"dot",color:i}})])}},{title:"所属网卡",key:"iface",align:"center",sortable:!0,width:150},{title:"IP地址",key:"ip",align:"center"},{title:"掩码/前缀",key:"genmask",align:"center"},{title:"IP类型",key:"ipVersion",align:"center",width:150},{title:"管理类型",key:"mgType",align:"center",width:100,render:function(t,e){var a=e.row.mgType,i={0:["默认","default","该类型地址不属于本软件系统管理,为操作系统上的IP"],1:["受管","primary","该类型属于软件系统管理IP,软件将会同步操作系统保证有该IP地址"],2:["禁用","error","该类型当前系统不能添加,修改,删除"]},n=i.hasOwnProperty(a)?i[a][0]:"未知",s=i.hasOwnProperty(a)?i[a][1]:"warning";return t("Tooltip",{props:{placement:"right",content:i.hasOwnProperty(a)?i[a][2]:"未知类型,存在请联系管理员",maxWidth:"600"}},[t("Tag",{props:{color:s}},n)])}},{title:"操作",slot:"action",width:150,align:"center"}],modal:{show:!1,state:"",form:{ipVersion:"IPV4",ip:"",genmask:"",remark:"",iface:"",state:""},ruleInline:{ipVersion:{required:!0,trigger:"change",message:"请选择网络版本"},ip:{required:!0,trigger:"change",validator:("请输入合法的ipv4地址","请输入合法的ipv6地址",function(e,a,i){var n=t.modal.form.ipVersion,s="IPV6"==n?"请输入合法的ipv6地址":"请输入合法的ipv4地址";("IPV6"==n?/^(([\da-fA-F]{1,4}):){8}$/:/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/).test(a+="IPV6"==n?":":".")?i():i(new Error(s))})},genmask:{required:!0,trigger:"change",validator:function(e,a,i){"ipv4"==t.modal.form.ipVersion.toLowerCase()?/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/.test(a+".")?i():i(new Error("请输入合法的ipv4子网掩码")):/^[0-9]*$/.test(a)&&a>0&&a<129?i():i(new Error("请输入合法的ipv6前缀，0~129之间的数字"))}},remark:{trigger:"change",max:20,message:"请输入0~20的字符串"},iface:{required:!0,message:"请选择要设置网络接口",trigger:"change"}}},netInfs:[],row:null,data1:[],links:[{name:"IP管理",to:"/sys/interface"},{name:"路由管理",to:"/sys/route"}]}},mounted:function(){this.showNetInterface()},methods:{showNetInterface:function(){var t=this;this.$https.fetchGet(this.$api.system.inf.ip.url,{ipVersion:"All"}).then((function(e){t.data1=e.data.data}))},deleteInterface:function(t){var e=this;this.$Modal.confirm({title:"删除接口",content:"<p>当前操作将会导致该网口接口被删除，请确认删除</p>",loading:!0,onOk:function(){e.$https.fetchDelete(e.$api.system.inf.ip.url,e.data1[t]).then((function(t){200==t.data.code?location.reload():(e.$Modal.remove(),e.$Message.info("接口配置删除失败"))})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:2.5})}))}})},updateInterface:function(t){var e=this;this.modal.show=!0,this.$https.fetchGet(this.$api.system.inf.showNetInterface.url).then((function(t){var a=t.data.data;e.netInfs=[],a.forEach((function(t){e.netInfs.push(t.name)}))})).catch((function(t){})),this.modal.form.ipVersion=this.data1[t].ipVersion,this.modal.form.ip=this.data1[t].ip,this.modal.form.genmask=this.data1[t].genmask,this.modal.form.remark=this.data1[t].remark,this.modal.form.iface=this.data1[t].iface,this.data1[t].state?this.modal.state="启用":this.modal.state="禁用",this.row=this.data1[t]},restForm:function(){this.$refs.info_form.resetFields()},addForm:function(){var t=this;this.$refs.info_form.validate((function(e){if(e){"禁用"==t.modal.state?t.modal.form.state=!1:t.modal.form.state=!0;var a={oldIp:t.row,ip:t.modal.form};t.$https.fetchPut(t.$api.system.inf.ip.url,a).then((function(e){200==e.data.code?(t.$Notice.success({title:"接口配置修改成功",desc:"正在刷新界面",duration:2.5}),location.reload()):t.$Notice.error({title:"接口配置修改失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}}))}}},l=(a("33f0"),Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),a("interface_add",{staticStyle:{float:"right"}})],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"800px",overflow:"auto"}},[a("Table",{attrs:{size:"small",border:"",columns:t.columns1,data:t.data1},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updateInterface(i)}}},[t._v("修改")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.deleteInterface(i)}}},[t._v("删除")])]}}])})],1)]),a("Modal",{attrs:{title:"修改接口",width:"600",styles:{top:"25%"}},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[a("Form",{ref:"info_form",attrs:{rules:t.modal.ruleInline,model:t.modal.form,"label-width":150}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"状态",prop:"status"}},[a("RadioGroup",{model:{value:t.modal.state,callback:function(e){t.$set(t.modal,"state",e)},expression:"modal.state"}},[a("Radio",{attrs:{label:"禁用"}}),a("Radio",{attrs:{label:"启用"}})],1)],1),a("FormItem",{attrs:{prop:"ipVersion",label:"网络版本"}},[a("RadioGroup",{model:{value:t.modal.form.ipVersion,callback:function(e){t.$set(t.modal.form,"ipVersion",e)},expression:"modal.form.ipVersion"}},[a("Radio",{attrs:{label:"IPV4"}},[t._v("IPV4")]),a("Radio",{attrs:{label:"IPV6"}},[t._v("IPV6")])],1)],1),a("FormItem",{attrs:{prop:"ip",label:"ip地址"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.1"},model:{value:t.modal.form.ip,callback:function(e){t.$set(t.modal.form,"ip",e)},expression:"modal.form.ip"}})],1),a("FormItem",{attrs:{prop:"genmask",label:"掩码/前缀"}},[a("Input",{attrs:{type:"text",placeholder:"255.255.255.0"},model:{value:t.modal.form.genmask,callback:function(e){t.$set(t.modal.form,"genmask",e)},expression:"modal.form.genmask"}})],1),a("FormItem",{attrs:{prop:"iface",label:"网络接口"}},[a("Select",{model:{value:t.modal.form.iface,callback:function(e){t.$set(t.modal.form,"iface",e)},expression:"modal.form.iface"}},t._l(t.netInfs,(function(e,i){return a("Option",{key:i,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{prop:"remark",label:"备注"}},[a("Input",{attrs:{type:"textarea",placeholder:"192.168.1.254"},model:{value:t.modal.form.remark,callback:function(e){t.$set(t.modal.form,"remark",e)},expression:"modal.form.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.modal.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.addForm}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"0eccc0a6",null));e.default=l.exports},"0dbc":function(t,e,a){"use strict";a("d705")},"0dde":function(t,e,a){},"0e75":function(t,e,a){"use strict";a("0dde")},"0ee5":function(t,e,a){},"0f27":function(t,e,a){},"0f59":function(t,e,a){},"104c":function(t,e,a){"use strict";a.r(e);var i={name:"UserManage",components:{jk_tabs:a("25b1").a},data:function(){return{time:"",data:{loginFailuresLockTime:null,loginFailuresNumber:null,userSessionTime:null,uuid:null},links:[{name:"用户",to:"/user/userConfig"},{name:"角色",to:"/user/userRole"},{name:"用户管理",to:"/user/userManage"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.user.user_cfg.url).then((function(e){t.data.loginFailuresLockTime=e.data.data.loginFailuresLockTime,t.data.loginFailuresNumber=e.data.data.loginFailuresNumber,t.data.userSessionTime=e.data.data.userSessionTime,t.data.uuid=e.data.data.uuid})).catch((function(t){}))},update:function(){var t=this;this.checkInput()||this.$https.fetchPut(this.$api.user.user_cfg.url,this.data).then((function(e){200==e.data.code?(t.$Notice.success({title:"时间设置成功",desc:"正在刷新界面",duration:3}),location.reload()):t.$Notice.error({title:"时间设置失败",desc:e.data.describe,duration:3})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:3})}))},checkInput:function(){var t=!1;return""===this.data.loginFailuresLockTime||""===this.data.loginFailuresNumber||""===this.data.userSessionTime?(this.$Message.error({content:"请填写会话超时时间、登录可尝试次数、登录账号锁定时间...",duration:3}),t=!0):/^(([1-9]|[1-9][0-9]|1[0-7][0-9])(\.[0-9]+)?|180)$/.test(this.data.userSessionTime)?/^([12][0-9]|30|[1-9])$/.test(this.data.loginFailuresNumber)?/^(([1-9]|[1-9][0-9]|1[0-7][0-9])(\.[0-9]+)?|180)$/.test(this.data.loginFailuresLockTime)||(this.$Message.error({content:"登录账号锁定时间填写1-180的正整数...",duration:3}),t=!0):(this.$Message.error({content:"登录可尝试次数填写1-30的正整数...",duration:3}),t=!0):(this.$Message.error({content:"会话超时时间填写1-180的正整数...",duration:3}),t=!0),t}}},n=a("c701"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("系统参数")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"40px"}},[t._m(0),a("td",[a("Input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"填写1-180的正整数..."},model:{value:t.data.userSessionTime,callback:function(e){t.$set(t.data,"userSessionTime",e)},expression:"data.userSessionTime"}})],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(1),a("td",[a("Input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"填写1-30的正整数..."},model:{value:t.data.loginFailuresNumber,callback:function(e){t.$set(t.data,"loginFailuresNumber",e)},expression:"data.loginFailuresNumber"}})],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(2),a("td",[a("Input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"填写1-180的正整数..."},model:{value:t.data.loginFailuresLockTime,callback:function(e){t.$set(t.data,"loginFailuresLockTime",e)},expression:"data.loginFailuresLockTime"}})],1)])])])]),a("div",[a("Button",{staticStyle:{margin:"10px 50%"},attrs:{type:"primary"},on:{click:t.update}},[t._v("确认")])],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("会话超时设置(分钟):")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("登录可尝试次数:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("登录账号锁定时间(分钟):")])])}],!1,null,"0cfd763c",null);e.default=s.exports},1052:function(t,e,a){"use strict";a("4eb7")},1097:function(t,e,a){"use strict";a.r(e),a("a450");var i=a("25b1"),n=a("a45a"),s=a("82ae"),r=a.n(s),o={name:"SysInfo",components:{Flow:n.a,JkTabs:i.a},data:function(){return{randomMovieList:[{title:"系统名称  ：",content:null},{title:"系统型号  ：",content:"7300D"},{title:"软件版本  ：",content:null},{title:"发布时间  ：",content:null},{title:"license状态  ：",content:null}],g1:null,g2:null,g3:null,netIfs:[],timestamp:null,timeData:[],recvSpeed:[],sendSpeed:[],timer:"",flowOpt:[],num:0,loginType:null,links:[{name:"上报模块",to:"/sys/info/upload"},{name:"采集模块",to:"/sys/info/collect"}],licenseInfo:{code:"",type:"",currentLicenseState:"",expireDate:""}}},created:function(){},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1,this.connWebSocket(),this.showData(),this.g1=this.$refs.g1.draw({id:"g1",value:1,min:0,max:100,title:"CPU使用率",label:"%"}),this.g2=this.$refs.g2.draw({id:"g2",value:1,min:0,max:100,title:"内存使用率",label:"%"}),this.g3=this.$refs.g3.draw({id:"g3",value:1,min:0,max:100,title:"磁盘使用率",label:"%"})},methods:{getTime:function(){this.randomMovieList[4].content=this.$util.time_stamp2time_date().format("yyyy-MM-dd hh:mm:ss")},showData:function(){var t=this;this.$https.fetchGet(this.$api.software.software.url).then((function(e){t.randomMovieList[0].content=e.data.data.programName,t.randomMovieList[1].content=e.data.data.model,t.randomMovieList[2].content=e.data.data.version,t.randomMovieList[3].content=t.$util.time_stamp2time_date(e.data.data.startUptime).format("yyyy-MM-dd hh:mm:ss")})).catch((function(t){})),this.$https.fetchGet(this.$api.system.license.show.url).then((function(e){t.licenseInfo.code=e.data.data.devSerialnumber,"UNREGISTERED"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="未注册":"EXPIRED"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="已过期":"NORMAL"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="试用":"ABNORMAL"==e.data.data.currentLicenseState&&(t.licenseInfo.currentLicenseState="异常"),t.randomMovieList[4].content=t.licenseInfo.currentLicenseState;var a=Date.parse(new Date),i=(1e3*e.data.data.expireDate-a)/864e5,n=t.$util.time_stamp2time_date(1e3*e.data.data.expireDate);a=t.$util.time_stamp2time_date(a),"试用"==t.licenseInfo.currentLicenseState&&(t.randomMovieList[4].content=t.randomMovieList[4].content+"(剩余"+parseInt(i)+"天)"),t.licenseInfo.expireDate=n.format("yyyy-MM-dd hh:mm:ss");var s="OFFICIAL"==e.data.data.license.type?"正式":"试用 ("+e.data.data.license.trialDays+") 天";for(var r in t.licenseInfo.type=s,t.content){var o=t.content[r].title;t.content[r].val=e.data.data.license.register[o]}t.randomMovieList[4].content="正式版"})).catch((function(t){}))},connWebSocket:function(){var t,e=this,a=null;if(t=this.loginType?"/collect/runner":"/collect/run/websocket","/"==r.a.defaults.baseURL)a="wss://"+window.location.host+t;else{var i=r.a.defaults.baseURL,n=i.lastIndexOf("/");a="wss://"+(i=i.substring(n+1,i.length))+t}var s=new WebSocket(a);this.webSocket=s,s.onmessage=this.$options.methods.onmessage.bind(this),s.onopen=function(t){e.send()},s.onerror=function(t){},s.onclose=function(t){}},closeWebSocket:function(){null!=this.webSocket&&this.webSocket.close()},onmessage:function(t){var e=JSON.parse(t.data),a=JSON.parse(e).mem[0],i=(a-JSON.parse(e).mem[1])/a*100;this.g1.refresh(JSON.parse(e).cpu),this.g2.refresh(i.toFixed(0)),this.g3.refresh(JSON.parse(e).disk);var n=JSON.parse(e).netIfs,s=JSON.parse(e).timestamp;for(var r in n)"docker0"==n[r].name&&n.splice(r,1),0==this.netIfs.length?(n[r].recvSpeed=((n[r].bytesRecv-0)/(s-0)).toFixed(2),n[r].sendSpeed=((n[r].bytesSend-0)/(s-0)).toFixed(2)):(n[r].recvSpeed=((n[r].bytesRecv-this.netIfs[r].bytesRecv)/(s-this.timestamp)).toFixed(2),n[r].sendSpeed=((n[r].bytesSend-this.netIfs[r].bytesSend)/(s-this.timestamp)).toFixed(2));this.netIfs=n,this.timestamp=s,this.flowOpt=n},send:function(){this.webSocket.send(JSON.stringify({instruct:"MONITOR_COLLECT_DEV"}))},scrollBottom:function(){this.$nextTick((function(){var t=document.getElementById("asd");t.scrollTop=t.scrollHeight}))}},beforeDestroy:function(){this.closeWebSocket(),clearInterval(this.timer)}},l=(a("d388"),a("c701")),d=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[t.loginType?t._e():a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9",width:"96%"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("JkTabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"row box margin-x clear-margin padding-x",staticStyle:{width:"48%",float:"left",height:"248px"}},[t._m(0),a("div",{staticClass:"modal-body"},[a("vue-justgage",{ref:"g1",staticClass:"gauge",attrs:{id:"g1"}}),a("vue-justgage",{ref:"g2",staticClass:"gauge",attrs:{id:"g2"}}),a("vue-justgage",{ref:"g3",staticClass:"gauge",attrs:{id:"g3"}})],1)]),t.loginType?a("div",{staticClass:"row box margin-x clear-margin padding-x",staticStyle:{width:"45.5%",height:"248px",float:"left","margin-left":"30px"}},[t._m(1),a("div",{staticClass:"modal-body",staticStyle:{"margin-top":"0px",width:"95%"}},t._l(t.randomMovieList,(function(e,i){return a("div",{key:i,staticStyle:{"margin-bottom":"20px"}},[a("div",{staticStyle:{width:"130px",float:"left","margin-right":"5px","font-size":"12px","text-align":"right"}},[a("span",[t._v(t._s(e.title))])]),a("div",{staticStyle:{"font-size":"12px","margin-left":"5px"}},[a("span",[t._v(t._s(e.content))])])])})),0)]):t._e(),a("div",{staticClass:"row box margin-x clear-margin padding-x",staticStyle:{width:"96%",float:"left"}},[t._m(2),a("div",{staticClass:"modal-body"},[a("Flow",{attrs:{flow:t.flowOpt}})],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[e("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000","font-size":"14px"}},[this._v("\n                    资源监控\n                ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[e("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000","font-size":"14px"}},[this._v("\n                    设备信息\n                ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[e("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000","font-size":"14px"}},[this._v("\n                    接口流量\n                ")])])}],!1,null,"070bef31",null);e.default=d.exports},1247:function(t,e,a){"use strict";a.r(e),a("1bc78"),a("a450"),a("6a61");var i=a("2e91"),n=a("8adf"),s=a("5f3f"),r=a("5e7e"),o={name:"test",inject:["reload"],components:{myTree:n.a,contentTabs:s.default},data:function(){return{theData:[],menuName:"menuName",item:{},index:null,switch1:!1,loading:!1,modal11:!1,modal12:!1,test1:!1,channel:{form:{name:null,remark:null,driveType:null}},driver:{form:{classify:null,driveType:null,name:null,manufacturer:null}},modal14:{show:!1,url:null,data:{}},links:[{title:"基本配置",child:[{name:"名称",input:!0,swith:!1,val:"test"},{name:"是否开启",input:!1,swith:!0,val:"test1"}]},{title:"通道配置",child:[{name:"名称",input:!0,swith:!1,val:"test3"}]}],data1:[{title:"行业标准",expand:!1,children:[{title:"CJ/T188-2018",expand:!0,driveType:"CJ",manufacturer:"城建188协议"},{title:"DL/T645-2007",expand:!0,driveType:"DL",manufacturer:"国标645协议"},{title:"HJ/T212-2017",expand:!0,driveType:"HJ",manufacturer:"环保212-2017协议"},{title:"DNP3.0",expand:!0},{title:"IEC-101",expand:!0},{title:"IEC-102",expand:!0},{title:"IEC-103",expand:!0},{title:"IEC-104",expand:!0},{title:"Modbus-TCP",expand:!0,driveType:"MOD_BUS_TCP",manufacturer:"莫迪康"},{title:"Modbus-TCP从站推送",expand:!0,driveType:"MOD_BUS_TCP_SLAVE",manufacturer:"莫迪康"},{title:"Modbus-RTU",expand:!0,driveType:"MOD_BUS_RTU",manufacturer:"莫迪康"},{title:"Modbus-RTU从站推送",expand:!0,driveType:"MOD_BUS_RTU_SLAVE",manufacturer:"莫迪康"},{title:"Modbus-ASCII",expand:!0,driveType:"MOD_BUS_ASCII",manufacturer:"莫迪康"},{title:"Modbus-ASCII从站推送",expand:!0,driveType:"MOD_BUS_ASCII_SLAVE",manufacturer:"莫迪康"},{title:"OPC-DA",expand:!0,driveType:"OPC_DA",manufacturer:"通用协议"},{title:"OPC-DA桥接客户端",expand:!0,driveType:"OPC_DA_HTTP",manufacturer:"通用协议"},{title:"OPC-UA",expand:!0,driveType:"OPC_UA",manufacturer:"通用协议"},{title:"MQTT-SERVER",expand:!0,driveType:"MQTT_SERVER",manufacturer:"IBM"}]},{title:"PLC系列",expand:!1,children:[{title:"和利时PLC",expand:!0},{title:"西门子S7-200",expand:!0},{title:"西门子S7-200-smart",expand:!0},{title:"西门子S7-300",expand:!0},{title:"西门子S7-400",expand:!0},{title:"西门子S7-1200",expand:!0},{title:"OMRON欧姆龙HOST-LINK",expand:!0},{title:"AB DF1串口协议",expand:!0},{title:"AB-LOGIC-TCP",expand:!0},{title:"AB ETHERENT/IP CIP协议",expand:!0}]}]}},created:function(){this.showData()},mounted:function(){var t=this;r.a.$on("menuShowData",(function(e){t.showData()}))},methods:{getSubMenu:function(t,e){null!=JSON.stringify(t)&&(this.item=t,this.index=e)},findChannel:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$https.fetchGet(this.$api.collect.channelInfo.url);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),findDrive:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(e){var a,i,n,s,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e,t.t0=regeneratorRuntime.keys(a[0].children);case 2:if((t.t1=t.t0()).done){t.next=11;break}return i=t.t1.value,n=a[0].children[i].driveType,t.next=7,this.$https.fetchGet(this.$api.collect.drive.url+"/"+a[0].children[i].uuid);case 7:for(r in(s=t.sent).data.data)a[0].children[i].children.push({id:"3",menuName:s.data.data[r].name,uuid:s.data.data[r].uuid,remark:s.data.data[r].remark,enable:s.data.data[r].enable,driveType:n});t.next=2;break;case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),showData:function(){var t=this;this.findChannel().then((function(e){var a=[{id:"1",menuName:"采集服务",menuCode:"10",children:[]}];for(var i in e.data.data)a[0].children.push({id:"2",menuName:e.data.data[i].name,uuid:e.data.data[i].uuid,driveType:e.data.data[i].driveType,children:[],remark:e.data.data[i].remark});t.findDrive(a).then((function(e){t.theData=e}))}))},addChannel:function(){this.modal11=!this.modal11;var t=this.theData[0].children.length+1;this.channel.form.name="通道C"+t},addPlatForm:function(){this.modal12=!this.modal12},addDrive:function(){this.modal14.show=!0,this.links=[{title:"基本信息",data:"base",child:[{name:"名称",input:!0,sign:!0,data:"name",val:""},{name:"描述",input:!0,data:"remark",val:""},{name:"状态",swith:!0,data:"enable",val:!0}]},{title:"Debug模式",data:"debug",child:[{name:"状态",swith:!0,data:"debug",val:!1}]},{title:"配置信息",data:"loopCollect",child:[{name:"采集间隔(秒)",input:!0,data:"collectInterval",val:"5"}]}],this.modal14.data={base:{channelUuid:null,enable:!1,name:null,remark:null},debug:null,loopCollect:{collectInterval:null}},"HJ"==this.item.driveType&&(this.links.push({title:"设备名称",data:"name",child:[{name:"名称",input:!0,sign:!0,data:"name",val:""}]}),this.modal14.data.name=null),"MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"CJ"==this.item.driveType||"DL"==this.item.driveType?(this.links.push({title:"串口配置",data:"serialPars",child:[{name:"波特率",input:!0,data:"baudRate",val:"9600"},{name:"数据位",input:!0,data:"dataBits",val:"8"},{name:"串口",input_select:!0,data:"device",val:"ttyUSB0",options:["ttyUSB0","ttyUSB1","ttyUSB2","ttyUSB3","ttyUSB4","ttyUSB5","ttyUSB6","ttyUSB7","ttyUSB8","ttyUSB9"]},{name:"校验方式",select:!0,data:"parity",val:0,cityList:[{name:"none",val:0},{name:"odd",val:1},{name:"even",val:2},{name:"mark",val:3},{name:"space",val:4}]},{name:"停止数据位",input:!0,data:"stopBits",val:"0"},{name:"超时时间(毫秒)",input:!0,data:"timeOut",val:"3000"}]}),this.modal14.data.serialPars={baudRate:null,dataBits:null,device:null,parity:null,stopBits:null,timeOut:null}):"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType?(this.links.push({title:"串口配置",data:"serialPars",child:[{name:"波特率",input:!0,data:"baudRate",val:"9600"},{name:"数据位",input:!0,data:"dataBits",val:"8"},{name:"串口",input_select:!0,data:"device",val:"ttyUSB0",options:["ttyUSB0","ttyUSB1","ttyUSB2","ttyUSB3","ttyUSB4","ttyUSB5","ttyUSB6","ttyUSB7","ttyUSB8","ttyUSB9"]},{name:"校验方式",select:!0,data:"parity",val:0,cityList:[{name:"none",val:0},{name:"odd",val:1},{name:"even",val:2},{name:"mark",val:3},{name:"space",val:4}]},{name:"停止数据位",input:!0,data:"stopBits",val:"0"},{name:"超时时间(毫秒)",input:!0,data:"timeOut",val:"3000"}]},{title:"从站配置",data:"slaveParameters",child:[{name:"启始数据位",input:!0,data:"offset",val:"0"},{name:"数据位数量",input:!0,data:"size",val:"1"},{name:"从站ID",input:!0,sign:!0,data:"slaveId",val:""}]}),this.modal14.data.serialPars={baudRate:null,dataBits:null,device:null,parity:null,stopBits:null,timeOut:null},this.modal14.data.slaveParameters={offset:null,size:null,slaveId:null}):"MOD_BUS_TCP"==this.item.driveType||"HJ"==this.item.driveType?(this.links.push({title:"TCP数量",data:"tcpPars",child:[{name:"IP地址",input:!0,sign:!0,data:"host",val:""},{name:"端口",input:!0,sign:!0,data:"port",val:""},{name:"是否长连接",swith:!0,data:"keepAlive",val:!1},{name:"超时时间(毫秒)",input:!0,data:"timeOut",val:"3000"}]}),this.modal14.data.tcpPars={charset:"UTF-8",host:null,keepAlive:null,port:null,timeOut:null}):"MOD_BUS_TCP_SLAVE"==this.item.driveType?(this.modal14.url=this.$api.collect.drive.url+"/modbustcpslave",this.links.push({title:"从站配置",data:"slaveParameters",child:[{name:"启始数据位",input:!0,data:"offset",val:"0"},{name:"数据位数量",input:!0,data:"size",val:"1"},{name:"从站ID",input:!0,sign:!0,data:"slaveId",val:""}]},{title:"TCP数量",data:"tcpPars",child:[{name:"端口",input:!0,sign:!0,data:"port",val:""},{name:"是否长连接",swith:!0,data:"keepAlive",val:!1},{name:"超时时间(毫秒)",input:!0,data:"timeOut",val:"3000"}]}),this.modal14.data.slaveParameters={offset:null,size:null,slaveId:null},this.modal14.data.tcpPars={charset:"UTF-8",host:null,keepAlive:null,port:null,timeOut:null}):"OPC_DA"==this.item.driveType?(this.modal14.url=this.$api.collect.drive.url+"/opcda",this.links.push({title:"OpcDa配置",data:"opcDaParams",child:[{name:"IP地址",input:!0,sign:!0,data:"host",val:""},{name:"域名称",input:!0,data:"domain",val:""},{name:"系统用户名",input:!0,sign:!0,data:"user",val:""},{name:"系统密码",pwd:!0,sign:!0,data:"password",val:""},{name:"程序ID",input:!0,sign:!0,data:"progid",val:""},{name:"连接类型",select:!0,data:"conntype",val:2,cityList:[{name:"CLSID",val:2},{name:"程序名",val:1}]},{name:"时间间隔(毫秒)",input:!0,data:"period",val:"3000"},{name:"超时时间(毫秒)",input:!0,data:"timeout",val:"3000"}]}),this.modal14.data.opcDaParams={conntype:null,domain:null,host:null,password:null,period:null,progid:null,timeout:null,user:null}):"OPC_DA_HTTP"==this.item.driveType?(this.modal14.url=this.$api.collect.drive.url+"/opcdahttp",this.links.push({title:"OpcDaHttp配置",data:"opcDaHttpParams",child:[{name:"URL",input:!0,sign:!0,data:"url",val:"http://"},{name:"程序ID",input:!0,sign:!0,data:"progid",val:""},{name:"时间间隔(毫秒)",input:!0,data:"period",val:"3000"},{name:"组名",input:!0,sign:!0,data:"groupName",val:""},{name:"用户名",input:!0,data:"user",val:"test"},{name:"密码",pwd:!0,data:"password",val:"123456"}]}),this.modal14.data.opcDaHttpParams={groupName:null,password:null,period:null,progid:null,url:null,user:null}):"OPC_UA"==this.item.driveType?(this.modal14.url=this.$api.collect.drive.url+"/opcua",this.links.push({title:"OpcUa配置",data:"opcUaConnParams",child:[{name:"URL",input:!0,sign:!0,data:"url",val:"opc.tcp://"},{name:"用户名",input:!0,sign:!0,data:"user",val:""},{name:"密码",pwd:!0,sign:!0,data:"password",val:""},{name:"安全模式",select:!0,data:"securitypolicy",val:"basic128rsa15",cityList:[{name:"basic128rsa15",val:"basic128rsa15"},{name:"basic256",val:"basic256"},{name:"basic256sha256",val:"basic256sha256"},{name:"aes128_sha256_rsaOaep",val:"aes128_sha256_rsaOaep"},{name:"aes256_sha256_rsapss",val:"aes256_sha256_rsapss"},{name:"none",val:"none"}]}]}),this.modal14.data.opcUaConnParams={password:null,securitypolicy:null,url:null,user:null}):"MQTT_SERVER"==this.item.driveType&&(this.modal14.url=this.$api.collect.drive.url+"/mqttserver",this.links.push({title:"mqttServer配置",data:"mqttServerParams",child:[{name:"IP地址",input:!0,sign:!0,data:"host",val:""},{name:"用户名",input:!0,sign:!0,data:"username",val:""},{name:"密码",pwd:!0,sign:!0,data:"password",val:""},{name:"端口",input:!0,sign:!0,data:"port",val:""},{name:"客户访问策略",select:!0,data:"clientAuth",val:0,cityList:[{name:"none",val:0},{name:"request",val:1},{name:"required",val:2}]}]}),this.modal14.data.mqttServerParams={host:null,username:null,password:null,port:null,clientAuth:null}),"MOD_BUS_RTU"==this.item.driveType?this.modal14.url=this.$api.collect.drive.url+"/modbusrtu":"MOD_BUS_RTU_SLAVE"==this.item.driveType?this.modal14.url=this.$api.collect.drive.url+"/modbusrtuslave":"MOD_BUS_ASCII"==this.item.driveType?this.modal14.url=this.$api.collect.drive.url+"/modbusascii":"MOD_BUS_ASCII_SLAVE"==this.item.driveType?this.modal14.url=this.$api.collect.drive.url+"/modbusasciislave":"CJ"==this.item.driveType?this.modal14.url=this.$api.collect.drive.url+"/cj":"DL"==this.item.driveType?this.modal14.url=this.$api.collect.drive.url+"/dl":"HJ"==this.item.driveType?this.modal14.url=this.$api.collect.drive.url+"/hj":"MOD_BUS_TCP"==this.item.driveType&&(this.modal14.url=this.$api.collect.drive.url+"/modbustcp")},selectChange:function(t){var e=t[t.length-1];this.driver.form.driveType=e.driveType,this.driver.form.name=e.title,this.driver.form.manufacturer=e.manufacturer,e.nodeKey>=1&&e.nodeKey<=18?this.driver.form.classify="行业标准":e.nodeKey>=20?this.driver.form.classify="PLC系列":0!=e.nodeKey&&19!=e.nodeKey||(this.driver.form.classify=null,this.driver.form.driveType=null,this.driver.form.manufacturer=null)},okDriver:function(){this.channel.form.driveType=this.driver.form.driveType},okAddChannel:function(){var t=this;0==this.checkChannel()&&(this.modal11=!1,this.$https.fetchPost(this.$api.collect.channelInfo.url,this.channel.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"通道配置成功",desc:"正在刷新界面",duration:3}),t.showData(),t.reload()):t.$Notice.error({title:"通道配置失败",desc:e.data.describe,duration:3})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:3})})))},delChannel:function(){var t=this,e=null,a=null;for(var i in this.item.children)if(this.item.children[i].enable){a=this.item.children[i].menuName,e=!0;break}e?this.$Notice.error({title:"驱动删除失败",desc:"关联驱动 [ "+a+" ] 正在运行...",duration:3}):this.$https.fetchDelete(this.$api.collect.channelInfo.url+"/"+this.item.uuid).then((function(e){200==e.data.code?(t.$Notice.success({title:"通道删除成功",desc:"正在刷新界面",duration:3}),t.showData(),t.reload(),t.$router.push({path:"/engineering/collectionService"})):t.$Notice.error({title:"通道删除失败",desc:e.data.describe,duration:3})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:3})}))},okAddDrive:function(){var t=this;for(var e in this.links)if("debug"==this.links[e].data)this.modal14.data.debug=this.links[1].child[0].val;else if("HJ"==this.item.driveType&&"name"==this.links[e].data)this.modal14.data.name=this.links[3].child[0].val;else for(var a in this.links[e].child){var i=this.links[e].data,n=this.links[e].child[a].data;this.modal14.data[i][n]=this.links[e].child[a].val}this.modal14.data.base.channelUuid=this.item.uuid,0!=this.checkDrive()||this.check()||(this.modal14.show=!1,this.$https.fetchPost(this.modal14.url,this.modal14.data).then((function(e){200==e.data.code?(t.$Notice.success({title:"驱动配置成功",desc:"正在刷新界面",duration:2.5}),t.showData()):t.$Notice.error({title:"驱动配置失败",desc:e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5})})))},delDrive:function(){var t=this;this.item.enable?this.$Notice.error({title:"驱动删除失败",desc:"该驱动正在运行...",duration:2.5}):this.$https.fetchDelete(this.$api.collect.drive.url+"/"+this.item.uuid).then((function(e){200==e.data.code?(t.$Notice.success({title:"驱动删除成功",desc:"正在刷新界面",duration:2.5}),t.showData(),t.$router.push({path:"/engineering/collectionService"})):t.$Notice.error({title:"驱动删除失败",desc:e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"驱动删除失败",desc:e.data.describe,duration:2.5})}))},is_Connect:function(){var t=this;if(!this.check()){this.loading=!0;var e=null;"OPC_UA"==this.item.driveType?e={opcUaConnParams:{password:this.links[3].child[2].val,securitypolicy:this.links[3].child[3].val,url:this.links[3].child[0].val,user:this.links[3].child[1].val}}:"OPC_DA_HTTP"==this.item.driveType?e={opcDaHttpParams:{groupName:this.links[3].child[3].val,password:this.links[3].child[5].val,period:this.links[3].child[2].val,progid:this.links[3].child[1].val,url:this.links[3].child[0].val,user:this.links[3].child[4].val}}:"OPC_DA"==this.item.driveType?e={opcDaParams:{conntype:this.links[3].child[5].val,domain:this.links[3].child[1].val,host:this.links[3].child[0].val,password:this.links[3].child[3].val,period:this.links[3].child[6].val,progid:this.links[3].child[4].val,timeout:this.links[3].child[7].val,user:this.links[3].child[2].val}}:"MOD_BUS_TCP_SLAVE"==this.item.driveType?e={slaveParameters:{offset:this.links[3].child[0].val,size:this.links[3].child[1].val,slaveId:this.links[3].child[2].val},tcpPars:{charset:"UTF-8",host:this.links[4].child[0].val,keepAlive:this.links[4].child[2].val,port:this.links[4].child[1].val,timeOut:this.links[4].child[3].val}}:"MOD_BUS_TCP"==this.item.driveType?e={tcpPars:{charset:"UTF-8",host:this.links[3].child[0].val,keepAlive:this.links[3].child[2].val,port:this.links[3].child[1].val,timeOut:this.links[3].child[3].val}}:"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType?e={serialPars:{baudRate:this.links[3].child[0].val,dataBits:this.links[3].child[1].val,device:this.links[3].child[2].val,parity:this.links[3].child[3].val,stopBits:this.links[3].child[4].val,timeOut:this.links[3].child[5].val},slaveParameters:{offset:this.links[4].child[0].val,size:this.links[4].child[1].val,slaveId:this.links[4].child[2].val}}:"MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"CJ"==this.item.driveType||"DL"==this.item.driveType?e={serialPars:{baudRate:this.links[3].child[0].val,dataBits:this.links[3].child[1].val,device:this.links[3].child[2].val,parity:this.links[3].child[3].val,stopBits:this.links[3].child[4].val,timeOut:this.links[3].child[5].val}}:"HJ"==this.item.driveType?e={name:this.links[3].child[0].val,tcpPars:{charset:"UTF-8",host:this.links[4].child[0].val,keepAlive:this.links[4].child[2].val,port:this.links[4].child[1].val,timeOut:this.links[4].child[3].val}}:"MQTT_SERVER"==this.item.driveType&&(e={mqttServerParams:{clientAuth:this.links[3].child[4].val,host:this.links[3].child[0].val,password:this.links[3].child[2].val,port:this.links[3].child[3].val,username:this.links[3].child[1].val}}),this.$https.fetchPost(this.modal14.url+"/actions/testconn",e).then((function(e){200==e.data.code?(t.$Notice.success({title:"连接成功",desc:"请进行下一步...",duration:2.5}),t.loading=!1):t.$Notice.error({title:"连接失败",desc:"请重新填写...",duration:2.5}),t.loading=!1})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5}),t.loading=!1}))}},check:function(){for(var t in this.links)if("debug"==this.links[t].data)this.modal14.data.debug=this.links[1].child[0].val;else if("HJ"==this.item.driveType&&"name"==this.links[t].data)this.modal14.data.name=this.links[3].child[0].val;else for(var e in this.links[t].child){var a=this.links[t].data,i=this.links[t].child[e].data;this.modal14.data[a][i]=this.links[t].child[e].val}var n=null;return"MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"CJ"==this.item.driveType||"DL"==this.item.driveType?n=this.checkMdbRtuOrMdbAsciiDrive():"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType?0!=(n=this.checkMdbRtuOrMdbAsciiDrive())||(n=this.checkSlaveDrive()):"MOD_BUS_TCP"==this.item.driveType?n=this.checkMdbTcpDrive():"HJ"==this.item.driveType?0!=(n=this.checkMdbTcpDrive())||(n=this.checkHJDrive()):"MOD_BUS_TCP_SLAVE"==this.item.driveType?0!=(n=this.checkMdbTcpDrive())||(n=this.checkSlaveDrive()):"OPC_DA"==this.item.driveType?n=this.checkDaDrive():"OPC_DA_HTTP"==this.item.driveType?n=this.checkDaHttpDrive():"OPC_UA"==this.item.driveType?n=this.checkUaDrive():"MQTT_SERVER"==this.item.driveType&&(n=this.checkMQTTDrive()),n},checkChannel:function(){var t=!1;return null!=this.channel.form.name&&null!=this.channel.form.driveType||(this.$Message.error({content:"请填写通道名称或者通道驱动...",duration:3}),t=!0),t},checkDrive:function(){var t=!1;return""===this.modal14.data.base.name||""===this.modal14.data.loopCollect.collectInterval?(this.$Message.error({content:"请填写驱动名称或者间隔时间...",duration:3}),t=!0):/^[1-9]\d{0,2}$/.test(this.modal14.data.loopCollect.collectInterval)?/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(this.modal14.data.base.name)||(this.$Message.error({content:"驱动名称不允许特殊符号...",duration:3}),t=!0):(this.$Message.error({content:"间隔时间填写1-999之间的数字...",duration:3}),t=!0),t},checkUaDrive:function(){var t=!1;return""===this.modal14.data.opcUaConnParams.password||""===this.modal14.data.opcUaConnParams.securitypolicy||""===this.modal14.data.opcUaConnParams.url||""===this.modal14.data.opcUaConnParams.user?(this.$Message.error({content:"请填写URL、用户名、密码、安全模式...",duration:3}),t=!0):/^opc.tcp:\/\/((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5]):([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.modal14.data.opcUaConnParams.url)?/^[a-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.modal14.data.opcUaConnParams.user)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.modal14.data.opcUaConnParams.password)||(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文或中文...",duration:3}),t=!0):(this.$Message.error({content:"URL请填写正确的 opc.tcp://IP:端口 格式...",duration:3}),t=!0),t},checkDaDrive:function(){var t=!1;return""===this.modal14.data.opcDaParams.host||""===this.modal14.data.opcDaParams.password||""===this.modal14.data.opcDaParams.period||""===this.modal14.data.opcDaParams.progid||""===this.modal14.data.opcDaParams.timeout||""===this.modal14.data.opcDaParams.user?(this.$Message.error({content:"请填写IP地址、系统用户名、系统密码、时间间隔、程序ID、超时时间...",duration:3}),t=!0):/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.modal14.data.opcDaParams.host)?/^[\da-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.modal14.data.opcDaParams.user)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.modal14.data.opcDaParams.password)?/^[1-9]\d{3,}$/.test(this.modal14.data.opcDaParams.timeout)&&/^[1-9]\d{3,}$/.test(this.modal14.data.opcDaParams.period)||(this.$Message.error({content:"超时时间或时间间隔填写>=1000...",duration:3}),t=!0):(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字或中文...",duration:3}),t=!0):(this.$Message.error({content:"请填写正确的IP格式...",duration:3}),t=!0),t},checkDaHttpDrive:function(){var t=!1;return""===this.modal14.data.opcDaHttpParams.groupName||""===this.modal14.data.opcDaHttpParams.password||""===this.modal14.data.opcDaHttpParams.period||""===this.modal14.data.opcDaHttpParams.progid||""===this.modal14.data.opcDaHttpParams.url||""===this.modal14.data.opcDaHttpParams.user?(this.$Message.error({content:"请填写URL、程序ID、时间间隔、组名、用户名、密码...",duration:3}),t=!0):/^http:\/\/((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5]):([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.modal14.data.opcDaHttpParams.url)?/^[\da-zA-Z\u4e00-\u9fa5!@#$%^&*]{0,30}$/.test(this.modal14.data.opcDaHttpParams.groupName)?/^[\da-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.modal14.data.opcDaHttpParams.user)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.modal14.data.opcDaHttpParams.password)?/^[1-9]\d{3,}$/.test(this.modal14.data.opcDaHttpParams.period)||(this.$Message.error({content:"时间间隔填写>=1000...",duration:3}),t=!0):(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字或中文...",duration:3}),t=!0):(this.$Message.error({content:"组名填写30位以内英文、中文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"URL请填写正确的 http://IP:端口 格式...",duration:3}),t=!0),t},checkMdbTcpDrive:function(){var t=!1;return""===this.modal14.data.tcpPars.port||""===this.modal14.data.tcpPars.timeOut?(this.$Message.error({content:"请填写端口、超时时间...",duration:3}),t=!0):/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.modal14.data.tcpPars.port)?/^[1-9]\d{3,}$/.test(this.modal14.data.tcpPars.timeOut)||(this.$Message.error({content:"超时时间填写>=1000...",duration:3}),t=!0):(this.$Message.error({content:"请正确填写端口号(1-65535)...",duration:3}),t=!0),t},checkHJDrive:function(){var t=!1;return""===this.modal14.data.name?(this.$Message.error({content:"请填写设备名称...",duration:3}),t=!0):/^[\da-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.modal14.data.name)||(this.$Message.error({content:"设备名称填写30位以内英文、数字或中文...",duration:3}),t=!0),t},checkMdbRtuOrMdbAsciiDrive:function(){var t=!1;return""===this.modal14.data.serialPars.baudRate||""===this.modal14.data.serialPars.dataBits||""===this.modal14.data.serialPars.device||""===this.modal14.data.serialPars.parity||""===this.modal14.data.serialPars.stopBits||""===this.modal14.data.serialPars.timeOut?(this.$Message.error({content:"请填写波特率、数据位、串口、校验方式、停止数据位、超时时间...",duration:3}),t=!0):/^\d{0,6}$/.test(this.modal14.data.serialPars.baudRate)?/^\d{0,4}$/.test(this.modal14.data.serialPars.dataBits)&&/^\d{0,4}$/.test(this.modal14.data.serialPars.stopBits)?/^[1-9]\d{3,}$/.test(this.modal14.data.serialPars.timeOut)||(this.$Message.error({content:"超时时间填写>=1000...",duration:3}),t=!0):(this.$Message.error({content:"数据位或停止位填写4位以内数字...",duration:3}),t=!0):(this.$Message.error({content:"波特率填写6位以内数字...",duration:3}),t=!0),t},checkSlaveDrive:function(){var t=!1;return""===this.modal14.data.slaveParameters.offset||""===this.modal14.data.slaveParameters.size||""===this.modal14.data.slaveParameters.slaveId?(this.$Message.error({content:"请填写起始数据位、数据位数量、从站ID...",duration:3}),t=!0):/^\d{0,5}$/.test(this.modal14.data.slaveParameters.offset)&&/^\d{0,5}$/.test(this.modal14.data.slaveParameters.size)&&/^\d{0,5}$/.test(this.modal14.data.slaveParameters.slaveId)||(this.$Message.error({content:"从起始数据位、数据点数量、从站ID填写5位以内数字...",duration:3}),t=!0),t},checkMQTTDrive:function(){var t=!1;return""===this.modal14.data.mqttServerParams.host||""===this.modal14.data.mqttServerParams.username||""===this.modal14.data.mqttServerParams.password||""===this.modal14.data.mqttServerParams.port?(this.$Message.error({content:"请填写IP地址、端口、用户名、密码...",duration:3}),t=!0):/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.modal14.data.mqttServerParams.host)?/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.modal14.data.mqttServerParams.port)?/^[a-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.modal14.data.mqttServerParams.username)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.modal14.data.mqttServerParams.password)||(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文或中文...",duration:3}),t=!0):(this.$Message.error({content:"请正确填写端口号(1-65535)...",duration:3}),t=!0):(this.$Message.error({content:"请填写正确的IP格式...",duration:3}),t=!0),t}}},l=(a("b6b1"),a("c701")),d=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"min-width":"200px",height:"767px",float:"left",border:"1px solid rgba(0,0,0,.2)","box-shadow":"2px 3px 5px rgba(0,0,0,.3)","border-radius":"4px",margin:"15px 0 0 20px","background-color":"#ffffff",overflow:"auto"}},[a("div",{staticClass:"treesclass"},[a("my-tree",{attrs:{data:t.theData,name:t.menuName,loading:t.loading},on:{getSubMenu:t.getSubMenu}})],1),a("ul",{staticClass:"dropdown-menu",attrs:{id:"msgRightMenu"}},[a("li",[a("a",{staticStyle:{"text-align":"center","font-size":"12px"},attrs:{id:"adddepart"},on:{click:t.addChannel}},[t._v("新建通道...")])])]),a("ul",{staticClass:"dropdown-menu",attrs:{id:"msgRightMenu1"}},[a("li",[a("a",{staticStyle:{"text-align":"center","font-size":"12px"},on:{click:t.addDrive}},[t._v("新建驱动...")])]),a("li",[a("a",{staticStyle:{"text-align":"center","font-size":"12px"},on:{click:t.delChannel}},[t._v("删除通道...")])])]),a("ul",{staticClass:"dropdown-menu",attrs:{id:"msgRightMenu2"}},[a("li",[a("a",{staticStyle:{"text-align":"center","font-size":"12px"},on:{click:t.delDrive}},[t._v("删除驱动...")])])]),a("Modal",{attrs:{title:"通道","class-name":"vertical-center-modal",width:"600",styles:{top:"25%"}},on:{"on-ok":t.okAddChannel},model:{value:t.modal11,callback:function(e){t.modal11=e},expression:"modal11"}},[a("div",{staticStyle:{width:"100%",height:"150px"}},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("基本信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"200px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("名称:")]),a("Input",{staticStyle:{width:"130px"},model:{value:t.channel.form.name,callback:function(e){t.$set(t.channel.form,"name",e)},expression:"channel.form.name"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),a("div",{staticStyle:{float:"left","margin-left":"10px",width:"200px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"130px"},model:{value:t.channel.form.remark,callback:function(e){t.$set(t.channel.form,"remark",e)},expression:"channel.form.remark"}})],1)])]),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("通道配置")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"190px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("名称:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:t.driver.form.name,callback:function(e){t.$set(t.driver.form,"name",e)},expression:"driver.form.name"}})],1),a("div",{staticStyle:{float:"left","margin-left":"10px",width:"285px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"130px","margin-right":"10px"},attrs:{disabled:""},model:{value:t.channel.form.driveType,callback:function(e){t.$set(t.channel.form,"driveType",e)},expression:"channel.form.driveType"}}),a("Button",{attrs:{size:"small"},on:{click:t.addPlatForm}},[t._v("选择协议")])],1)])])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.modal11=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.okAddChannel}},[t._v("确定")])],1)]),a("Modal",{attrs:{title:"请选择协议","class-name":"vertical-center-modal",width:"900",styles:{top:"15%"}},on:{"on-ok":t.okDriver},model:{value:t.modal12,callback:function(e){t.modal12=e},expression:"modal12"}},[a("div",{staticStyle:{width:"100%",height:"350px"}},[a("div",{staticStyle:{width:"36%","margin-left":"50px",height:"350px",border:"1px solid rgba(0,0,0,.2)","box-shadow":"2px 3px 5px rgba(0,0,0,.3)","border-radius":"4px",float:"left",overflow:"auto"}},[a("Tree",{attrs:{data:t.data1},on:{"on-select-change":t.selectChange}})],1),a("div",{staticStyle:{width:"30%","margin-left":"50px",float:"left"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("分类:")]),a("Input",{staticStyle:{width:"170px"},attrs:{disabled:""},model:{value:t.driver.form.classify,callback:function(e){t.$set(t.driver.form,"classify",e)},expression:"driver.form.classify"}})],1),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("名称:")]),a("Input",{staticStyle:{width:"170px"},attrs:{disabled:""},model:{value:t.driver.form.name,callback:function(e){t.$set(t.driver.form,"name",e)},expression:"driver.form.name"}})],1),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("厂家:")]),a("Input",{staticStyle:{width:"170px"},attrs:{disabled:""},model:{value:t.driver.form.manufacturer,callback:function(e){t.$set(t.driver.form,"manufacturer",e)},expression:"driver.form.manufacturer"}})],1),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"170px"},attrs:{disabled:""},model:{value:t.driver.form.driveType,callback:function(e){t.$set(t.driver.form,"driveType",e)},expression:"driver.form.driveType"}})],1)])])]),a("Modal",{attrs:{title:"驱动信息","class-name":"vertical-center-modal",width:"900",styles:{top:"10%"}},on:{"on-ok":t.okAddDrive},model:{value:t.modal14.show,callback:function(e){t.$set(t.modal14,"show",e)},expression:"modal14.show"}},[a("contentTabs",{attrs:{links:t.links}}),a("Button",{attrs:{size:"small",type:"warning",loading:t.loading},on:{click:t.is_Connect}},[t._v("连接测试")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.modal14.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.okAddDrive}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"018b0ca2",null);e.default=d.exports},"144e":function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"LogCommond",components:{jk_tabs:i.a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"访问IP",key:"clientIp",align:"center"},{title:"操作内容",key:"title",align:"center"},{title:"状态",align:"center",render:function(t,e){return t("p",200==e.row.respStatus?"成功":"失败")}},{title:"访问时间",sortable:!0,align:"center",render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.startTime).format("yyyy-MM-dd hh:mm:ss"))}}],ipVal:null,contentVal:null,timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"startTime",order:!0}]}},links:[{name:"管理操作日志",to:"/logs/logCommond"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.userLog.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")},query:function(){if(this.page.form.filters=[],null!=this.ipVal&&""!=this.ipVal&&this.page.form.filters.push({filed:"clientIp",params:[""+this.ipVal],type:"equal"}),null!=this.contentVal&&""!=this.contentVal&&this.page.form.filters.push({filed:"title",params:[""+this.contentVal],type:"like"}),""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"startTime",params:[t,e],type:"between"})}this.showData()}}},r=(a("6f39"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"220px",float:"left","font-size":"12px"}},[t._v("\n                        访问IP：\n                        "),a("Input",{staticStyle:{width:"150px"},model:{value:t.ipVal,callback:function(e){t.ipVal=e},expression:"ipVal"}})],1),a("div",{staticStyle:{width:"220px",float:"left","font-size":"12px"}},[t._v("\n                        操作内容：\n                        "),a("Input",{staticStyle:{width:"150px"},model:{value:t.contentVal,callback:function(e){t.contentVal=e},expression:"contentVal"}})],1),a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"ad882260",null);e.default=o.exports},"172e":function(t,e,a){"use strict";a("97a2")},1761:function(t,e,a){},"17a2":function(t,e,a){"use strict";a("b305")},"1baa":function(t,e,a){"use strict";a.r(e);var i={name:"Strategy",components:{nav5:a("4c9b").a},provide:function(){return{reload:this.reload}},data:function(){return{IsRouterAlive:!0}},methods:{reload:function(){this.IsRouterAlive=!1,this.$nextTick((function(){this.IsRouterAlive=!0}))}}},n=(a("6388"),a("c701")),s=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[this.IsRouterAlive?e("router-view"):this._e()],1)],1)}),[],!1,null,"1a8f1478",null);e.default=s.exports},"1c77":function(t,e,a){"use strict";a("f44a")},"1cbc":function(t,e,a){"use strict";var i={name:"JkTabs",props:{links:{type:Array}},data:function(){return{test:[{name:"报表统计",to:"log"},{name:"历史日志",child:[{name:"视频业务",to:"log"},{name:"结构化同步",to:"log"},{name:"非结构同步",to:"log"}]}]}}},n=(a("6339"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c_tabs"},[t._l(t.links,(function(e,i){return[e.child?t._e():a("router-link",{attrs:{to:e.to}},[t._v(t._s(e.name))]),e.child?a("Dropdown",[a("router-link",{staticClass:"tab_dir",attrs:{to:e.to}},[t._v(t._s(e.name)+"\n                "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{staticStyle:{padding:"20px"},attrs:{slot:"list"},slot:"list"},[t._l(e.child,(function(i,n){return[a("router-link",{attrs:{to:i.to}},[t._v(t._s(i.name))]),n<e.child.length-1?[t._v("|")]:t._e()]}))],2)],1):t._e(),i<t.links.length-1?[t._v("|")]:t._e()]}))],2)}),[],!1,null,"10e3d244",null);e.a=s.exports},"1deb":function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"CollectionServiceInfo",components:{jk_tabs:i.a},data:function(){return{columns1:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"名称",key:"name",align:"center"},{title:"描述",key:"remark",align:"center"},{title:"协议",key:"driveType",align:"center"},{title:"创建时间",key:"createTime",align:"center"}],data1:[],links:[{name:"采集服务",to:"/engineering/collectionService/info"}],flexbtn:!1,message:""}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.collect.channelInfo.url).then((function(e){for(var a in t.data1=e.data.data,t.data1)t.data1[a].createTime=t.formatDate(t.data1[a].createTime)})).catch((function(t){}))},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")}}},r=(a("8152"),a("c701")),o=Object(r.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid",staticStyle:{"min-width":"0",flex:"1"}},[e("div",{staticClass:"row box margin-x clear-margin padding-x"},[e("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[e("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[e("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:this.links}})],1)]),e("div",{staticClass:"modal-body",staticStyle:{"min-height":"715px",overflow:"auto"}},[e("Table",{attrs:{size:"small",border:"",columns:this.columns1,data:this.data1}})],1)])])}),[],!1,null,"6e79c498",null);e.default=o.exports},"1e52":function(t,e,a){},"1f30":function(t,e,a){"use strict";a.r(e);var i={components:{},data:function(){return{cityList:["MONITOR_COLLECT_DEV","MONITOR_COLLECT_ITEM"],model1:"MONITOR_COLLECT_DEV",value:null,webSocket:null,text:[]}},mounted:function(){this.connWebSocket()},methods:{connWebSocket:function(){var t=new WebSocket("wss://192.168.10.45:9999/collect/websocket");this.webSocket=t,t.onmessage=this.$options.methods.onmessage.bind(this),t.onopen=function(t){},t.onerror=function(t){},t.onclose=function(t){}},closeWebSocket:function(){null!=this.webSocket&&this.webSocket.close()},onmessage:function(t){var e=JSON.parse(t.data);this.text.push(e),this.scrollBottom()},send:function(){var t={instruct:this.model1,param:this.value};this.webSocket.send(JSON.stringify(t))},scrollBottom:function(){this.$nextTick((function(){var t=document.getElementById("asd");t.scrollTop=t.scrollHeight}))}},beforeDestroy:function(){this.closeWebSocket()}},n=a("c701"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("JkNav"),a("Select",{staticStyle:{width:"250px"},model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},t._l(t.cityList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1),a("Input",{model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),a("button",{attrs:{type:"button"},on:{click:t.send}},[t._v("查询")]),a("div",{staticClass:"box",staticStyle:{"background-color":"#8a8a8a",color:"#f2f2f2",height:"430px",overflow:"auto"},attrs:{id:"asd"}},t._l(t.text,(function(e,i){return a("p",{key:i,staticStyle:{"white-space":"pre-line"}},[t._v(t._s(e))])})),0),a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)}),[],!1,null,"00b3106c",null);e.default=s.exports},"1fe7":function(t,e,a){"use strict";a("f7b0")},"216f":function(t,e,a){"use strict";a("292c")},2381:function(t,e,a){},"244c":function(t,e,a){},"25b1":function(t,e,a){"use strict";var i={name:"JkTabs",props:{links:{type:Array}},data:function(){return{test:[{name:"报表统计",to:"log"},{name:"历史日志",child:[{name:"视频业务",to:"log"},{name:"结构化同步",to:"log"},{name:"非结构同步",to:"log"}]}]}}},n=(a("893a"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c_tabs"},[t._l(t.links,(function(e,i){return[e.child?t._e():a("router-link",{attrs:{to:e.to}},[t._v(t._s(e.name))]),e.child?a("Dropdown",[a("router-link",{staticClass:"tab_dir",attrs:{to:e.to}},[t._v(t._s(e.name)+"\n                "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{staticStyle:{padding:"20px"},attrs:{slot:"list"},slot:"list"},[t._l(e.child,(function(i,n){return[a("router-link",{attrs:{to:i.to}},[t._v(t._s(i.name))]),n<e.child.length-1?[t._v("|")]:t._e()]}))],2)],1):t._e(),i<t.links.length-1?[t._v("|")]:t._e()]}))],2)}),[],!1,null,"47a61492",null);e.a=s.exports},"26b4":function(t,e,a){},"27a2":function(t,e,a){"use strict";a("39ef")},"283d":function(t,e,a){},"292c":function(t,e,a){},"2af7":function(t,e,a){},"2b78":function(t,e,a){"use strict";a("b996")},"2b93":function(t,e,a){"use strict";a.r(e),a("d0f2");var i=a("28f8"),n=(a("e5b4"),a("a450"),a("1cbc")),s=a("25b1"),r=a("5f3f"),o={name:"DetailTabs",props:{links:{type:Array}},data:function(){return{}},methods:{common_event:function(t,e){this[t](e)},pass:function(t){alert(t)},nopass:function(t){alert(t)},okSelect:function(t){this.links[3].child[2].val=t}},mounted:function(){}},l=(a("9a9b"),a("c701")),d=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.links,(function(e,i){return a("div",{key:i,staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(e.title))]),a("div",{staticStyle:{margin:"15px 10px"}},t._l(e.child,(function(i,n){return a("div",{key:n,staticStyle:{float:"left","margin-bottom":"10px",width:"220px",height:"32px","text-align":"center"}},[e.arr?a("div",[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(i.title))]),a("div",{staticStyle:{margin:"15px 10px",display:"flex","align-items":"center","flex-wrap":"wrap"}},t._l(i.child,(function(e,n){return a("div",{key:n,staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"margin-right":"25px","font-size":"12px"}},[t._v(t._s(e.name)+":")]),e.input?a("Input",{staticStyle:{width:"100px"},attrs:{val:e.data,disabled:i.disabled},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}}):t._e(),e.swith?a("i-Switch",{attrs:{val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])]):t._e(),e.pwd?a("Input",{staticStyle:{width:"100px"},attrs:{type:"password",val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}}):t._e(),e.select?a("Select",{staticStyle:{width:"100px"},attrs:{val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}},t._l(e.cityList,(function(e){return a("Option",{key:e.val,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1):t._e(),e.select?a("span",{staticStyle:{"margin-left":"5px"}},[t._v(" ")]):t._e(),e.sign?a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")]):t._e(),e.sign?t._e():a("span",{staticStyle:{"margin-left":"5px"}},[t._v(" ")])],1)})),0)])]):a("div",[a("span",{staticStyle:{"margin-right":"25px","font-size":"12px"}},[t._v(t._s(i.name)+"  :  "+t._s(i.val))])])])})),0)])})),0)}),[],!1,null,"1d1cf7a8",null).exports,c={name:"ModbusTabs",props:{links:{type:Array}},data:function(){return{arr:[]}},mounted:function(){},methods:{common_event:function(t,e){this[t](e)},pass:function(t){alert(t)},nopass:function(t){alert(t)},checkAllGroupChange:function(t){if(this.links[0].child.length>t.length)for(var e in this.links[0].child){var a=0;if(0==t.length)this.links[0].child=[];else{for(var i in t)if(this.links[0].child[e].title==t[i]){a++;break}0==a&&this.links[0].child.splice(e,1)}}else{var n=t.length-1;"CT运算"==t[n]?this.links[0].child.push({title:"CT运算",data:"ct",child:[{name:"初级值",input:!0,data:"primary",val:""}]}):"高压电表读数运算"==t[n]?this.links[0].child.push({title:"高压电表读数运算",data:"hem",child:[{name:"电流互感器初级值",input:!0,data:"ctPrimary",val:""},{name:"电压互感器初级值",input:!0,data:"ptPrimary",val:""}]}):"电压电表读数运算"==t[n]?this.links[0].child.push({title:"电压电表读数运算",data:"lem",child:[{name:"电流互感器初级值",input:!0,data:"ctPrimary",val:""}]}):"PT运算"==t[n]?this.links[0].child.push({title:"PT运算",data:"pt",child:[{name:"初级值",input:!0,data:"primary",val:""}]}):"量程转换"==t[n]&&this.links[0].child.push({title:"量程转换",data:"rc",child:[{name:"转换最小值",input:!0,data:"minValue",val:""},{name:"转换最大值",input:!0,data:"maxValue",val:""},{name:"量程最小值",input:!0,data:"minChange",val:""},{name:"量程最大值",input:!0,data:"maxChange",val:""},{name:"超出量程 默认值",input:!0,data:"defValue",val:""}]})}}}},p=(a("17a2"),Object(l.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.links,(function(e,i){return a("div",{key:i,staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0","max-height":"300px"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(e.title))]),a("div",{staticStyle:{margin:"15px 10px"}},[a("CheckboxGroup",{staticStyle:{float:"left",margin:"0 0 10px 10px",width:"100%"},on:{"on-change":t.checkAllGroupChange},model:{value:e.checkAllGroup,callback:function(a){t.$set(e,"checkAllGroup",a)},expression:"value.checkAllGroup"}},[a("Checkbox",{attrs:{label:"CT运算"}}),a("Checkbox",{attrs:{label:"高压电表读数运算"}}),a("Checkbox",{attrs:{label:"电压电表读数运算"}}),a("Checkbox",{attrs:{label:"PT运算"}}),a("Checkbox",{attrs:{label:"量程转换"}})],1),t._l(e.child,(function(i,n){return a("div",{key:n,staticStyle:{float:"left",margin:"0 0 10px 10px"}},[e.arr?a("div",[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(i.title))]),a("div",{staticStyle:{margin:"15px 10px"}},t._l(i.child,(function(e,n){return a("div",{key:n,staticStyle:{float:"left",margin:"0 0 10px 10px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.name)+":")]),e.input?a("Input",{staticStyle:{width:"60px"},attrs:{val:e.data,disabled:i.disabled},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}}):t._e(),e.swith?a("i-Switch",{attrs:{val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}}):t._e(),e.pwd?a("Input",{staticStyle:{width:"60px"},attrs:{type:"password",val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}}):t._e(),e.select?a("Select",{staticStyle:{width:"60px"},attrs:{val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}},t._l(e.cityList,(function(e){return a("Option",{key:e.val,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1):t._e(),e.sign?a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")]):t._e()],1)})),0)])]):t._e()])}))],2)])})),0)}),[],!1,null,"4c83bf78",null).exports),u={name:"NumberFormatTabs",props:{links:{type:Array}},data:function(){return{arr:[]}},filters:{select:function(t){return"NONE"==t?t+"(默认模式)":"ABS"==t?t+"(绝对值)":"DECIMALS"==t?t+"(保留小数位位数)":"EXP"==t?t+"(自定义格式)":void 0}},mounted:function(){},methods:{common_event:function(t,e){this[t](e)},pass:function(t){alert(t)},nopass:function(t){alert(t)},test:function(t){this.links[0].child.length>1&&this.links[0].child.splice(1,1),"DECIMALS"==t?this.links[0].child.push({name:"小数位",input:!0,data:"decimal",val:""}):"EXP"==t&&this.links[0].child.push({name:"格式化表达式",input:!0,data:"exp",val:"",placeholder:"#{v}*10",sign:!0})}}},m=(a("6f50"),Object(l.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.links,(function(e,i){return a("div",{key:i,staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[e.detailshow?a("div",[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(e.title))]),a("div",{staticStyle:{margin:"15px 10px"}},t._l(e.child,(function(e,i){return a("div",{key:i,staticStyle:{float:"left","margin-bottom":"10px",height:"32px","margin-left":"35px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.name)+"  :  "+t._s(t._f("select")(e.val)))])])})),0)]):a("div",[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(e.title))]),a("div",{staticStyle:{margin:"15px 10px"}},t._l(e.child,(function(e,i){return a("div",{key:i,staticStyle:{float:"left","margin-bottom":"10px",height:"32px","margin-left":"35px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.name)+":")]),e.input?a("Input",{staticStyle:{width:"100px"},attrs:{val:e.data,disabled:e.disabled,placeholder:e.placeholder},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"v.val"}}):t._e(),e.swith?a("i-Switch",{attrs:{val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"v.val"}}):t._e(),e.pwd?a("Input",{staticStyle:{width:"130px"},attrs:{type:"password",val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"v.val"}}):t._e(),e.select?a("Select",{staticStyle:{width:"130px"},attrs:{val:e.data},on:{"on-change":t.test},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"v.val"}},t._l(e.cityList,(function(e){return a("Option",{key:e.val,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1):t._e(),e.sign?a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("输入表达式请携带参数#{v}，#{v}代表采集到的原始数据")]):t._e()],1)})),0)])])})),0)}),[],!1,null,"af9e1950",null).exports),h={name:"NewContentTabs",props:{links:{type:Array}},data:function(){return{showdetailswitch:!1,showdetail:!1}},methods:{change:function(t){this.showdetail=1==t},common_event:function(t,e){this[t](e)},pass:function(t){alert(t)},nopass:function(t){alert(t)},okSelect:function(t){this.links[3].child[2].val=t}}},f=(a("9419"),Object(l.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{display:"inline-block",margin:"10px","font-size":"14px"}},[t._v("详细信息")]),a("i-Switch",{staticStyle:{margin:"0 70px 0 0"},attrs:{size:"large"},on:{"on-change":t.change},model:{value:t.showdetailswitch,callback:function(e){t.showdetailswitch=e},expression:"showdetailswitch"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("展开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("隐藏")])]),t._l(t.links,(function(e,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.showdetail,expression:"showdetail"}],key:i,staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(e.title))]),a("div",{staticStyle:{margin:"15px 10px"}},t._l(e.child,(function(e,i){return a("div",{key:i,staticStyle:{float:"left","margin-bottom":"10px",width:"260px",height:"32px","text-align":"right"}},[a("div",[a("span",{staticStyle:{"margin-right":"25px","font-size":"12px"}},[t._v(t._s(e.name)+":")]),e.swith?a("i-Switch",{staticStyle:{margin:"5px 74px 0 0"},attrs:{size:"large",val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"v.val"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]):t._e(),e.input?a("Input",{staticStyle:{width:"130px"},attrs:{val:e.data,disabled:e.disabled},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"v.val"}}):t._e(),e.pwd?a("Input",{staticStyle:{width:"130px"},attrs:{type:"password",val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"v.val"}}):t._e(),e.select?a("Select",{staticStyle:{width:"130px","text-align":"left","margin-right":"-8px"},attrs:{val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"v.val"}},t._l(e.cityList,(function(e){return a("Option",{key:e.val,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1):t._e(),e.select?a("span",{staticStyle:{"margin-left":"5px"}},[t._v(" ")]):t._e(),e.input_select?a("Select",{staticClass:"select-box",on:{"on-change":t.okSelect}},t._l(e.options,(function(e,i){return a("Option",{key:i,attrs:{value:e}},[t._v(t._s(e))])})),1):t._e(),e.input_select?a("Input",{staticClass:"input-box",attrs:{val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"v.val"}}):t._e(),e.input_select?a("span",{staticStyle:{"margin-left":"5px"}},[t._v(" ")]):t._e(),e.sign?a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")]):t._e(),e.sign?t._e():a("span",{staticStyle:{"margin-left":"5px"}},[t._v(" ")])],1)])})),0)])}))],2)}),[],!1,null,"72b7b0fe",null).exports,{name:"ShowInfoModbusTabs",props:{links:{type:Array}},data:function(){return{arr:[]}},mounted:function(){},methods:{common_event:function(t,e){this[t](e)},pass:function(t){alert(t)},nopass:function(t){alert(t)},checkAllGroupChange:function(t){if(this.links[0].child.length>t.length)for(var e in this.links[0].child){var a=0;if(0==t.length)this.links[0].child=[];else{for(var i in t)if(this.links[0].child[e].title==t[i]){a++;break}0==a&&this.links[0].child.splice(e,1)}}else{var n=t.length-1;"CT运算"==t[n]?this.links[0].child.push({title:"CT运算",data:"ct",child:[{name:"初级值",input:!0,data:"primary",val:""}]}):"高压电表读数运算"==t[n]?this.links[0].child.push({title:"高压电表读数运算",data:"hem",child:[{name:"电流互感器初级值",input:!0,data:"ctPrimary",val:""},{name:"电压互感器初级值",input:!0,data:"ptPrimary",val:""}]}):"电压电表读数运算"==t[n]?this.links[0].child.push({title:"电压电表读数运算",data:"lem",child:[{name:"电流互感器初级值",input:!0,data:"ctPrimary",val:""}]}):"PT运算"==t[n]?this.links[0].child.push({title:"PT运算",data:"pt",child:[{name:"初级值",input:!0,data:"primary",val:""}]}):"量程转换"==t[n]&&this.links[0].child.push({title:"量程转换",data:"rc",child:[{name:"转换最小值",input:!0,data:"minValue",val:""},{name:"转换最大值",input:!0,data:"maxValue",val:""},{name:"量程最小值",input:!0,data:"minChange",val:""},{name:"量程最大值",input:!0,data:"maxChange",val:""},{name:"超出量程 默认值",input:!0,data:"defValue",val:""}]})}}}}),v=(a("9284"),Object(l.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.links,(function(e,i){return a("div",{key:i,staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(e.title))]),a("div",{staticStyle:{margin:"15px 10px",display:"flex"}},[0==e.child.length?a("div",[a("div",{staticStyle:{"margin-left":"31px","font-size":"12px"}},[t._v("暂无数据运算")])]):a("div",t._l(e.child,(function(i,n){return a("div",{key:n,staticStyle:{float:"left",margin:"0 0 10px 10px"}},[e.arr?a("div",[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"100px",position:"absolute",left:"5px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(i.title))]),a("div",{staticStyle:{margin:"15px 10px"}},t._l(i.child,(function(e,i){return a("div",{key:i,staticStyle:{float:"left",margin:"0 0 10px 10px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.name)+"  :  "+t._s(e.val))])])})),0)])]):a("div",[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v(t._s(i.name)+"  :  "+t._s(i.val))])])])})),0)])])})),0)}),[],!1,null,"2fbcf969",null).exports),g=(a("84df"),a("82ae")),y=a.n(g),x={name:"NodeConfig",inject:["reload"],components:{jk_tabs:s.a,jk_tabsbtn:n.a,contentTabs:r.default,modbusTabs:p,numberFormatTabs:m,detailTabs:d,showModbusTabs:v},data:function(){var t=this;return{connWebSocketSatuts:!1,tableloading:!1,statistical:{abnormal:0,normal:0,warn:0},shownumberFormatTabs:!0,keeplinks:[],footer_hide:!1,keeppagechangecolumns:[],columns1:[{title:"",type:"selection",width:60,align:"center"},{title:"名称",minWidth:150,align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.dataItem.name}},null==e.row.dataItem.name?"无":e.row.dataItem.name)])}},{title:"状态",key:"state",align:"center",width:95,sortable:!0,render:function(t,e){var a=e.row.base.enable;return e.row.base.enable,t("Tag",a?{style:{paddingLeft:"18px",border:"none !important"},props:{type:"dot",color:"success"}}:{style:{paddingLeft:"18px",border:"none !important"},props:{type:"dot",color:"error"}})}},{title:"指标编码",align:"center",width:140,render:function(t,e){return t("span",e.row.base.indexCode)}},{title:"创建时间",align:"center",width:180,render:function(e,a){return e("span",t.$util.time_stamp2time_date(a.row.base.createTime).format("yyyy-MM-dd hh:mm:ss"))}}],columns2:[],data1:[],data2:[],uuid:null,total:0,page:{form:{page:1,size:10}},updateData:[],node:{data:{base:{driveUuid:null,enable:!1,highAlarm:null,hhighAlarm:null,lowAlarm:null,llowAlarm:null,indexCode:null,name:null},numberFormat:{decimal:null,exp:null,formatEnum:null}},find:{page:1,size:10,sorts:[{filed:"name",order:!0}]},url:null},modal11:{show:!1,state:null},NodeInfo:[],ModbusInfo:[],numberFormatInfo:[],updateModbusInfo:[],delArr:[],modal12:{show:!1,url:"",file:null,append:1,loading:!0},modal13:!1,uuidList:[],loginType:null,modal14:{show:!1,url:"",file:null,append:1,loading:!0},item:{},url:null,driveType:null,links:[{name:"驱动配置",to:"/engineering/collectionService/driveConfig"},{name:"节点配置",to:"/engineering/collectionService/nodeConfig"}],children:[{title:"Modbus-TCP",driveType:"MOD_BUS_TCP"},{title:"Modbus-TCP从站推送",driveType:"MOD_BUS_TCP_SLAVE"},{title:"Modbus-RTU",driveType:"MOD_BUS_RTU"},{title:"Modbus-RTU从站推送",driveType:"MOD_BUS_RTU_SLAVE"},{title:"Modbus-ASCII",driveType:"MOD_BUS_ASCII"},{title:"Modbus-ASCII从站推送",driveType:"MOD_BUS_ASCII_SLAVE"},{title:"OPC-DA",driveType:"OPC_DA"},{title:"OPC-DA客户端",driveType:"OPC_DA_HTTP"},{title:"OPC-UA",driveType:"OPC_UA"}],NewNodeInfo:[]}},created:function(){},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!0:(this.loginType=!1,this.columns1.splice(4,1)),this.showData(),1==this.loginType&&this.columns1.push({title:"操作",slot:"action",fixed:"right",width:100,align:"center"}),this.keeppagechangecolumns=JSON.parse(JSON.stringify(this.columns1))},methods:{showData:function(){this.item=JSON.parse(this.$storage.getStorage("getItem")),"CJ"!=this.item.driveType&&"DL"!=this.item.driveType&&"HJ"!=this.item.driveType&&"MQTT_SERVER"!=this.item.driveType||this.columns1.splice(3,1),"MOD_BUS_ASCII"==this.item.driveType?this.node.url=this.$api.collect.itemModbusascii.url:"MOD_BUS_ASCII_SLAVE"==this.item.driveType?this.node.url=this.$api.collect.itemModbusasciislave.url:"MOD_BUS_RTU"==this.item.driveType?this.node.url=this.$api.collect.itemModbusrtu.url:"MOD_BUS_RTU_SLAVE"==this.item.driveType?this.node.url=this.$api.collect.itemModbusrtuslave.url:"MOD_BUS_TCP"==this.item.driveType?this.node.url=this.$api.collect.itemModbustcp.url:"MOD_BUS_TCP_SLAVE"==this.item.driveType?this.node.url=this.$api.collect.itemModbustcpslave.url:"OPC_UA"==this.item.driveType?(this.node.url=this.$api.collect.itemOpcua.url,this.columns1.push(),0==this.loginType&&this.columns1.push()):"OPC_DA_HTTP"==this.item.driveType?this.node.url=this.$api.collect.itemOpcdahttp.url:"OPC_DA"==this.item.driveType?this.node.url=this.$api.collect.itemOpcda.url:"CJ"==this.item.driveType?(this.node.url=this.$api.collect.item.url+"/cj",this.columns1.push({title:"计算仪表地址",align:"center",width:200,render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.address}},e.row.address)])}},{title:"仪表类型",align:"center",width:195,render:function(t,e){var a=null;return 10==e.row.deviceType?a="冷水水表":11==e.row.deviceType?a="生活热水水表":12==e.row.deviceType?a="直饮水水表":13==e.row.deviceType?a="中水水表":20==e.row.deviceType?a="热量表(记热)":21==e.row.deviceType?a="热量表(记冷)":30==e.row.deviceType?a="燃气表":40==e.row.deviceType&&(a="电度表"),t("span",a)}},{title:"计算精度",align:"center",width:180,render:function(t,e){return t("span",e.row.precisionIndex)}})):"DL"==this.item.driveType?(this.node.url=this.$api.collect.item.url+"/dl",this.columns1.push({title:"电表地址",align:"center",width:200,render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.address}},e.row.address)])}},{title:"数据标识",align:"center",width:195,render:function(t,e){return t("span",e.row.dataArea)}},{title:"计算精度",align:"center",width:180,render:function(t,e){return t("span",e.row.precisionIndex)}})):"HJ"==this.item.driveType?(this.node.url=this.$api.collect.item.url+"/hj",this.columns1.push({title:"数据点名",align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.name}},e.row.name)])}})):"MQTT_SERVER"==this.item.driveType&&(this.node.url=this.$api.collect.item.url+"/mqttserver",this.columns1.push({title:"节点名",align:"center",minWidth:150,render:function(t,e){return t("span",e.row.base.name)}},{title:"客户端ID",align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.clientId}},e.row.clientId)])}})),"MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"MOD_BUS_TCP"==this.item.driveType?(0==this.loginType&&this.columns1.push({title:"数据点起始位",align:"center",width:130,render:function(t,e){return t("span",e.row.dataItem.offset)}},{title:"数据位数量",align:"center",width:110,render:function(t,e){return t("span",e.row.dataItem.quantity)}},{title:"从站ID",align:"center",width:80,render:function(t,e){return t("span",e.row.dataItem.slaveid)}}),this.columns1.push()):"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType||"MOD_BUS_TCP_SLAVE"==this.item.driveType?0==this.loginType&&this.columns1.push({title:"数据点起始位",align:"center",width:130,render:function(t,e){return t("span",e.row.dataItem.offset)}},{title:"数据位数量",align:"center",width:110,render:function(t,e){return t("span",e.row.dataItem.quantity)}}):"OPC_DA"!=this.item.driveType&&"OPC_DA_HTTP"!=this.item.driveType||this.columns1.push(),this.findData()},findData:function(){var t=this;this.$https.fetchPost(this.node.url+"/"+this.item.uuid,this.node.find).then((function(e){for(var a in t.data1=e.data.data.data,t.total=e.data.data.count,t.uuidList=[],t.data1)t.uuidList.push(t.data1[a].base.uuid);t.connWebSocket()})).catch((function(t){}))},findPageChangeData:function(){var t=this;this.connWebSocketSatuts&&(this.tableloading=!0),this.$https.fetchPost(this.node.url+"/"+this.item.uuid,this.node.find).then((function(e){for(var a in t.data1=e.data.data.data,t.total=e.data.data.count,t.uuidList=[],t.data1)t.uuidList.push(t.data1[a].base.uuid);t.send()})).catch((function(t){}))},pageChange:function(t){this.node.find.page=t,this.findPageChangeData()},addNode:function(t){"CJ"==this.item.driveType||"DL"==this.item.driveType||"HJ"==this.item.driveType||"MQTT_SERVER"==this.item.driveType?(this.NodeInfo=[{title:"基本信息",data:"base",child:[{name:"节点名",input:!0,sign:!0,data:"name",val:""},{name:"状态",swith:!0,data:"enable",val:!0}]}],"add"==t?this.node.data={base:{driveUuid:null,enable:!1,name:null}}:"update"==t&&(this.NodeInfo[0].child[0].disabled=!0,this.node.data={base:{uuid:null,enable:!1}})):(this.NodeInfo=[{title:"基本信息",data:"base",child:[{name:"节点名",input:!0,sign:!0,data:"name",val:""},{name:"指标编码",input:!0,sign:!0,data:"indexCode",val:""},{name:"高报",input:!0,data:"highAlarm",val:"80"},{name:"高高报",input:!0,data:"hhighAlarm",val:"100"},{name:"低报",input:!0,data:"lowAlarm",val:"20"},{name:"低低报",input:!0,data:"llowAlarm",val:"0"},{name:"状态",swith:!0,data:"enable",val:!0}]}],"add"==t?this.node.data={base:{driveUuid:null,enable:!1,name:null,indexCode:null,highAlarm:"80",hhighAlarm:"100",lowAlarm:"20",llowAlarm:"0"}}:"update"==t?(this.NodeInfo[0].child[0].disabled=!0,this.node.data={base:{uuid:null,enable:!1,name:null,indexCode:null,highAlarm:null,hhighAlarm:null,lowAlarm:null,llowAlarm:null}}):"showinfo"==t&&(this.NodeInfo[0].child[0].disabled=!0,this.node.data={base:{uuid:null,enable:!1,name:null,indexCode:null,highAlarm:"80",hhighAlarm:"100",lowAlarm:"20",llowAlarm:"0"}},this.NodeInfo=[{title:"基本信息",data:"base",child:[{name:"节点名",input:!0,sign:!0,data:"name",val:""},{name:"指标编码",input:!0,sign:!0,data:"indexCode",val:""},{name:"高报",input:!0,data:"highAlarm",val:"80"},{name:"高高报",input:!0,data:"hhighAlarm",val:"100"},{name:"低报",input:!0,data:"lowAlarm",val:"20"},{name:"低低报",input:!0,data:"llowAlarm",val:"0"},{name:"状态",swith:!0,data:"enable",val:!0}]}])),"MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"MOD_BUS_TCP"==this.item.driveType?(this.NodeInfo.push({title:"modbus数据点信息",data:"dataItem",child:[{name:"数据点名称",input:!0,sign:!0,data:"name",val:""},{name:"从站ID",input:!0,data:"slaveid",val:"1"},{name:"功能码",input:!0,sign:!0,data:"fncode",val:""},{name:"数据点起始位",input:!0,data:"offset",val:"0"},{name:"类型",select:!0,data:"type",val:"VShort",cityList:[{name:"整型(VInt)",val:"VInt"},{name:"短整型(VShort)",val:"VShort"},{name:"长整型(VLong)",val:"VLong"},{name:"双精度浮点(VDouble)",val:"VDouble"},{name:"单精度浮点(VFloat)",val:"VFloat"},{name:"字符串(VString)",val:"VString"},{name:"布尔值(VBoolean)",val:"VBoolean"}]},{name:"字节码类型",select:!0,data:"bytesType",val:1,cityList:[{name:"Big-endian",val:1},{name:"Little-endian",val:2},{name:"Big-endian byte swap",val:3},{name:"Little-endian byte swap",val:4}]},{name:"数据位数量",input:!0,data:"quantity",val:"1"}]}),this.ModbusInfo=[{title:"数据运算",data:"numberOperation",arr:!0,child:[],checkAllGroup:[]}],this.node.data.dataItem={bytesType:null,fncode:null,name:null,offset:null,slaveid:null,type:null}):"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType||"MOD_BUS_TCP_SLAVE"==this.item.driveType?(this.NodeInfo.push({title:"modbus数据点信息",data:"dataItem",child:[{name:"数据点名称",input:!0,sign:!0,data:"name",val:""},{name:"数据点起始位",input:!0,data:"offset",val:"0"},{name:"类型",select:!0,data:"type",val:"VShort",cityList:[{name:"整型(VInt)",val:"VInt"},{name:"短整型(VShort)",val:"VShort"},{name:"长整型(VLong)",val:"VLong"},{name:"双精度浮点(VDouble)",val:"VDouble"},{name:"单精度浮点(VFloat)",val:"VFloat"},{name:"字符串(VString)",val:"VString"}]},{name:"字节码类型",select:!0,data:"bytesType",val:1,cityList:[{name:"Big-endian",val:1},{name:"Little-endian",val:2},{name:"Big-endian byte swap",val:3},{name:"Little-endian byte swap",val:4}]},{name:"数据位数量",input:!0,data:"quantity",val:"1"}]}),this.ModbusInfo=[{title:"数据运算",data:"numberOperation",arr:!0,child:[],checkAllGroup:[]}],this.node.data.dataItem=Object(i.a)({bytesType:null,fncode:null,name:null,offset:null,slaveid:1,type:null},"fncode",1)):"OPC_DA"==this.item.driveType||"OPC_DA_HTTP"==this.item.driveType?(this.NodeInfo.push({title:"数据点信息",data:"dataItem",child:[{name:"名称",input:!0,sign:!0,data:"name",val:""},{name:"类型",select:!0,val:"VShort",data:"type",cityList:[{name:"整型(VInt)",val:"VInt"},{name:"短整型(VShort)",val:"VShort"},{name:"长整型(VLong)",val:"VLong"},{name:"双精度浮点(VDouble)",val:"VDouble"},{name:"单精度浮点(VFloat)",val:"VFloat"},{name:"字符串(VString)",val:"VString"},{name:"布尔值(VBoolean)",val:"VBoolean"}]}]}),this.node.data.dataItem={name:null,type:null}):"OPC_UA"==this.item.driveType?(this.NodeInfo.push({title:"Ua数据点信息",data:"dataItem",child:[{name:"名称",input:!0,sign:!0,data:"name",val:""},{name:"类型",select:!0,val:"VShort",data:"type",cityList:[{name:"整型(VInt)",val:"VInt"},{name:"短整型(VShort)",val:"VShort"},{name:"长整型(VLong)",val:"VLong"},{name:"双精度浮点(VDouble)",val:"VDouble"},{name:"单精度浮点(VFloat)",val:"VFloat"},{name:"字符串(VString)",val:"VString"},{name:"布尔值(VBoolean)",val:"VBoolean"}]}]}),this.node.data.dataItem=Object(i.a)({name:null,nameSpaceIndex:null,type:null},"nameSpaceIndex","2")):"CJ"==this.item.driveType?(this.NodeInfo.push({title:"计算仪表地址",data:"address",child:[{name:"地址",input:!0,sign:!0,data:"address",val:""}]},{title:"仪表类型",data:"deviceType",child:[{name:"类型",select:!0,sign:!0,data:"deviceType",val:10,cityList:[{name:"冷水水表",val:10},{name:"生活热水水表",val:11},{name:"直饮水水表",val:12},{name:"中水水表",val:13},{name:"热量表(记热)",val:20},{name:"热量表(记冷)",val:21},{name:"燃气表",val:30},{name:"电度表",val:40}]}]},{title:"计算精度",data:"precisionIndex",child:[{name:"精度",input:!0,sign:!0,data:"precisionIndex",val:""}]}),this.node.data.address=null,this.node.data.deviceType=null,this.node.data.precisionIndex=null):"DL"==this.item.driveType?(this.NodeInfo.push({title:"电表地址",data:"address",child:[{name:"地址",input:!0,sign:!0,data:"address",val:""}]},{title:"数据标识",data:"dataArea",child:[{name:"标识",input:!0,sign:!0,data:"dataArea",val:""}]},{title:"计算精度",data:"precisionIndex",child:[{name:"精度",input:!0,sign:!0,data:"precisionIndex",val:""}]}),this.node.data.address=null,this.node.data.dataArea=null,this.node.data.precisionIndex=null):"HJ"==this.item.driveType?(this.NodeInfo.push({title:"数据点名",data:"name",child:[{name:"名称",input:!0,sign:!0,data:"name",val:""}]}),this.node.data.name=null):"MQTT_SERVER"==this.item.driveType&&(this.NodeInfo.push({title:"客户端id",data:"clientId",child:[{name:"id",input:!0,sign:!0,data:"clientId",val:""}]}),this.node.data.clientId=null),"CJ"!=this.item.driveType&&"DL"!=this.item.driveType&&"HJ"!=this.item.driveType&&"MQTT_SERVER"!=this.item.driveType&&(this.numberFormatInfo=[{title:"数据格式化",data:"numberFormat",child:[{name:"格式化方式",select:!0,data:"formatEnum",val:"NONE",cityList:[{name:"NONE (默认格式)",val:"NONE"},{name:"ABS (绝对值)",val:"ABS"},{name:"DECIMALS (保留小数位位数)",val:"DECIMALS"},{name:"EXP (自定义格式)",val:"EXP"}]}]}]),this.modal11.show=!this.modal11.show,this.modal11.state="add"},okAddNode:function(){var t=this;if("CJ"!=this.item.driveType&&"DL"!=this.item.driveType&&"HJ"!=this.item.driveType&&"MQTT_SERVER"!=this.item.driveType&&("EXP"==this.numberFormatInfo[0].child[0].val?this.node.data.numberFormat={exp:null,formatEnum:null}:"DECIMALS"==this.numberFormatInfo[0].child[0].val?this.node.data.numberFormat={decimal:null,formatEnum:null}:"ABS"==this.numberFormatInfo[0].child[0].val&&(this.node.data.numberFormat={formatEnum:null}),null!=this.numberFormatInfo[0].child[0].val&&"NONE"!=this.numberFormatInfo[0].child[0].val))for(var e in this.numberFormatInfo){var a=this.numberFormatInfo[e].data;for(var i in this.numberFormatInfo[e].child){var n=this.numberFormatInfo[e].child[i].data;this.node.data[a][n]=this.numberFormatInfo[e].child[i].val}}if("MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType||"MOD_BUS_TCP"==this.item.driveType||"MOD_BUS_TCP_SLAVE"==this.item.driveType)for(var s in this.node.data.numberOperation={},this.ModbusInfo[0].checkAllGroup)"CT运算"==this.ModbusInfo[0].checkAllGroup[s]?this.node.data.numberOperation.ct={primary:null,priority:s}:"高压电表读数运算"==this.ModbusInfo[0].checkAllGroup[s]?this.node.data.numberOperation.hem={ctPrimary:null,priority:s,ptPrimary:null}:"电压电表读数运算"==this.ModbusInfo[0].checkAllGroup[s]?this.node.data.numberOperation.lem={ctPrimary:null,priority:s}:"PT运算"==this.ModbusInfo[0].checkAllGroup[s]?this.node.data.numberOperation.pt={primary:null,priority:s}:"量程转换"==this.ModbusInfo[0].checkAllGroup[s]&&(this.node.data.numberOperation.rc={defValue:null,maxChange:null,maxValue:null,minChange:null,minValue:null,priority:s});for(var r in this.NodeInfo){var o=this.NodeInfo[r].data;if("CJ"!=this.item.driveType&&"DL"!=this.item.driveType&&"HJ"!=this.item.driveType&&"MQTT_SERVER"!=this.item.driveType||(this.node.data.base.name=this.NodeInfo[0].child[0].val,this.node.data.base.enable=this.NodeInfo[0].child[1].val),"CJ"==this.item.driveType)this.node.data.address=this.NodeInfo[1].child[0].val,this.node.data.deviceType=this.NodeInfo[2].child[0].val,this.node.data.precisionIndex=this.NodeInfo[3].child[0].val;else if("DL"==this.item.driveType)this.node.data.address=this.NodeInfo[1].child[0].val,this.node.data.dataArea=this.NodeInfo[2].child[0].val,this.node.data.precisionIndex=this.NodeInfo[3].child[0].val;else if("HJ"==this.item.driveType)this.node.data.name=this.NodeInfo[1].child[0].val;else if("MQTT_SERVER"==this.item.driveType)this.node.data.clientId=this.NodeInfo[1].child[0].val;else for(var l in this.NodeInfo[r].child){var d=this.NodeInfo[r].child[l].data;this.node.data[o][d]=this.NodeInfo[r].child[l].val}}if(0!=this.ModbusInfo.length)for(var c in this.ModbusInfo){var p=this.ModbusInfo[c].data;for(var u in this.ModbusInfo[c].child){var m=this.ModbusInfo[c].child[u].data;for(var h in this.ModbusInfo[c].child[u].child){var f=this.ModbusInfo[c].child[u].child[h].data;this.node.data[p][m][f]=this.ModbusInfo[c].child[u].child[h].val}}}var v=this.checkNode(),g=null;if("MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType||"MOD_BUS_TCP"==this.item.driveType||"MOD_BUS_TCP_SLAVE"==this.item.driveType?((g=this.checkMdbNode())||null==this.node.data.numberOperation.lem||(g=this.checkMdbLemNode()),g||null==this.node.data.numberOperation.ct||(g=this.checkMdbCtNode()),g||null==this.node.data.numberOperation.hem||(g=this.checkMdbHemNode()),g||null==this.node.data.numberOperation.pt||(g=this.checkMdbPtNode()),g||null==this.node.data.numberOperation.rc||(g=this.checkMdbRcNode())):"OPC_DA"==this.item.driveType||"OPC_DA_HTTP"==this.item.driveType?g=this.checkDaOrDaHttpNode():"OPC_UA"==this.item.driveType?g=this.checkUaNode():"CJ"==this.item.driveType?g=this.checkCJNode():"DL"==this.item.driveType?g=this.checkDLNode():"HJ"==this.item.driveType?g=this.checkHJNode():"MQTT_SERVER"==this.item.driveType&&(g=this.checkMQTTNode()),0==v&&0==g){this.modal11.show=!1;var y=null;"add"==this.modal11.state?(y="fetchPost",this.node.data.base.driveUuid=this.item.uuid):(y="fetchPut",this.node.data.base.uuid=this.updateData.base.uuid),this.$https[y](this.node.url,this.node.data).then((function(e){200==e.data.code?(t.$Notice.success({title:"节点配置成功",desc:"正在刷新界面",duration:2.5}),t.reload()):t.$Notice.error({title:"节点配置失败",desc:e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5})}))}},showNode:function(t){this.updateNode(t,"showinfo"),this.modal14.show=!0,this.modal11.show=!1,1==this.NodeInfo[0].child[this.NodeInfo[0].child.length-1].val?this.NodeInfo[0].child[this.NodeInfo[0].child.length-1].val="开启":0==this.NodeInfo[0].child[this.NodeInfo[0].child.length-1].val&&(this.NodeInfo[0].child[this.NodeInfo[0].child.length-1].val="关闭"),null==this.numberFormatInfo[0].child[0].val&&(this.numberFormatInfo[0].child[0].select=!1,this.numberFormatInfo[0].child[0].val="暂无配置")},updateNode:function(t,e){for(var a in this.addNode(e),this.modal11.state="update",Object.assign(this.keeplinks,this.links[0]),this.data1)this.data1[a].base.uuid==t&&(this.updateData=this.data1[a]);for(var i in"MOD_BUS_ASCII"!=this.item.driveType&&"MOD_BUS_ASCII_SLAVE"!=this.item.driveType&&"MOD_BUS_RTU"!=this.item.driveType&&"MOD_BUS_RTU_SLAVE"!=this.item.driveType&&"MOD_BUS_TCP"!=this.item.driveType&&"MOD_BUS_TCP_SLAVE"!=this.item.driveType||(null!=this.updateData.numberOperation&&null!=this.updateData.numberOperation.ct&&(this.ModbusInfo[0].checkAllGroup.push("CT运算"),this.ModbusInfo[0].child.push({title:"CT运算",data:"ct",child:[{name:"CT运算/初级值",input:!0,data:"primary"}]})),null!=this.updateData.numberOperation&&null!=this.updateData.numberOperation.hem&&(this.ModbusInfo[0].checkAllGroup.push("高压电表读数运算"),this.ModbusInfo[0].child.push({title:"高压电表读数运算",data:"hem",child:[{name:"电流互感器初级值",input:!0,data:"ctPrimary"},{name:"电压互感器初级值",input:!0,data:"ptPrimary"}]})),null!=this.updateData.numberOperation&&null!=this.updateData.numberOperation.lem&&(this.ModbusInfo[0].checkAllGroup.push("电压电表读数运算"),this.ModbusInfo[0].child.push({title:"电压电表读数运算",data:"lem",child:[{name:"电流互感器初级值",input:!0,data:"ctPrimary"}]})),null!=this.updateData.numberOperation&&null!=this.updateData.numberOperation.pt&&(this.ModbusInfo[0].checkAllGroup.push("PT运算"),this.ModbusInfo[0].child.push({title:"PT运算",data:"pt",child:[{name:"初级值",input:!0,data:"primary"}]})),null!=this.updateData.numberOperation&&null!=this.updateData.numberOperation.rc&&(this.ModbusInfo[0].checkAllGroup.push("量程转换"),this.ModbusInfo[0].child.push({title:"量程转换",data:"rc",child:[{name:"转换最小值",input:!0,data:"minValue",val:""},{name:"转换最大值",input:!0,data:"maxValue",val:""},{name:"量程最小值",input:!0,data:"minChange",val:""},{name:"量程最大值",input:!0,data:"maxChange",val:""},{name:"超出量程 默认值",input:!0,data:"defValue",val:""}]}))),null!=this.updateData.numberFormat&&"EXP"==this.updateData.numberFormat.formatEnum?this.numberFormatInfo[0].child.push({name:"格式化表达式",input:!0,data:"exp"}):null!=this.updateData.numberFormat&&"DECIMALS"==this.updateData.numberFormat.formatEnum&&this.numberFormatInfo[0].child.push({name:"小数位",input:!0,data:"decimal"}),this.NodeInfo){var n=this.NodeInfo[i].data;if(n.indexOf("ataItem")>-1&&(n="dataItem"),"CJ"!=this.item.driveType&&"DL"!=this.item.driveType&&"HJ"!=this.item.driveType&&"MQTT_SERVER"!=this.item.driveType||(this.$set(this.NodeInfo[0].child[0],"val",this.updateData.base.name),this.$set(this.NodeInfo[0].child[1],"val",this.updateData.base.enable)),"CJ"==this.item.driveType)this.$set(this.NodeInfo[1].child[0],"val",this.updateData.address),this.$set(this.NodeInfo[2].child[0],"val",this.updateData.deviceType),this.$set(this.NodeInfo[3].child[0],"val",this.updateData.precisionIndex);else if("DL"==this.item.driveType)this.$set(this.NodeInfo[1].child[0],"val",this.updateData.address),this.$set(this.NodeInfo[2].child[0],"val",this.updateData.dataArea),this.$set(this.NodeInfo[3].child[0],"val",this.updateData.precisionIndex);else if("HJ"==this.item.driveType)this.$set(this.NodeInfo[1].child[0],"val",this.updateData.name);else if("MQTT_SERVER"==this.item.driveType)this.$set(this.NodeInfo[1].child[0],"val",this.updateData.clientId);else for(var s in this.NodeInfo[i].child){var r=this.NodeInfo[i].child[s].data;this.$set(this.NodeInfo[i].child[s],"val",this.updateData[n][r])}}if(null!=this.updateData.numberFormat)for(var o in this.numberFormatInfo){var l=this.numberFormatInfo[o].data;for(var d in this.numberFormatInfo[o].child){var c=this.numberFormatInfo[o].child[d].data;this.$set(this.numberFormatInfo[o].child[d],"val",this.updateData[l][c])}}if(0!=this.ModbusInfo.length)for(var p in this.ModbusInfo){var u=this.ModbusInfo[p].data;for(var m in this.ModbusInfo[p].child){var h=this.ModbusInfo[p].child[m].data;for(var f in this.ModbusInfo[p].child[m].child){var v=this.ModbusInfo[p].child[m].child[f].data;this.$set(this.ModbusInfo[p].child[m].child[f],"val",this.updateData[u][h][v])}}}},delNode:function(t){var e=this;this.$https.fetchDelete(this.$api.collect.item.url+"/"+t).then((function(t){200==t.data.code?(e.$Notice.success({title:"节点删除成功",desc:"正在刷新界面",duration:2.5}),e.reload()):e.$Notice.error({title:"节点删除失败",desc:t.data.describe,duration:2.5})})).catch((function(t){e.$Notice.error({title:"请求失败",duration:2.5})}))},downloadNode:function(){var t=this;this.$https.getAxios().get(this.node.url+"/actions/dnexcel",{responseType:"blob"}).then((function(e){var a=e.headers,i=(a["content-disposition"].indexOf("="),t.item.driveType);"MOD_BUS_TCP_SLAVE"==t.item.driveType&&(i="MODBUS_TCP从站推送"),"MOD_BUS_RTU_SLAVE"==t.item.driveType&&(i="MODBUS_RTU从站推送"),"MOD_BUS_ASCII_SLAVE"==t.item.driveType&&(i="MODBUS_ASCII从站推送"),"MOD_BUS_TCP"==t.item.driveType&&(i="MODBUS_TCP"),"MOD_BUS_RTU"==t.item.driveType&&(i="MODBUS_RTU"),"MOD_BUS_ASCII"==t.item.driveType&&(i="MODBUS_ASCII"),"OPC_DA_HTTP"==t.item.driveType&&(i="OPC_DA桥接客户端"),"OPC_UA"==t.item.driveType&&(i="OPC_UA"),i+=".xlsx";var n=a["content-type"],s=new Blob([e.data],{type:n}),r=new FileReader;r.readAsDataURL(s),r.onload=function(t){var e=document.createElement("a");e.download=i,e.style.display="none",e.href=t.target.result,document.body.appendChild(e),e.click(),document.body.removeChild(e)}})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5})}))},uploadNode:function(){this.modal12.show=!this.modal12.show},handleUpload:function(t){this.modal12.file=t;var e=t.name.match(/.xlsx$/);return null!=e&&""!=e?this.modal12.file=t:(this.$Notice.error({title:"上传失败",desc:"文件格式不正确...",duration:3}),this.modal12.file=null),!1},upload:function(){var t=this;if(null==this.modal12.file)this.$Notice.error({title:"未选择文件",desc:"请重新选择文件...",duration:3}),this.modal12.loading=!1;else{var e=new FormData;e.append("excelFile",this.modal12.file);var a;a=1!=this.modal12.append,e.append("append",a),this.$https.fetchPost(this.node.url+"/actions/upexcel/"+this.item.uuid,e).then((function(e){200==e.data.code?(t.$Notice.success({title:"上传节点成功",desc:"正在刷新界面",duration:2.5}),t.reload()):t.$Notice.error({title:"上传节点失败",desc:e.data.describe,duration:2.5}),t.modal12.loading=!1})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5}),t.modal12.loading=!1}))}},connWebSocket:function(){var t=this,e=null;if("/"==y.a.defaults.baseURL)e="wss://"+window.location.host+"/collect/runner";else{var a=y.a.defaults.baseURL,i=a.lastIndexOf("/");e="wss://"+(a=a.substring(i+1,a.length))+"/collect/runner"}var n=new WebSocket(e);this.webSocket=n,n.onmessage=this.$options.methods.onmessage.bind(this),n.onopen=function(e){t.send()},n.onerror=function(t){},n.onclose=function(t){}},closeWebSocket:function(){null!=this.webSocket&&this.webSocket.close()},onmessage:function(t){var e=JSON.parse(t.data);if(1==this.loginType)for(var a in this.statistical=e.statistical,e=e.itemList,this.columns1=this.columns2,this.data1){for(var i in e)e[i].id==this.data1[a].base.uuid&&this.$set(this.data1[a],"webSocket",e[i]);if(0!=this.delArr.length){var n=0;for(var s in this.delArr)this.delArr[s]==this.data1[a].base.uuid&&n++;n>0?this.$set(this.data1[a],"_checked",!0):this.$set(this.data1[a],"_checked",!1)}else this.$set(this.data1[a],"_checked",!1)}else if(0==this.loginType)for(var r in this.columns1=this.columns2,this.data1){for(var o in e)0!=this.data1[r].base.enable&&e[o].id==this.data1[r].base.uuid&&this.$set(this.data1[r],"webSocket",e[o]);if(0!=this.delArr.length){var l=0;for(var d in this.delArr)this.delArr[d]==this.data1[r].base.uuid&&l++;l>0?this.$set(this.data1[r],"_checked",!0):this.$set(this.data1[r],"_checked",!1)}else this.$set(this.data1[r],"_checked",!1)}this.tableloading=!1,this.connWebSocketSatuts=!0},send:function(){var t=this,e={instruct:"MONITOR_COLLECT_ITEM",param:this.uuidList};if(this.webSocket.send(JSON.stringify(e)),8!=this.columns2.length&&7!=this.columns2.length)for(var a in Object.assign(this.columns2,this.columns1),this.columns2.push({title:"质量",align:"center",width:115,sortable:!0,render:function(t,e){var a,i=null,n=null;return 192==(a=null!=e.row.webSocket?e.row.webSocket.dataQuality:"")?(i="良好",n="green"):64==a?(i="警告",n="#ff9900"):(i="异常",n="red"),t("span",[t("Tooltip",{style:{color:n},props:{placement:"right",content:a,maxWidth:"600"}},i)])}},{title:"类型",align:"center",width:100,sortable:!0,render:function(t,e){return t("span",null!=e.row.webSocket?e.row.webSocket.dataType:"")}},{title:"运算值",align:"center",width:135,sortable:!0,render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},null!=e.row.webSocket?e.row.webSocket.dataHandle:"")])}},{title:"采集时间",align:"center",width:180,sortable:!0,render:function(e,a){return e("span",null!=a.row.webSocket?t.$util.time_stamp2time_date(a.row.webSocket.dataTimestamp).format("MM-dd hh:mm:ss.SSS"):"")}}),this.columns2)"指标编码"==this.columns2[a].title&&this.columns2.splice(a,1),"创建时间"==this.columns2[a].title&&this.columns2.splice(a,1)},scrollBottom:function(){this.$nextTick((function(){var t=document.getElementById("asd");t.scrollTop=t.scrollHeight}))},changeChose:function(t){for(var e in this.delArr=[],t)this.delArr.push(t[e].base.uuid)},batchDel:function(){var t=this;if(0==this.delArr.length)this.$Notice.error({title:"未勾选选项",desc:"请重新勾选...",duration:3});else{var e={driveUuid:this.item.uuid,itemUuids:this.delArr};this.$https.fetchDelete(this.$api.collect.item.url+"/actions/batchdel",{data:e}).then((function(e){200==e.data.code?(t.$Notice.success({title:"批量删除节点成功",desc:"正在刷新界面",duration:2.5}),t.reload()):t.$Notice.error({title:"批量删除节点失败",desc:e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5})}))}},cleartable:function(){for(var t=0,e=0,a=0,i=0,n=this.node.find.size-1;n>=1;n--)"质量"==this.columns1[n].title&&2==++t&&this.columns1.splice(n,1),"类型"==this.columns1[n].title&&2==++e&&this.columns1.splice(n,1),"运算值"==this.columns1[n].title&&2==++a&&this.columns1.splice(n,1),"采集时间"==this.columns1[n].title&&2==++i&&this.columns1.splice(n,1)},checkNode:function(){var t=!1;return"CJ"==this.item.driveType||"DL"==this.item.driveType||"HJ"==this.item.driveType||"MQTT_SERVER"==this.item.driveType||(""===this.node.data.base.name||""===this.node.data.base.indexCode||""===this.node.data.base.highAlarm||""===this.node.data.base.hhighAlarm||""===this.node.data.base.lowAlarm||""===this.node.data.base.llowAlarm?(this.$Message.error({content:"请填写节点名称、指标编码、高报、高高报、低报和低低报...",duration:3}),t=!0):/^\d+(\.\d{1,5})?$/.test(this.node.data.base.highAlarm)&&/^\d+(\.\d{1,5})?$/.test(this.node.data.base.hhighAlarm)&&/^\d+(\.\d{1,5})?$/.test(this.node.data.base.lowAlarm)&&/^\d+(\.\d{1,5})?$/.test(this.node.data.base.llowAlarm)||(this.$Message.error({content:"高、低报和高高、低低报只允许填写数字,保留5位小数位...",duration:3}),t=!0)),t},checkUaNode:function(){var t=!1;return""===this.node.data.dataItem.name||""===this.node.data.dataItem.nameSpaceIndex?(this.$Message.error({content:"请填写数据点名称、命名下标空间...",duration:3}),t=!0):/^[1-9]{0,10}$/.test(this.node.data.dataItem.nameSpaceIndex)||(this.$Message.error({content:"命名下标空间只允许填写10位以内数字,不能为0...",duration:3}),t=!0),t},checkDaOrDaHttpNode:function(){var t=!1;return""===this.node.data.dataItem.name&&(this.$Message.error({content:"请填写数据点名称...",duration:3}),t=!0),t},checkMdbNode:function(){var t=!1;return""===this.node.data.dataItem.fncode||""===this.node.data.dataItem.name||""===this.node.data.dataItem.offset||""===this.node.data.dataItem.quantity||""===this.node.data.dataItem.slaveid?(this.$Message.error({content:"请填写功能码、名称、起始位置、数量、从站ID...",duration:3}),t=!0):/^[1-9]{0,10}$/.test(this.node.data.dataItem.slaveid)&&/^[1-9]{0,10}$/.test(this.node.data.dataItem.fncode)?/^\d{0,10}$/.test(this.node.data.dataItem.offset)&&/^\d{0,10}$/.test(this.node.data.dataItem.quantity)||(this.$Message.error({content:"起始位、数量请填写0-10以内数字...",duration:3}),t=!0):(this.$Message.error({content:"从站ID、功能码填写10位以内数字,不能为0...",duration:3}),t=!0),t},checkMdbCtNode:function(){var t=!1;return""===this.node.data.numberOperation.ct.primary?(this.$Message.error({content:"请填写CT运算初级值...",duration:3}),t=!0):/^\d{0,10}$/.test(this.node.data.numberOperation.ct.primary)||(this.$Message.error({content:"CT运算初级值填写10位以内数字...",duration:3}),t=!0),t},checkMdbHemNode:function(){var t=!1;return""===this.node.data.numberOperation.hem.ctPrimary||""===this.node.data.numberOperation.hem.ptPrimary?(this.$Message.error({content:"请填写电流互感器初级值、电压互感器初级值...",duration:3}),t=!0):/^\d{0,10}$/.test(this.node.data.numberOperation.hem.ctPrimary)&&/^\d{0,10}$/.test(this.node.data.numberOperation.hem.ptPrimary)||(this.$Message.error({content:"电流互感器初级值、电压互感器初级值填写10位以内数字...",duration:3}),t=!0),t},checkMdbLemNode:function(){var t=!1;return""===this.node.data.numberOperation.lem.ctPrimary?(this.$Message.error({content:"请填写电流互感器初级值...",duration:3}),t=!0):/^\d{0,10}$/.test(this.node.data.numberOperation.lem.ctPrimary)||(this.$Message.error({content:"电流互感器初级值填写10位以内数字...",duration:3}),t=!0),t},checkMdbPtNode:function(){var t=!1;return""===this.node.data.numberOperation.pt.primary?(this.$Message.error({content:"请填写PT运算初级值...",duration:3}),t=!0):/^\d{0,10}$/.test(this.node.data.numberOperation.pt.primary)||(this.$Message.error({content:"PT运算初级值填写10位以内数字...",duration:3}),t=!0),t},checkMdbRcNode:function(){var t=!1;return""===this.node.data.numberOperation.rc.defValue||""===this.node.data.numberOperation.rc.maxChange||""===this.node.data.numberOperation.rc.maxValue||""===this.node.data.numberOperation.rc.minChange||""===this.node.data.numberOperation.rc.minValue?(this.$Message.error({content:"请填写超出量程、转换最大值、量程最大值、转换最小值、量程最小值...",duration:3}),t=!0):/^[\d-]{0,10}$/.test(this.node.data.numberOperation.rc.defValue)&&/^[\d-]{0,10}$/.test(this.node.data.numberOperation.rc.maxChange)&&/^[\d-]{0,10}$/.test(this.node.data.numberOperation.rc.maxValue)&&/^[\d-]{0,10}$/.test(this.node.data.numberOperation.rc.minChange)&&/^[\d-]{0,10}$/.test(this.node.data.numberOperation.rc.minValue)||(this.$Message.error({content:"超出量程、转换最大值、量程最大值、转换最小值、量程最小值填写10位以内数字...",duration:3}),t=!0),t},checkCJNode:function(){var t=!1;return""!==this.node.data.address&&""!==this.node.data.precisionIndex||(this.$Message.error({content:"请填写计算仪表地址、计算精度...",duration:3}),t=!0),t},checkDLNode:function(){var t=!1;return""!==this.node.data.address&&""!==this.node.data.dataArea&&""!==this.node.data.precisionIndex||(this.$Message.error({content:"请填写电表地址、数据标识、计算精度...",duration:3}),t=!0),t},checkHJNode:function(){var t=!1;return""===this.node.data.name&&(this.$Message.error({content:"请填写数据点名...",duration:3}),t=!0),t},checkMQTTNode:function(){var t=!1;return""===this.node.data.clientId&&(this.$Message.error({content:"请填写客户端ID...",duration:3}),t=!0),t}},beforeDestroy:function(){this.closeWebSocket()}},b=(a("0444"),a("1c77"),Object(l.a)(x,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid",staticStyle:{"min-width":"0",flex:"1"}},[i("div",{staticClass:"row box margin-x clear-margin padding-x"},[i("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[i("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[t.loginType?t._e():i("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),t.loginType?i("jk_tabsbtn",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}):t._e(),t.loginType?i("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){return t.addNode("add")}}},[t._v("新建节点")]):t._e(),t.loginType?i("Button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{icon:"ios-cloud-download-outline"},on:{click:t.downloadNode}},[t._v("下载模板")]):t._e(),t.loginType?i("Button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{icon:"ios-cloud-upload-outline"},on:{click:t.uploadNode}},[t._v("导入模板")]):t._e()],1)]),i("div",{staticClass:"modal-body",staticStyle:{height:"715px",overflow:"auto"}},[i("div",{staticStyle:{float:"left","margin-bottom":"10px"}},[t.loginType?i("Tag",{staticStyle:{"margin-left":"5px"},attrs:{color:"success",type:"dot"}},[t._v("成功数："+t._s(t.statistical.normal))]):t._e(),t.loginType?i("Tag",{staticStyle:{"margin-left":"5px"},attrs:{color:"warning",type:"dot"}},[t._v("警告数："+t._s(t.statistical.warn))]):t._e(),t.loginType?i("Tag",{staticStyle:{"margin-left":"5px"},attrs:{color:"error",type:"dot"}},[t._v("失败数："+t._s(t.statistical.abnormal))]):t._e()],1),i("div",{staticStyle:{width:"100%",float:"left"}},[i("Table",{ref:"selection",attrs:{loading:t.tableloading,border:"",columns:t.columns1,data:t.data1},on:{"on-selection-change":t.changeChose},scopedSlots:t._u([{key:"action",fn:function(e){var n=e.row;return[i("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[t.loginType?i("div",{staticStyle:{margin:"0 2px",cursor:"pointer"},on:{click:function(e){return t.showNode(n.base.uuid)}}},[i("img",{attrs:{src:a("e52e"),width:"21px",height:"20px",alt:""}})]):t._e(),t.loginType?i("div",{staticStyle:{margin:"0 2px",cursor:"pointer"},on:{click:function(e){return t.delNode(n.base.uuid)}}},[i("img",{attrs:{src:a("cd32"),width:"21px",height:"18.5px",alt:""}})]):t._e(),t.loginType?i("div",{staticStyle:{margin:"0 2px",cursor:"pointer","margin-left":"4px"},on:{click:function(e){return t.updateNode(n.base.uuid,"update")}}},[i("img",{attrs:{src:a("6bb7"),width:"21px",height:"18.5px",alt:""}})]):t._e()])]}}])}),t.loginType?i("Button",{staticStyle:{"margin-top":"5px"},attrs:{size:"small"},on:{click:t.batchDel}},[t._v("批量删除")]):t._e(),i("div",{staticClass:"foot"},[i("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.node.find.page)+"页")]),i("Page",{staticClass:"btn",attrs:{current:t.node.find.page,total:t.total,"page-size":t.node.find.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])]),i("Modal",{attrs:{title:"节点信息",scrollable:!0,"class-name":"vertical-center-modal",width:"900",styles:{top:"20px"}},on:{"on-ok":t.okAddNode},model:{value:t.modal11.show,callback:function(e){t.$set(t.modal11,"show",e)},expression:"modal11.show"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.modal11.state,expression:"modal11.state"}],attrs:{hidden:""},domProps:{value:t.modal11.state},on:{input:function(e){e.target.composing||t.$set(t.modal11,"state",e.target.value)}}}),i("contentTabs",{attrs:{links:t.NodeInfo}}),"MOD_BUS_ASCII"==t.item.driveType||"MOD_BUS_ASCII_SLAVE"==t.item.driveType||"MOD_BUS_RTU"==t.item.driveType||"MOD_BUS_RTU_SLAVE"==t.item.driveType||"MOD_BUS_TCP"==t.item.driveType||"MOD_BUS_TCP_SLAVE"==t.item.driveType?i("modbusTabs",{attrs:{links:t.ModbusInfo}}):t._e(),i("numberFormatTabs",{attrs:{links:t.numberFormatInfo}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.modal11.show=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary",size:"large"},on:{click:t.okAddNode}},[t._v("确定")])],1)],1),i("Modal",{attrs:{title:"上传节点",scrollable:!0,loading:t.modal12.loading,"ok-text":"上传","class-name":"vertical-center-modal",width:"400",styles:{top:"20px"}},on:{"on-ok":t.upload},model:{value:t.modal12.show,callback:function(e){t.$set(t.modal12,"show",e)},expression:"modal12.show"}},[i("Upload",{attrs:{"before-upload":t.handleUpload,action:t.modal12.url}},[i("Button",{staticStyle:{float:"left"},attrs:{icon:"ios-cloud-upload-outline"}},[t._v("点击选择文件")]),null!==t.modal12.file?i("div",{staticStyle:{float:"left",margin:"6px 0 0 20px"}},[t._v("上传文件  :  "+t._s(t.modal12.file.name)+"\n                ")]):t._e()],1),i("div",[i("span",{staticStyle:{"margin-right":"10px"}},[t._v("选择操作:")]),i("Select",{staticStyle:{width:"100px"},model:{value:t.modal12.append,callback:function(e){t.$set(t.modal12,"append",e)},expression:"modal12.append"}},[i("Option",{attrs:{value:1}},[t._v("覆盖")]),i("Option",{attrs:{value:0}},[t._v("追加")])],1)],1)],1),i("Modal",{attrs:{title:"节点详情",loading:t.modal14.loading,"class-name":"vertical-center-modal",width:"1000",styles:{top:"20px"}},model:{value:t.modal14.show,callback:function(e){t.$set(t.modal14,"show",e)},expression:"modal14.show"}},[i("div",{on:{click:function(e){t.modal14.show=!1}}},[i("detailTabs",{attrs:{links:t.NodeInfo}}),"MOD_BUS_ASCII"==t.item.driveType||"MOD_BUS_ASCII_SLAVE"==t.item.driveType||"MOD_BUS_RTU"==t.item.driveType||"MOD_BUS_RTU_SLAVE"==t.item.driveType||"MOD_BUS_TCP"==t.item.driveType||"MOD_BUS_TCP_SLAVE"==t.item.driveType?i("showModbusTabs",{attrs:{links:t.ModbusInfo}}):t._e(),i("numberFormatTabs",{attrs:{links:t.numberFormatInfo}})],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{staticStyle:{"background-color":"#faf8f7","border-color":"white"},attrs:{type:"error",size:"small"}},[t._v(" ")])],1)])],1)}),[],!1,null,"9171fc80",null));e.default=b.exports},"2efe":function(t,e,a){},"2f22":function(t,e,a){},3009:function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"LogCollectComm",components:{jk_tabs:i.a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"设备运行信息",align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.devJson}},e.row.devJson)])}},{title:"运行时间",sortable:!0,align:"center",width:200,render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.timestamp).format("yyyy-MM-dd hh:mm:ss"))}}],timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"timestamp",order:!0}]}},links:[{name:"上报系统运行日志",to:"/logs/logUploadSys"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.upload.sys.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")},query:function(){if(this.page.form.filters=[],""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"timestamp",params:[t,e],type:"between"})}this.showData()}}},r=(a("bb44"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"0e1ac6a6",null);e.default=o.exports},"336c":function(t,e,a){},3393:function(t,e,a){"use strict";a.r(e);var i={name:"SysUploadCount",components:{jk_tabs:a("25b1").a},data:function(){return{tableloading:!0,columns1:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"通道类型",key:"channelType",align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.channelType}},e.row.channelType)])}},{title:"通道总数",key:"channelCount",align:"center",sortable:!0},{title:"驱动总数",key:"driveCount",align:"center",sortable:!0},{title:"节点总数",key:"itemCount",align:"center",sortable:!0},{title:"今日上报数",key:"todayCount",align:"center",sortable:!0,render:function(t,e){return t("div",[t("Tag",{props:{color:"primary"}},[e.row.todayCount,t("div",{style:{minWidth:"35px"}},e.row.todayCount)])])}},{title:"本周上报数",key:"weekCount",align:"center",sortable:!0,render:function(t,e){return t("div",[t("Tag",{props:{color:"primary"}},[e.row.weekCount,t("div",{style:{minWidth:"35px"}},e.row.weekCount)])])}},{title:"本月上报数",key:"monthCount",align:"center",sortable:!0,render:function(t,e){return t("div",[t("Tag",{props:{color:"primary"}},[e.row.weekCount,t("div",{style:{minWidth:"35px"}},e.row.weekCount)])])}},{title:"今日上报失败数",key:"todayFailCount",align:"center",sortable:!0,render:function(t,e){return t("div",[t("Tag",{props:{color:"error"}},[e.row.todayFailCount,t("div",{style:{minWidth:"35px"}},e.row.todayFailCount)])])}}],data1:[],links:[{name:"采集统计",to:"/sys/count/collect"},{name:"上报统计",to:"/sys/count/upload"}],timer:""}},mounted:function(){this.showData(),this.timer=setInterval(this.showData,5e3)},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.upload.count.url).then((function(e){t.tableloading=!1,t.data1=e.data.data}))}},beforeDestroy:function(){clearInterval(this.timer)}},n=(a("5e14"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"800px",overflow:"auto"}},[a("Table",{attrs:{loading:t.tableloading,size:"small",border:"",columns:t.columns1,data:t.data1},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updateInterface(i)}}},[t._v("修改")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.deleteInterface(i)}}},[t._v("删除")])]}}])},[a("div",{attrs:{slot:"loading"},slot:"loading"},[a("div",{staticStyle:{height:"10px",width:"200px"}},[a("Row",[a("Col",{staticClass:"demo-spin-col",attrs:{span:"8"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[t._v("Loading")])],1)],1)],1)],1)])])],1)])])}),[],!1,null,"28cb925a",null);e.default=s.exports},"33f0":function(t,e,a){"use strict";a("4995")},3556:function(t,e,a){"use strict";a.r(e),a("a450");var i=a("25b1"),n=a("84df"),s={name:"LogCollectComm",components:{jk_tabs:i.a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"驱动类型",width:150,key:"driveType",align:"center"},{title:"节点ID",width:100,align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.itemId}},e.row.itemId)])}},{title:"节点名称",width:100,align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.name}},e.row.name)])}},{title:"业务数据",width:100,align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.processedData}},e.row.processedData)])}},{title:"数据质量",width:100,align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.quality}},e.row.quality)])}},{title:"报文",align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.rawData}},e.row.rawData)])}},{title:"数据类型",width:100,key:"type",align:"center"},{title:"未处理业务数据",width:130,key:"unprocessedData",align:"center"},{title:"采集时间",sortable:!0,align:"center",render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.timestamp).format("yyyy-MM-dd hh:mm:ss"))}}],timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"timestamp",order:!0}]}},links:[{name:"采集通讯日志",to:"/logs/logCollectComm"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.collect.comm.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")},query:function(){if(this.page.form.filters=[],""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"timestamp",params:[t,e],type:"between"})}this.showData()}}},r=(a("edd8"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"03953dea",null);e.default=o.exports},"357d":function(t,e,a){"use strict";a.r(e);var i={name:"NodeConfig",inject:["reload"],components:{jk_tabs:a("25b1").a},data:function(){var t=this;return{columns1:[{title:"节点名",key:"name",align:"center"},{title:"数据类型",key:"type",align:"center"},{title:"通讯质量",align:"center",render:function(t,e){return t("span","192"==e.row.quality?"正常":"64"==e.row.quality?"警告":"异常")}},{title:"采集数据",key:"processedData",align:"center"},{title:"创建时间",align:"center",render:function(e,a){return e("span",t.$util.time_stamp2time_date(a.row.timestamp).format("yyyy-MM-dd hh:mm:ss"))}}],data1:[],total:0,signList:null,page:{form:{driveUuid:null,nodePage:1,nodeSize:10,sign:null}},item:{},url:null,busDataUrl:null,timer:"",links:[{name:"驱动配置",to:"/engineering/reportingService/driveConfig"},{name:"节点配置",to:"/engineering/reportingService/nodeConfig"},{name:"业务数据",to:"/engineering/reportingService/busData"}]}},created:function(){},mounted:function(){this.showData(),this.timer=setInterval(this.findItemBusDataByPage,5e3)},methods:{showData:function(){var t=this;this.item=JSON.parse(this.$storage.getStorage("getItem")),"OPC_UA_SERVER"==this.item.driveType?(this.url=this.$api.upload.item.uaServer.url+"/findItemBusDataByPage",this.busDataUrl=this.$api.upload.item.uaServer.url+"/findOpcUaServerNode?driveUuid="+this.item.uuid):"OPC_UA_UPLOAD"==this.item.driveType?this.url=this.$api.upload.item.uaUpload.url+"/findItemBusDataByPage":"OPC_DA_UPLOAD"==this.item.driveType?this.url=this.$api.upload.item.daUpload.url+"/findItemBusDataByPage":"SOCKET_CLIENT"==this.item.driveType?this.url=this.$api.upload.item.socket.url+"/findItemBusDataByPage":"MQTT_CLIENT"==this.item.driveType?(this.url=this.$api.upload.item.mqtt.url+"/findItemBusDataByPage",this.busDataUrl=this.$api.upload.item.mqtt.url+"/findMqttTopic?driveUuid="+this.item.uuid):"SQL"==this.item.driveType&&(this.url=this.$api.upload.item.sql.url+"/findItemBusDataByPage"),this.page.form.driveUuid=this.item.uuid,"OPC_UA_SERVER"==this.item.driveType||"MQTT_CLIENT"==this.item.driveType?this.$https.fetchPost(this.busDataUrl).then((function(e){t.page.form.sign=e.data.data[0],t.signList=e.data.data,t.findItemBusDataByPage()})).catch((function(t){})):this.findItemBusDataByPage()},findItemBusDataByPage:function(){var t=this;this.$https.fetchPost(this.url,this.page.form).then((function(e){t.total=e.data.data.count,null==e.data.data.items?t.data1=[]:t.data1=e.data.data.items})).catch((function(t){}))},switchSign:function(t){this.page.form.sign=t,this.findItemBusDataByPage()},pageChange:function(t){this.page.form.nodePage=t,this.findItemBusDataByPage()}},beforeDestroy:function(){clearInterval(this.timer)}},n=(a("07e0"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",staticStyle:{float:"left",width:"100%",overflow:"auto"}},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"715px"}},["OPC_UA_SERVER"==t.item.driveType||"MQTT_CLIENT"==t.item.driveType?a("div",{staticStyle:{float:"right","margin-bottom":"10px"}},["OPC_UA_SERVER"==t.item.driveType?a("span",{staticStyle:{"font-size":"12px","margin-right":"10px"}},[t._v("选择节点标识:")]):t._e(),"MQTT_CLIENT"==t.item.driveType?a("span",{staticStyle:{"font-size":"12px","margin-right":"10px"}},[t._v("选择主题标识:")]):t._e(),a("Select",{staticStyle:{width:"70px"},attrs:{size:"small"},on:{"on-change":t.switchSign},model:{value:t.page.form.sign,callback:function(e){t.$set(t.page.form,"sign",e)},expression:"page.form.sign"}},t._l(t.signList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1):t._e(),a("div",{staticStyle:{width:"100%",float:"left"}},[a("Table",{attrs:{size:"small",border:"",columns:t.columns1,data:t.data1}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.nodePage)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.nodePage,total:t.total,"page-size":t.page.form.nodeSize,"show-elevator":""},on:{"on-change":t.pageChange}})],1)],1)])])])}),[],!1,null,"21a82344",null);e.default=s.exports},"387d":function(t,e,a){"use strict";a("f8d4")},3883:function(t,e,a){"use strict";a("b477")},"388e":function(t,e,a){"use strict";a("c40d")},"397a":function(t,e,a){"use strict";a("2381")},"39ef":function(t,e,a){},"3b67":function(t,e,a){"use strict";a("f60a")},"3cf6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDdFNTJCRTY0RTU4MTFFQjk3MDE4RDdBQjQzNzQ1ODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDdFNTJCRTc0RTU4MTFFQjk3MDE4RDdBQjQzNzQ1ODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEN0U1MkJFNDRFNTgxMUVCOTcwMThEN0FCNDM3NDU4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEN0U1MkJFNTRFNTgxMUVCOTcwMThEN0FCNDM3NDU4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqKjsx4AAAA/UExUReogJ+seJuwdJe0rMukkK+0iKuoiKuoiKekkLOohJ+8zOuweJeU1PO0kLOsgKOwiKugrM+wrM+84P+wcJP///5brWTUAAAAVdFJOU///////////////////////////ACvZfeoAAABJSURBVHjaTMtJEoAwDANBh30PoPn/W3FMDtGpqyQZNRNY5a2l+HSardqNXgkOxGujNMuby0uxUaz4Ks6tn3AK5/DQbP508AkwACHpCG+v7aALAAAAAElFTkSuQmCC"},"3d1f":function(t,e,a){"use strict";a.r(e);var i=a("c701"),n=Object(i.a)({name:"500"},(function(){return this.$createElement,this._self._c,this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"margin-top":"10px"}},[e("h1",{staticStyle:{"text-align":"center","margin-bottom":"15px"}},[this._v("500 Forbidden")]),e("hr"),e("p",{staticStyle:{"text-align":"center","margin-top":"10px"}},[this._v("openresty/1.13.6.1")])])}],!1,null,"c278ffa2",null);e.default=n.exports},"3d7a":function(t,e,a){},4264:function(t,e,a){"use strict";a("6096")},4452:function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("04d8"),s={inject:["reload"],filters:{ellipsis:function(t){return t?t.length>50?t.slice(0,47)+"...":t:""},dateFormat:function(t){if(!t)return"";var e=new Date(t);function a(t){return t<10&&(t="0"+t),t}var i=e.getFullYear(),n=e.getMonth()+1,s=e.getDate(),r=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return i+"-"+a(n)+"-"+a(s)+" "+a(r)+":"+a(o)+":"+a(l)}},name:"StrategyList",components:{jk_tabs:i.a,Pies:n.a},data:function(){return{switch1:!0,PASSmodel:!0,password:"",confirmModal:!1,tablelogShow:!1,driveWarningTitle:"",drivecheckgroup:"全部",itemList:[],selected:[],strategyData:"",strategyBackupData:"",StrategyDatas:"",page:{datacount:0,page:1,currentPage:1},strategyListdata:[{name:"全通模式",val:"1"},{name:"工作模式",val:"2"},{name:"测试模式",val:"3"}],timeselectlist:"",weeks:[{name:"每天",value:0},{name:"每周一",value:1},{name:"每周二",value:2},{name:"每周三",value:3},{name:"每周四",value:4},{name:"每周五",value:5},{name:"每周六",value:6},{name:"每周日",value:7}],dataCount:0,currentPage:1,pageSize:10,data1:[],data3:[],stateTitle:"",stateContent:"",links:[{name:"阈值告警",to:"/strategy/thresholdAlarm"},{name:"采集阈值",to:"/strategy/collectThresholdAlarm"},{name:"上报阈值",to:"/strategy/uploadThresholdAlarm"}],iconName:null,StatisticsModal:!1,pieData:[],resp:{Duuid:"",Suuid:""}}},mounted:function(){this.getData(!0)},methods:{changeEcharts:function(){this.getData(this.switch1)},cancelCheckidentity:function(){this.confirmModal=!1,this.strategyData=this.strategyBackupData},getDriveLoginfo:function(t){var e=this,a={filters:[{filed:"alarmType",params:["CPU"]},{filed:"alarmLevel",params:["2"]}],page:1,size:10};"cpuWarnCount"==t?(a.filters[0].params=["CPU"],a.filters[1].params=["1"]):"cpuRiskCount"==t?(a.filters[0].params=["CPU"],a.filters[1].params=["2"]):"memWarnCount"==t?(a.filters[0].params=["MEM"],a.filters[1].params=["1"]):"memRiskCount"==t?(a.filters[0].params=["MEM"],a.filters[1].params=["2"]):"diskWarnCount"==t?(a.filters[0].params=["DISK"],a.filters[1].params=["1"]):"diskRiskCount"==t?(a.filters[0].params=["DISK"],a.filters[1].params=["2"]):"upFlowWarnCount"==t?(a.filters[0].params=["UPFLOW"],a.filters[1].params=["1"]):"upFlowRiskCount"==t?(a.filters[0].params=["UPFLOW"],a.filters[1].params=["2"]):"downFlowWarnCount"==t?(a.filters[0].params=["DOWNFLOW"],a.filters[1].params=["1"]):"downFlowRiskCount"==t&&(a.filters[0].params=["DOWNFLOW"],a.filters[1].params=["2"]),this.$https.fetchPost(this.$api.strategy.findUploadAlarmLog.url,a).then((function(t){if(200==t.data.code){if(e.tablelogShow=!0,e.itemList=t.data.data.data,0==t.data.data.count)e.itemList=[{alarmMsg:"暂无数据"}];else if(-1!=e.itemList[0].uuid.indexOf("risk"))for(var a in e.itemList)e.itemList[a].alarmType=!0}else e.$Notice.error({title:"数据源对象添加失败",desc:"错误："+t.data.desc,duration:5})})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:5})}))},getDriveLogData:function(t,e){this.page.page=1,this.page.currentPage=1,this.getDriveLoginfo(e),this.driveWarningTitle=t+"拦截详情"},changepage:function(t){this.currentPage=t,this.showData(t,10)},getData:function(t){var e=this;this.$https.fetchGet(this.$api.strategy.uploadSystemAlarmCount.url).then((function(a){200==a.data.code?(e.pieData=a.data.data,t?e.$refs.pies.chart(e.pieData):e.$refs.pies.barchart(e.pieData)):e.$Notice.error({title:"数据源对象添加失败",desc:"错误："+a.data.desc,duration:5})})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:5})}))}}},r=(a("2b78"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header",staticStyle:{"border-bottom":"1px solid #a9a9a9","padding-bottom":"15px"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),a("span",{staticStyle:{float:"right","font-size":"12px"}},[t._v("柱状图 / 饼图 "),a("i-switch",{on:{"on-change":t.changeEcharts},model:{value:t.switch1,callback:function(e){t.switch1=e},expression:"switch1"}})],1)],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{display:"flex",height:"90%","justify-content":"center",position:"relative"}},[a("Pies",{ref:"pies",staticStyle:{width:"48%",height:"510px"},attrs:{warning:t.drivecheckgroup,id:"1"},on:{sendDriveLogData:t.getDriveLogData}}),t.tablelogShow?a("Card",{staticStyle:{width:"48%",height:"510px","margin-left":"3%"}},[a("div",{staticStyle:{height:"450px","overflow-y":"scroll",background:"#fff"}},[a("table",{staticStyle:{width:"100%","border-collapse":"collapse"},attrs:{dataArr:t.pieData}},[a("thead",{staticStyle:{"border-bottom":"1px"}},[a("tr",{staticStyle:{"background-color":"#eee","text-align":"center"}},[a("span",{staticStyle:{margin:"0 auto",display:"block",width:"100%","font-weight":"bold",padding:"5px 0"}},[t._v(t._s(t.driveWarningTitle))])])])]),t._l(t.itemList,(function(e,i){return a("ul",{key:i,staticClass:"connectList agile-list"},[a("li",{class:1==e.alarmType?"danger-element":"warning-element",staticStyle:{width:"100%","table-layout":"fixed",maring:"10px"}},[t._v("\n                                "+t._s(10*(t.page.page-1)+i+1+". ")+" "+t._s(e.alarmMsg)+"\n                                "),a("div",{staticClass:"agile-detail"},["暂无数据"!=e.alarmMsg?a("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-time",size:"12"}}):t._e(),t._v("\n                                    "+t._s(t._f("dateFormat")(e.updateTime))+"\n                                ")],1)])])}))],2)]):t._e()],1)])])])}),[],!1,null,"3663514c",null);e.default=o.exports},"447c":function(t,e,a){"use strict";a("aa6d")},4505:function(t,e,a){"use strict";function i(t){var e=0;if(t.length<1)return e;switch(/\d/.test(t)&&e++,/[a-z]/.test(t)&&e++,/[A-Z]/.test(t)&&e++,/\W/.test(t)&&e++,e){case 1:return 1;case 2:return 2;case 3:case 4:return t.length<10?3:4}return e}a.r(e),a.d(e,"checkStrong",(function(){return i}));var n={name:"test",data:function(){return{msgText:"",pwd:""}},methods:{},watch:{pwd:function(t,e){this.msgText=i(t),this.msgText>1||1==this.msgText?$("#one").css("background","red"):$("#one").css("background","#eee"),this.msgText>2||2==this.msgText?$("#two").css("background","orange"):$("#two").css("background","#eee"),4==this.msgText?$("#three").css("background","#00D1B2"):$("#three").css("background","#eee")}}},s=(a("c01b"),a("c701")),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",{staticStyle:{"margin-left":"40px"}},[t._v("密码:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],attrs:{id:"inputValue","auto-complete":"off"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}}),a("br"),a("br"),t._m(0)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input_span"},[e("span",{attrs:{id:"one"}}),e("span",{attrs:{id:"two"}}),e("span",{attrs:{id:"three"}})])}],!1,null,"e1f49bde",null);e.default=r.exports},"45fb":function(t,e,a){"use strict";a("a26a")},"46a1":function(t,e,a){"use strict";a.r(e);var i={name:"Engineered",components:{jk_tabs:a("25b1").a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"状态",align:"center",render:function(t,e){return t("p",e.row.state?"成功":"失败")}},{title:"访问时间",align:"center",render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.createTime).format("yyyy-MM-dd hh:mm:ss"))}},{title:"操作",slot:"action",width:160,align:"center"}],loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"createTime",order:!0}]}},links:[{name:"工程导出",to:"/engineering/engineered"}]}},mounted:function(){"true"==this.$storage.getStorage("loginType")&&this.links.push({name:"配置同步",to:"/engineering/engineeredSynch"}),this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.engineeredExport.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},downloadEngineered:function(t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>是否下载工程备份</p>",onOk:function(){e.$https.getAxios().post(e.$api.log.dn_engineeredExport.url+"/"+t,{},{responseType:"blob"}).then((function(t){var e=t.headers,a=e["content-disposition"].indexOf("="),i=e["content-disposition"].substr(a+1,e["content-disposition"].length),n=e["content-type"],s=new Blob([t.data],{type:n}),r=new FileReader;r.readAsDataURL(s),r.onload=function(t){var e=document.createElement("a");e.download=i,e.style.display="none",e.href=t.target.result,document.body.appendChild(e),e.click(),document.body.removeChild(e)}})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:2.5})}))}})},downloadNode:function(){var t=this;this.$https.getAxios().post(this.$api.collect.engineered.export.url,{},{responseType:"blob"}).then((function(e){var a=e.headers,i=a["content-disposition"].indexOf("="),n=a["content-disposition"].substr(i+1,a["content-disposition"].length),s=a["content-type"],r=new Blob([e.data],{type:s}),o=new FileReader;o.readAsDataURL(r),o.onload=function(t){var e=document.createElement("a");e.download=n,e.style.display="none",e.href=t.target.result,document.body.appendChild(e),e.click(),document.body.removeChild(e)},t.showData()})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:3})}))}}},n=(a("387d"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"40px"}},[a("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[a("Icon",{staticStyle:{float:"right","margin-right":"15px"},attrs:{type:"ios-home-outline"}})],1),a("td",[a("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:t.downloadNode}},[t._v("导出")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.downloadEngineered(i.uuid)}}},[t._v("下载工程备份")])]}}])}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"show-elevator":"","page-size":t.page.form.size},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"35d1753a",null);e.default=s.exports},"48b3":function(t,e,a){"use strict";a.r(e),a("a450");var i=a("25b1"),n=a("a45a"),s=a("82ae"),r=a.n(s),o={name:"SysUploadInfo",components:{Flow:n.a,JkTabs:i.a},data:function(){return{data1:[],columns1:[{type:"index",width:60,align:"center"},{title:"通道名",key:"channelName",align:"center"},{title:"驱动名",key:"driveName",align:"center"},{title:"主机",key:"host",align:"center",width:300},{title:"数据冻时(秒)",key:"freezeTime",align:"center",render:function(t,e){return 0>=e.row.freezeTime&&e.row.freezeTime<=e.row.freezeWarnTime?t("tag",{props:{color:"primary"}},e.row.freezeTime):e.row.freezeWarnTime>e.row.freezeTime&&e.row.freezeTime<=e.row.freezeRiskTime?t("tag",{props:{color:"warning"}},e.row.freezeTime):e.row.freezeTime>e.row.freezeRiskTime?t("tag",{props:{color:"error"}},e.row.freezeTime):void 0}},{title:"间隔时间(秒)",key:"intervalTime",align:"center"},{title:"状态",key:"status",align:"center",width:150,slot:"state"}],tabsShow:!0,randomMovieList:[{title:"系统名称：",content:null},{title:"系统型号：",content:"7300D"},{title:"软件版本：",content:null},{title:"发布时间：",content:null},{title:"license状态：",content:null}],g1:null,g2:null,g3:null,netIfs:[],timestamp:null,timeData:[],recvSpeed:[],sendSpeed:[],timer:"",flowOpt:[],num:0,links:[{name:"上报模块",to:"/sys/info/upload"},{name:"采集模块",to:"/sys/info/collect"}],links2:[{name:"接口流量",to:"/sys/info/upload"},{name:"采集模块",to:"/sys/info/collect"}],licenseInfo:{code:"",type:"",currentLicenseState:"",expireDate:""}}},created:function(){},mounted:function(){this.connWebSocket(),this.showData(),this.g1=this.$refs.g1.draw({id:"g1",value:1,min:0,max:100,title:"CPU使用率",label:"%"}),this.g2=this.$refs.g2.draw({id:"g2",value:1,min:0,max:100,title:"内存使用率",label:"%"}),this.g3=this.$refs.g3.draw({id:"g3",value:1,min:0,max:100,title:"磁盘使用率",label:"%"})},methods:{handleTabClick:function(t){var e=this;1==t?(this.tabsShow=!1,this.getDriveData(),this.timer=window.setInterval((function(){setTimeout(e.getDriveData())}),5e3),this.$once("hook:beforeDestroy",(function(){clearInterval(e.timer)}))):(this.tabsShow=!0,clearInterval(this.timer))},getDriveData:function(){var t=this;this.$https.fetchGet(this.$api.collect.findDriveList.url).then((function(e){200==e.status?t.data1=e.data.data:t.$Notice.error({title:"获取驱动信息失败",desc:"错误代码："+e.data.desc,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))},getTime:function(){this.randomMovieList[4].content=this.$util.time_stamp2time_date().format("yyyy-MM-dd hh:mm:ss")},showData:function(){var t=this;this.$https.fetchGet(this.$api.software.software.url).then((function(e){t.randomMovieList[0].content=e.data.data.programName,t.randomMovieList[1].content=e.data.data.model,t.randomMovieList[2].content=e.data.data.version,t.randomMovieList[3].content=t.$util.time_stamp2time_date(e.data.data.startUptime).format("yyyy-MM-dd hh:mm:ss")})).catch((function(t){})),this.$https.fetchGet(this.$api.system.license.show.url).then((function(e){t.licenseInfo.code=e.data.data.devSerialnumber,"UNREGISTERED"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="未注册":"EXPIRED"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="已过期":"NORMAL"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="试用":"ABNORMAL"==e.data.data.currentLicenseState&&(t.licenseInfo.currentLicenseState="异常"),t.randomMovieList[4].content=t.licenseInfo.currentLicenseState;var a=Date.parse(new Date),i=(1e3*e.data.data.expireDate-a)/864e5,n=t.$util.time_stamp2time_date(1e3*e.data.data.expireDate);a=t.$util.time_stamp2time_date(a),"试用"==t.licenseInfo.currentLicenseState&&(t.randomMovieList[4].content=t.randomMovieList[4].content+"(剩余"+parseInt(i)+"天)"),t.licenseInfo.expireDate=n.format("yyyy-MM-dd hh:mm:ss");var s="OFFICIAL"==e.data.data.license.type?"正式":"试用 ("+e.data.data.license.trialDays+") 天";for(var r in t.licenseInfo.type=s,t.content){var o=t.content[r].title;t.content[r].val=e.data.data.license.register[o]}t.randomMovieList[4].content="正式版"})).catch((function(t){}))},connWebSocket:function(){var t=this,e=null;if("/"==r.a.defaults.baseURL)e="wss://"+window.location.host+"/upload/websocket";else{var a=r.a.defaults.baseURL,i=a.lastIndexOf("/");e="wss://"+(a=a.substring(i+1,a.length))+"/upload/websocket"}var n=new WebSocket(e);this.webSocket=n,n.onmessage=this.$options.methods.onmessage.bind(this),n.onopen=function(e){t.send()},n.onerror=function(t){},n.onclose=function(t){}},closeWebSocket:function(){null!=this.webSocket&&this.webSocket.close()},onmessage:function(t){var e=JSON.parse(t.data),a=JSON.parse(e).mem[0],i=(a-JSON.parse(e).mem[1])/a*100;this.g1.refresh(JSON.parse(e).cpu),this.g2.refresh(i.toFixed(0)),this.g3.refresh(JSON.parse(e).disk);var n=JSON.parse(e).netIfs,s=JSON.parse(e).timestamp;for(var r in n)"docker0"==n[r].name&&n.splice(r,1),0==this.netIfs.length?(n[r].recvSpeed=((0-n[r].bytesRecv)/(0-s)).toFixed(2),n[r].sendSpeed=((0-n[r].bytesSend)/(0-s)).toFixed(2)):(n[r].recvSpeed=((this.netIfs[r].bytesRecv-n[r].bytesRecv)/(this.timestamp-s)).toFixed(2),n[r].sendSpeed=((this.netIfs[r].bytesSend-n[r].bytesSend)/(this.timestamp-s)).toFixed(2));this.netIfs=n,this.timestamp=s,this.flowOpt=n},send:function(){this.webSocket.send(JSON.stringify({instruct:"MONITOR_COLLECT_DEV"}))},scrollBottom:function(){this.$nextTick((function(){var t=document.getElementById("asd");t.scrollTop=t.scrollHeight}))}},beforeDestroy:function(){this.closeWebSocket(),clearInterval(this.timer)}},l=(a("172e"),a("c701")),d=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9",width:"96%"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("JkTabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticStyle:{width:"98%",display:"flex","flex-wrap":"nowrap"}},[a("div",{staticClass:"row box margin-x clear-margin padding-x",staticStyle:{width:"660px",height:"248px",float:"left"}},[t._m(0),a("div",{staticClass:"modal-body"},[a("vue-justgage",{ref:"g1",staticClass:"gauge",attrs:{id:"g1"}}),a("vue-justgage",{ref:"g2",staticClass:"gauge",attrs:{id:"g2"}}),a("vue-justgage",{ref:"g3",staticClass:"gauge",attrs:{id:"g3"}})],1)]),a("div",{staticClass:"row box margin-x clear-margin padding-x",staticStyle:{width:"43%",height:"248px",float:"left","margin-left":"30px"}},[t._m(1),a("div",{staticClass:"modal-body",staticStyle:{"margin-top":"5px"}},t._l(t.randomMovieList,(function(e,i){return a("div",{key:i,staticStyle:{"margin-bottom":"20px"}},[a("div",{staticStyle:{width:"105px",float:"left","margin-left":"5%","font-size":"12px"}},[a("span",[t._v(t._s(e.title))])]),a("div",{staticStyle:{"font-size":"12px"}},[a("span",[t._v(t._s(e.content))])])])})),0)])]),a("div",{staticClass:"row box margin-x clear-margin padding-x",staticStyle:{overflow:"hidden",width:"98%",float:"left"}},[a("div",{staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("Tabs",{attrs:{type:"line"},on:{"on-click":t.handleTabClick}},[a("TabPane",{attrs:{label:"流量统计"}}),a("TabPane",{attrs:{label:"上报驱动监控"}})],1)],1)]),t.tabsShow?a("div",{staticClass:"modal-body"},[a("Flow",{attrs:{flow:t.flowOpt}})],1):t._e(),t.tabsShow?t._e():a("div",{staticClass:"modal-body"},[a("Table",{attrs:{stripe:"",border:"",columns:t.columns1,data:t.data1},scopedSlots:t._u([{key:"state",fn:function(e){var i=e.row;return[i.status?a("div",[a("Tag",{attrs:{type:"dot",color:"success"}},[t._v("运行中")])],1):t._e(),i.status?t._e():a("div",[a("Tag",{attrs:{type:"dot",color:"error"}},[t._v("禁用中")])],1)]}}],null,!1,481682625)})],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[e("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000","font-size":"14px"}},[this._v("\n                资源监控\n            ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[e("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000","font-size":"14px"}},[this._v("\n                设备信息\n            ")])])}],!1,null,"66b7858c",null);e.default=d.exports},4995:function(t,e,a){},"4a73":function(t,e,a){},"4ae3":function(t,e,a){"use strict";a("3d7a")},"4c9b":function(t,e,a){"use strict";var i=a("c701"),n=Object(i.a)({name:"Nav5",data:function(){return{tabs:2}},methods:{handleTabsAdd:function(){this.tabs++}}},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Tabs",{attrs:{type:"card"}},[t._l(t.tabs,(function(e){return a("TabPane",{key:e,attrs:{label:"标签"+e}},[t._v("标签"+t._s(e))])})),a("Button",{attrs:{slot:"extra",size:"small"},on:{click:t.handleTabsAdd},slot:"extra"},[t._v("增加")])],2)}),[],!1,null,"3d16bd93",null);e.a=n.exports},"4eb7":function(t,e,a){},"511d":function(t,e,a){"use strict";a("2f22")},"545d":function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"LogCollectComm",components:{jk_tabs:i.a},data:function(){return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"上报地址",key:"address",align:"center"},{title:"加密类型",key:"encryptionType",align:"center"},{title:"上报状态",key:"status",align:"center",render:function(t,e){return t("span",0==e.row.status?"失败":"成功")}},{title:"上报类型",key:"type",align:"center"},{title:"上报时间",sortable:!0,key:"time",align:"center"},{title:"详细",slot:"action",width:130,align:"center"}],timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"time",order:!0}]}},modal1:!1,upload_content:null,links:[{name:"上报通讯日志",to:"/logs/logUploadComm"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.upload.comm.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")},show:function(t){var e=this,a={page:1,size:10,filters:[{filed:"uuid",params:[""+t],type:"equal"}]};this.$https.fetchPost(this.$api.log.upload.comm_detail.url,a).then((function(t){e.modal1=!0,e.upload_content=t.data.data.data[0].message})).catch((function(t){}))},query:function(){if(this.page.form.filters=[],""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"time",params:[t,e],type:"between"})}this.showData()}}},r=(a("7669"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return e.index,[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.show(i.uuid)}}},[t._v("查看")])]}}])}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1),a("Modal",{attrs:{title:"上报详细信息"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("div",{staticStyle:{"word-wrap":"break-word",display:"inline-block",width:"100%",height:"150px",overflow:"auto"}},[t._v(t._s(t.upload_content))])])],1)])}),[],!1,null,"4be756f1",null);e.default=o.exports},"55a1":function(t,e,a){"use strict";a.r(e);var i=a("28f8"),n=a("25b1"),s=a("84df"),r={name:"LogMailWarning",components:{jk_tabs:n.a},data:function(){var t,e=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"告警级别",width:180,key:"alarmType",align:"center"},(t={title:"告警消息",key:"alarmMsg",align:"center"},Object(i.a)(t,"align","center"),Object(i.a)(t,"render",(function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.alarmMsg}},e.row.alarmMsg)])})),t),{title:"告警时间",width:210,sortable:!0,align:"center",render:function(t,a){return t("p",e.$util.time_stamp2time_date(a.row.alarmTime).format("yyyy-MM-dd hh:mm:ss"))}}],timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10}},links:[{name:"上报邮箱告警日志",to:"/logs/logMailWarning"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.upload.mailSendLog.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(s.a)(e,"yyyy-MM-dd hh:mm")},query:function(){if(this.page.form.filters=[],""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"timestamp",params:[t,e],type:"between"})}this.showData()}}},o=(a("fab3"),a("c701")),l=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"2a93b9d2",null);e.default=l.exports},5686:function(t,e,a){},"58da":function(t,e,a){},5958:function(t,e,a){"use strict";a.r(e),a("a450");var i=a("1cbc"),n=a("25b1"),s=a("5f3f"),r=a("5e7e"),o={name:"DriveConfig",inject:["reload"],components:{jk_tabs:n.a,jk_tabsbtn:i.a,contentTabs:s.default},data:function(){return{driveUUID:null,loading:!1,driverInfo:[],item:{},url:null,driveType:null,driveState:{color:null,name:null},channel:{form:{uuid:null,name:null,remark:null,manufacturer:null,driveType:null}},drive:{form:{}},loginType:null,links:[{name:"驱动配置",to:"/engineering/collectionService/driveConfig"},{name:"节点配置",to:"/engineering/collectionService/nodeConfig"}]}},created:function(){},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1,this.showData()},methods:{showData:function(){var t=this;this.item=JSON.parse(this.$storage.getStorage("getItem")),this.channel.form.driveType=this.item.driveType,0==this.loginType?(this.driverInfo=[{title:"基本信息",data:"base",child:[{name:"驱动名称",input:!0,disabled:!0,data:"name"},{name:"描述",input:!0,disabled:!0,data:"remark"},{name:"状态",swith:!0,disabled:!0,data:"enable"}]},{title:"Debug模式",data:"debug",child:[{name:"状态",swith:!0,disabled:!0,data:"debug"}]},{title:"配置信息",data:"loopCollect",child:[{name:"采集间隔(秒)",input:!0,disabled:!0,data:"collectInterval"}]}],this.drive.form={base:{uuid:null,enable:!1,remark:null},debug:null,loopCollect:{collectInterval:null}},"HJ"==this.item.driveType&&(this.driverInfo.push({title:"设备名称",data:"name",child:[{name:"名称",input:!0,disabled:!0,data:"name",val:""}]}),this.drive.form.name=null),"MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"CJ"==this.item.driveType||"DL"==this.item.driveType?(this.driverInfo.push({title:"串口配置",data:"serialPars",child:[{name:"波特率",input:!0,disabled:!0,data:"baudRate"},{name:"数据位",input:!0,disabled:!0,data:"dataBits"},{name:"串口",input_select:!0,disabled:!0,data:"device",val:"ttyUSB0",options:["ttyUSB0","ttyUSB1","ttyUSB2","ttyUSB3","ttyUSB4","ttyUSB5","ttyUSB6","ttyUSB7","ttyUSB8","ttyUSB9"]},{name:"校验方式",select:!0,disabled:!0,data:"parity",cityList:[{name:"none",val:0},{name:"odd",val:1},{name:"even",val:2},{name:"mark",val:3},{name:"space",val:4}]},{name:"停止数据位",input:!0,disabled:!0,data:"stopBits"},{name:"超时时间(毫秒)",input:!0,disabled:!0,data:"timeOut"}]}),this.drive.form.serialPars={baudRate:null,dataBits:null,device:null,parity:null,stopBits:null,timeOut:null}):"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType?(this.driverInfo.push({title:"串口配置",data:"serialPars",child:[{name:"波特率",input:!0,disabled:!0,data:"baudRate"},{name:"数据位",input:!0,disabled:!0,data:"dataBits"},{name:"串口",input_select:!0,disabled:!0,data:"device",val:"ttyUSB0",options:["ttyUSB0","ttyUSB1","ttyUSB2","ttyUSB3","ttyUSB4","ttyUSB5","ttyUSB6","ttyUSB7","ttyUSB8","ttyUSB9"]},{name:"校验方式",select:!0,disabled:!0,data:"parity",cityList:[{name:"none",val:0},{name:"odd",val:1},{name:"even",val:2},{name:"mark",val:3},{name:"space",val:4}]},{name:"停止数据位",input:!0,disabled:!0,data:"stopBits"},{name:"超时时间(毫秒)",input:!0,disabled:!0,data:"timeOut"}]},{title:"从站配置",data:"slaveParameters",child:[{name:"启始数据位",input:!0,disabled:!0,data:"offset"},{name:"数据位数量",input:!0,disabled:!0,data:"size"},{name:"从站ID",input:!0,disabled:!0,data:"slaveId"}]}),this.drive.form.serialPars={baudRate:null,dataBits:null,device:null,parity:null,stopBits:null,timeOut:null},this.drive.form.slaveParameters={offset:null,size:null,slaveId:null}):"MOD_BUS_TCP"==this.item.driveType||"HJ"==this.item.driveType?(this.driverInfo.push({title:"TCP数量",data:"tcpPars",child:[{name:"IP地址",input:!0,disabled:!0,data:"host"},{name:"端口",input:!0,disabled:!0,data:"port"},{name:"是否长连接",swith:!0,disabled:!0,data:"keepAlive"},{name:"超时时间(毫秒)",input:!0,disabled:!0,data:"timeOut"}]}),this.drive.form.tcpPars={charset:"UTF-8",host:null,keepAlive:null,port:null,timeOut:null}):"MOD_BUS_TCP_SLAVE"==this.item.driveType?(this.url=this.$api.collect.drive.url+"/modbustcpslave",this.driverInfo.push({title:"从站配置",data:"slaveParameters",child:[{name:"启始数据位",input:!0,disabled:!0,data:"offset"},{name:"数据位数量",input:!0,disabled:!0,data:"size"},{name:"从站ID",input:!0,disabled:!0,data:"slaveId"}]},{title:"TCP数量",data:"tcpPars",child:[{name:"端口",input:!0,disabled:!0,data:"port"},{name:"超时时间(毫秒)",input:!0,disabled:!0,data:"timeOut"},{name:"是否长连接",swith:!0,disabled:!0,data:"keepAlive"}]}),this.drive.form.slaveParameters={offset:null,size:null,slaveId:null},this.drive.form.tcpPars={charset:"UTF-8",host:null,keepAlive:null,port:null,timeOut:null}):"OPC_DA"==this.item.driveType?(this.url=this.$api.collect.drive.url+"/opcda",this.driverInfo.push({title:"OpcDa配置",data:"opcDaParams",child:[{name:"IP地址",input:!0,disabled:!0,data:"host"},{name:"域名称",input:!0,disabled:!0,data:"domain"},{name:"系统用户名",input:!0,disabled:!0,data:"user"},{name:"系统密码",pwd:!0,disabled:!0,data:"password"},{name:"程序ID",input:!0,disabled:!0,data:"progid"},{name:"连接类型",select:!0,disabled:!0,data:"conntype",val:"CLSID",cityList:[{name:"CLSID",val:2},{name:"程序名",val:1}]},{name:"时间间隔(毫秒)",input:!0,disabled:!0,data:"period"},{name:"超时时间(毫秒)",input:!0,disabled:!0,data:"timeout"}]}),this.drive.form.opcDaParams={conntype:null,domain:null,host:null,password:null,period:null,progid:null,timeout:null,user:null}):"OPC_DA_HTTP"==this.item.driveType?(this.url=this.$api.collect.drive.url+"/opcdahttp",this.driverInfo.push({title:"OpcDaHttp配置",data:"opcDaHttpParams",child:[{name:"URL",input:!0,disabled:!0,data:"url"},{name:"程序ID",input:!0,disabled:!0,data:"progid"},{name:"时间间隔(毫秒)",input:!0,disabled:!0,data:"period"},{name:"组名",input:!0,disabled:!0,data:"groupName"},{name:"用户名",input:!0,disabled:!0,data:"user"},{name:"密码",pwd:!0,disabled:!0,data:"password"}]}),this.drive.form.opcDaHttpParams={groupName:null,password:null,period:null,progid:null,url:null,user:null}):"OPC_UA"==this.item.driveType?(this.url=this.$api.collect.drive.url+"/opcua",this.driverInfo.push({title:"OpcUa配置",data:"opcUaConnParams",child:[{name:"URL",input:!0,disabled:!0,data:"url"},{name:"用户名",input:!0,disabled:!0,data:"user"},{name:"密码",pwd:!0,disabled:!0,data:"password"},{name:"安全模式",select:!0,disabled:!0,data:"securitypolicy",cityList:[{name:"basic256",val:"basic256"},{name:"basic128rsa15",val:"basic128rsa15"},{name:"basic256sha256",val:"basic256sha256"},{name:"aes128_sha256_rsaOaep",val:"aes128_sha256_rsaOaep"},{name:"aes256_sha256_rsapss",val:"aes256_sha256_rsapss"},{name:"none",val:"none"}]}]}),this.drive.form.opcUaConnParams={password:null,securitypolicy:null,url:null,user:null}):"MQTT_SERVER"==this.item.driveType&&(this.url=this.$api.collect.drive.url+"/mqttserver",this.driverInfo.push({title:"mqttServer配置",data:"mqttServerParams",child:[{name:"IP地址",input:!0,disabled:!0,data:"host",val:""},{name:"用户名",input:!0,disabled:!0,data:"username",val:""},{name:"密码",pwd:!0,disabled:!0,data:"password",val:""},{name:"端口",input:!0,disabled:!0,data:"port",val:""},{name:"客户访问策略",select:!0,disabled:!0,data:"clientAuth",val:0,cityList:[{name:"none",val:0},{name:"request",val:1},{name:"required",val:2}]}]}),this.drive.form.mqttServerParams={host:null,username:null,password:null,port:null,clientAuth:null}),"MOD_BUS_RTU"==this.item.driveType?this.url=this.$api.collect.drive.url+"/modbusrtu":"MOD_BUS_RTU_SLAVE"==this.item.driveType?this.url=this.$api.collect.drive.url+"/modbusrtuslave":"MOD_BUS_ASCII"==this.item.driveType?this.url=this.$api.collect.drive.url+"/modbusascii":"MOD_BUS_ASCII_SLAVE"==this.item.driveType?this.url=this.$api.collect.drive.url+"/modbusasciislave":"CJ"==this.item.driveType?this.url=this.$api.collect.drive.url+"/cj":"DL"==this.item.driveType?this.url=this.$api.collect.drive.url+"/dl":"HJ"==this.item.driveType?this.url=this.$api.collect.drive.url+"/hj":"MOD_BUS_TCP"==this.item.driveType&&(this.url=this.$api.collect.drive.url+"/modbustcp")):1==this.loginType&&(this.driverInfo=[{title:"基本信息",data:"base",child:[{name:"名称",input:!0,disabled:!0,data:"name"},{name:"描述",input:!0,data:"remark"},{name:"状态",swith:!0,data:"enable"}]},{title:"Debug模式",data:"debug",child:[{name:"状态",swith:!0,data:"debug"}]},{title:"配置信息",data:"loopCollect",child:[{name:"采集间隔(秒)",input:!0,data:"collectInterval"}]}],this.drive.form={base:{uuid:null,enable:!1,remark:null},debug:null,loopCollect:{collectInterval:null}},"HJ"==this.item.driveType&&(this.driverInfo.push({title:"设备名称",data:"name",child:[{name:"名称",input:!0,data:"name",val:""}]}),this.drive.form.name=null),"MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"CJ"==this.item.driveType||"DL"==this.item.driveType?(this.driverInfo.push({title:"串口配置",data:"serialPars",child:[{name:"波特率",input:!0,data:"baudRate"},{name:"数据位",input:!0,data:"dataBits"},{name:"串口",input_select:!0,data:"device",val:"ttyUSB0",options:["ttyUSB0","ttyUSB1","ttyUSB2","ttyUSB3","ttyUSB4","ttyUSB5","ttyUSB6","ttyUSB7","ttyUSB8","ttyUSB9"]},{name:"校验方式",select:!0,data:"parity",cityList:[{name:"none",val:0},{name:"odd",val:1},{name:"even",val:2},{name:"mark",val:3},{name:"space",val:4}]},{name:"停止数据位",input:!0,data:"stopBits"},{name:"超时时间(毫秒)",input:!0,data:"timeOut"}]}),this.drive.form.serialPars={baudRate:null,dataBits:null,device:null,parity:null,stopBits:null,timeOut:null}):"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType?(this.driverInfo.push({title:"串口配置",data:"serialPars",child:[{name:"波特率",input:!0,data:"baudRate"},{name:"数据位",input:!0,data:"dataBits"},{name:"串口",input_select:!0,data:"device",val:"ttyUSB0",options:["ttyUSB0","ttyUSB1","ttyUSB2","ttyUSB3","ttyUSB4","ttyUSB5","ttyUSB6","ttyUSB7","ttyUSB8","ttyUSB9"]},{name:"校验方式",select:!0,data:"parity",cityList:[{name:"none",val:0},{name:"odd",val:1},{name:"even",val:2},{name:"mark",val:3},{name:"space",val:4}]},{name:"停止数据位",input:!0,data:"stopBits"},{name:"超时时间(毫秒)",input:!0,data:"timeOut"}]},{title:"从站配置",data:"slaveParameters",child:[{name:"启始数据位",input:!0,data:"offset"},{name:"数据位数量",input:!0,data:"size"},{name:"从站ID",input:!0,data:"slaveId"}]}),this.drive.form.serialPars={baudRate:null,dataBits:null,device:null,parity:null,stopBits:null,timeOut:null},this.drive.form.slaveParameters={offset:null,size:null,slaveId:null}):"MOD_BUS_TCP"==this.item.driveType||"HJ"==this.item.driveType?(this.driverInfo.push({title:"TCP数量",data:"tcpPars",child:[{name:"IP地址",input:!0,data:"host"},{name:"端口",input:!0,data:"port"},{name:"是否长连接",swith:!0,data:"keepAlive"},{name:"超时时间(毫秒)",input:!0,data:"timeOut"}]}),this.drive.form.tcpPars={charset:"UTF-8",host:null,keepAlive:null,port:null,timeOut:null}):"MOD_BUS_TCP_SLAVE"==this.item.driveType?(this.url=this.$api.collect.drive.url+"/modbustcpslave",this.driverInfo.push({title:"从站配置",data:"slaveParameters",child:[{name:"启始数据位",input:!0,data:"offset"},{name:"数据位数量",input:!0,data:"size"},{name:"从站ID",input:!0,data:"slaveId"}]},{title:"TCP数量",data:"tcpPars",child:[{name:"端口",input:!0,data:"port"},{name:"是否长连接",swith:!0,data:"keepAlive"},{name:"超时时间(毫秒)",input:!0,data:"timeOut"}]}),this.drive.form.slaveParameters={offset:null,size:null,slaveId:null},this.drive.form.tcpPars={charset:"UTF-8",host:null,keepAlive:null,port:null,timeOut:null}):"OPC_DA"==this.item.driveType?(this.url=this.$api.collect.drive.url+"/opcda",this.driverInfo.push({title:"OpcDa配置",data:"opcDaParams",child:[{name:"IP地址",input:!0,data:"host"},{name:"域名称",input:!0,data:"domain"},{name:"系统用户名",input:!0,data:"user"},{name:"系统密码",pwd:!0,data:"password"},{name:"程序ID",input:!0,data:"progid"},{name:"连接类型",select:!0,data:"conntype",val:"CLSID",cityList:[{name:"CLSID",val:2},{name:"程序名",val:1}]},{name:"时间间隔(毫秒)",input:!0,data:"period"},{name:"超时时间(毫秒)",input:!0,data:"timeout"}]}),this.drive.form.opcDaParams={conntype:null,domain:null,host:null,password:null,period:null,progid:null,timeout:null,user:null}):"OPC_DA_HTTP"==this.item.driveType?(this.url=this.$api.collect.drive.url+"/opcdahttp",this.driverInfo.push({title:"OpcDaHttp配置",data:"opcDaHttpParams",child:[{name:"URL",input:!0,data:"url"},{name:"程序ID",input:!0,data:"progid"},{name:"时间间隔(毫秒)",input:!0,data:"period"},{name:"组名",input:!0,data:"groupName"},{name:"用户名",input:!0,data:"user"},{name:"密码",pwd:!0,data:"password"}]}),this.drive.form.opcDaHttpParams={groupName:null,password:null,period:null,progid:null,url:null,user:null}):"OPC_UA"==this.item.driveType?(this.url=this.$api.collect.drive.url+"/opcua",this.driverInfo.push({title:"OpcUa配置",data:"opcUaConnParams",child:[{name:"URL",input:!0,data:"url"},{name:"用户名",input:!0,data:"user"},{name:"密码",pwd:!0,data:"password"},{name:"安全模式",select:!0,data:"securitypolicy",cityList:[{name:"basic128rsa15",val:"basic128rsa15"},{name:"basic256",val:"basic256"},{name:"basic256sha256",val:"basic256sha256"},{name:"aes128_sha256_rsaOaep",val:"aes128_sha256_rsaOaep"},{name:"aes256_sha256_rsapss",val:"aes256_sha256_rsapss"},{name:"none",val:"none"}]}]}),this.drive.form.opcUaConnParams={password:null,securitypolicy:null,url:null,user:null}):"MQTT_SERVER"==this.item.driveType&&(this.url=this.$api.collect.drive.url+"/mqttserver",this.driverInfo.push({title:"mqttServer配置",data:"mqttServerParams",child:[{name:"IP地址",input:!0,data:"host",val:""},{name:"用户名",input:!0,data:"username",val:""},{name:"密码",pwd:!0,data:"password",val:""},{name:"端口",input:!0,data:"port",val:""},{name:"客户访问策略",select:!0,data:"clientAuth",val:0,cityList:[{name:"none",val:0},{name:"request",val:1},{name:"required",val:2}]}]}),this.drive.form.mqttServerParams={host:null,username:null,password:null,port:null,clientAuth:null}),"MOD_BUS_RTU"==this.item.driveType?this.url=this.$api.collect.drive.url+"/modbusrtu":"MOD_BUS_RTU_SLAVE"==this.item.driveType?this.url=this.$api.collect.drive.url+"/modbusrtuslave":"MOD_BUS_ASCII"==this.item.driveType?this.url=this.$api.collect.drive.url+"/modbusascii":"MOD_BUS_ASCII_SLAVE"==this.item.driveType?this.url=this.$api.collect.drive.url+"/modbusasciislave":"CJ"==this.item.driveType?this.url=this.$api.collect.drive.url+"/cj":"DL"==this.item.driveType?this.url=this.$api.collect.drive.url+"/dl":"HJ"==this.item.driveType?this.url=this.$api.collect.drive.url+"/hj":"MOD_BUS_TCP"==this.item.driveType&&(this.url=this.$api.collect.drive.url+"/modbustcp")),this.$https.fetchGet(this.url+"/"+this.item.uuid).then((function(e){for(var a in t.driverInfo){var i=t.driverInfo[a].data;if("debug"==i)t.$set(t.driverInfo[1].child[0],"val",e.data.data[i]);else if("HJ"==t.item.driveType&&"name"==i)t.$set(t.driverInfo[3].child[0],"val",e.data.data.name);else for(var n in t.driverInfo[a].child){var s=t.driverInfo[a].child[n].data;t.$set(t.driverInfo[a].child[n],"val",e.data.data[i][s])}}null==e.data.data.driveState?(t.driveState.name="未创建驱动",t.driveState.color="red"):"NoConnection"==e.data.data.driveState?(t.driveState.name="未连接",t.driveState.color="primary"):"ConnectionIng"==e.data.data.driveState?(t.driveState.name="连接中",t.driveState.color="warning"):"Connected"==e.data.data.driveState&&(t.driveState.name="已连接",t.driveState.color="success")})).catch((function(t){}))},updateDrive:function(){var t=this;for(var e in this.driverInfo){var a=this.driverInfo[e].data;if("debug"==a)this.drive.form[a]=this.driverInfo[1].child[0].val;else if("name"==a&&"HJ"==this.item.driveType)this.drive.form.name=this.driverInfo[3].child[0].val;else for(var i in this.driverInfo[e].child){var n=this.driverInfo[e].child[i].data;this.drive.form[a][n]=this.driverInfo[e].child[i].val}}this.drive.form.base.uuid=this.item.uuid,0!=this.checkDrive()||this.check()||this.$https.fetchPut(this.url,this.drive.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"驱动配置成功",desc:"正在刷新界面",duration:2.5}),r.a.$emit("menuShowData","msg"),t.reload()):t.$Notice.error({title:"驱动配置失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5})}))},is_Connect:function(){var t=this;if(!this.check()){this.loading=!0;var e=null;"OPC_UA"==this.item.driveType?e={opcUaConnParams:{password:this.driverInfo[3].child[2].val,securitypolicy:this.driverInfo[3].child[3].val,url:this.driverInfo[3].child[0].val,user:this.driverInfo[3].child[1].val}}:"OPC_DA_HTTP"==this.item.driveType?e={opcDaHttpParams:{groupName:this.driverInfo[3].child[3].val,password:this.driverInfo[3].child[5].val,period:this.driverInfo[3].child[2].val,progid:this.driverInfo[3].child[1].val,url:this.driverInfo[3].child[0].val,user:this.driverInfo[3].child[4].val}}:"OPC_DA"==this.item.driveType?e={opcDaParams:{conntype:this.driverInfo[3].child[5].val,domain:this.driverInfo[3].child[1].val,host:this.driverInfo[3].child[0].val,password:this.driverInfo[3].child[3].val,period:this.driverInfo[3].child[6].val,progid:this.driverInfo[3].child[4].val,timeout:this.driverInfo[3].child[7].val,user:this.driverInfo[3].child[2].val}}:"MOD_BUS_TCP_SLAVE"==this.item.driveType?e={slaveParameters:{offset:this.driverInfo[3].child[0].val,size:this.driverInfo[3].child[1].val,slaveId:this.driverInfo[3].child[2].val},tcpPars:{charset:"UTF-8",host:this.driverInfo[4].child[0].val,keepAlive:this.driverInfo[4].child[2].val,port:this.driverInfo[4].child[1].val,timeOut:this.driverInfo[4].child[3].val}}:"MOD_BUS_TCP"==this.item.driveType?e={tcpPars:{charset:"UTF-8",host:this.driverInfo[3].child[0].val,keepAlive:this.driverInfo[3].child[2].val,port:this.driverInfo[3].child[1].val,timeOut:this.driverInfo[3].child[3].val}}:"MOD_BUS_ASCII_SLAVE"==this.item.driveType||"MOD_BUS_RTU_SLAVE"==this.item.driveType?e={serialPars:{baudRate:this.driverInfo[3].child[0].val,dataBits:this.driverInfo[3].child[1].val,device:this.driverInfo[3].child[2].val,parity:this.driverInfo[3].child[3].val,stopBits:this.driverInfo[3].child[4].val,timeOut:this.driverInfo[3].child[5].val},slaveParameters:{offset:this.driverInfo[4].child[0].val,size:this.driverInfo[4].child[1].val,slaveId:this.driverInfo[4].child[2].val}}:"MOD_BUS_ASCII"==this.item.driveType||"MOD_BUS_RTU"==this.item.driveType||"CJ"==this.item.driveType||"DL"==this.item.driveType?e={serialPars:{baudRate:this.driverInfo[3].child[0].val,dataBits:this.driverInfo[3].child[1].val,device:this.driverInfo[3].child[2].val,parity:this.driverInfo[3].child[3].val,stopBits:this.driverInfo[3].child[4].val,timeOut:this.driverInfo[3].child[5].val}}:"HJ"==this.item.driveType?e={name:this.driverInfo[3].child[0].val,tcpPars:{charset:"UTF-8",host:this.driverInfo[4].child[0].val,keepAlive:this.driverInfo[4].child[2].val,port:this.driverInfo[4].child[1].val,timeOut:this.driverInfo[4].child[3].val}}:"MQTT_SERVER"==this.item.driveType&&(e={mqttServerParams:{clientAuth:this.driverInfo[3].child[4].val,host:this.driverInfo[3].child[0].val,password:this.driverInfo[3].child[2].val,port:this.driverInfo[3].child[3].val,username:this.driverInfo[3].child[1].val}}),this.$https.fetchPost(this.url+"/actions/testconn",e).then((function(e){200==e.data.code?(t.$Notice.success({title:"连接成功",desc:"请进行下一步...",duration:2.5}),t.loading=!1):t.$Notice.error({title:"连接失败",desc:"请重新填写...",duration:2.5}),t.loading=!1})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5}),t.loading=!1}))}},downloadDaHttpClient:function(){var t=this;this.$https.getAxios().post(this.$api.collect.opcDaHttpClient.url,{},{responseType:"blob"}).then((function(t){var e=t.headers,a=e["content-disposition"].indexOf("="),i=e["content-disposition"].substr(a+1,e["content-disposition"].length),n=e["content-type"],s=new Blob([t.data],{type:n}),r=new FileReader;r.readAsDataURL(s),r.onload=function(t){var e=document.createElement("a");e.download=i,e.style.display="none",e.href=t.target.result,document.body.appendChild(e),e.click(),document.body.removeChild(e)}})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5})}))},check:function(){for(var t in this.driverInfo){var e=this.driverInfo[t].data;if("debug"==e)this.drive.form[e]=this.driverInfo[1].child[0].val;else if("name"==e&&"HJ"==this.item.driveType)this.drive.form.name=this.driverInfo[3].child[0].val;else for(var a in this.driverInfo[t].child){var i=this.driverInfo[t].child[a].data;this.drive.form[e][i]=this.driverInfo[t].child[a].val}}var n=null;return"MOD_BUS_ASCII"==this.channel.form.driveType||"MOD_BUS_RTU"==this.channel.form.driveType||"CJ"==this.item.driveType||"DL"==this.item.driveType?n=this.checkMdbRtuOrMdbAsciiDrive():"MOD_BUS_ASCII_SLAVE"==this.channel.form.driveType||"MOD_BUS_RTU_SLAVE"==this.channel.form.driveType?0!=(n=this.checkMdbRtuOrMdbAsciiDrive())||(n=this.checkSlaveDrive()):"MOD_BUS_TCP"==this.channel.form.driveType?n=this.checkMdbTcpDrive():"HJ"==this.item.driveType?0!=(n=this.checkMdbTcpDrive())||(n=this.checkHJDrive()):"MOD_BUS_TCP_SLAVE"==this.channel.form.driveType?0!=(n=this.checkMdbTcpDrive())||(n=this.checkSlaveDrive()):"OPC_DA"==this.channel.form.driveType?n=this.checkDaDrive():"OPC_DA_HTTP"==this.channel.form.driveType?n=this.checkDaHttpDrive():"OPC_UA"==this.channel.form.driveType?n=this.checkUaDrive():"MQTT_SERVER"==this.item.driveType&&(n=this.checkMQTTDrive()),n},checkDrive:function(){var t=!1;return""===this.drive.form.base.name||""===this.drive.form.loopCollect.collectInterval?(this.$Message.error({content:"请填写驱动名称或者间隔时间...",duration:3}),t=!0):/^[1-9]\d{0,2}$/.test(this.drive.form.loopCollect.collectInterval)?/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(this.drive.form.base.name)||(this.$Message.error({content:"驱动名称不允许特殊符号...",duration:3}),t=!0):(this.$Message.error({content:"间隔时间填写1-999之间的数字...",duration:3}),t=!0),t},checkUaDrive:function(){var t=!1;return""===this.drive.form.opcUaConnParams.password||""===this.drive.form.opcUaConnParams.securitypolicy||""===this.drive.form.opcUaConnParams.url||""===this.drive.form.opcUaConnParams.user?(this.$Message.error({content:"请填写URL、用户名、密码、安全模式...",duration:3}),t=!0):/^opc.tcp:\/\/((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5]):([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.drive.form.opcUaConnParams.url)?/^[a-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.drive.form.opcUaConnParams.user)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.drive.form.opcUaConnParams.password)||(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文或中文...",duration:3}),t=!0):(this.$Message.error({content:"URL请填写正确的 opc.tcp://IP:端口 格式...",duration:3}),t=!0),t},checkDaDrive:function(){var t=!1;return""===this.drive.form.opcDaParams.host||""===this.drive.form.opcDaParams.password||""===this.drive.form.opcDaParams.period||""===this.drive.form.opcDaParams.progid||""===this.drive.form.opcDaParams.timeout||""===this.drive.form.opcDaParams.user?(this.$Message.error({content:"请填写IP地址、系统用户名、系统密码、时间间隔、程序ID、超时时间...",duration:3}),t=!0):/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.drive.form.opcDaParams.host)?/^[\da-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.drive.form.opcDaParams.user)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.drive.form.opcDaParams.password)?/^[1-9]\d{3,}$/.test(this.drive.form.opcDaParams.timeout)&&/^[1-9]\d{3,}$/.test(this.drive.form.opcDaParams.period)||(this.$Message.error({content:"超时时间或时间间隔填写>=1000...",duration:3}),t=!0):(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字或中文...",duration:3}),t=!0):(this.$Message.error({content:"请填写正确的IP格式...",duration:3}),t=!0),t},checkDaHttpDrive:function(){var t=!1;return""===this.drive.form.opcDaHttpParams.groupName||""===this.drive.form.opcDaHttpParams.password||""===this.drive.form.opcDaHttpParams.period||""===this.drive.form.opcDaHttpParams.progid||""===this.drive.form.opcDaHttpParams.url||""===this.drive.form.opcDaHttpParams.user?(this.$Message.error({content:"请填写URL、程序ID、时间间隔、组名、用户名、密码...",duration:3}),t=!0):/^http:\/\/((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5]):([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.drive.form.opcDaHttpParams.url)?/^[\da-zA-Z\u4e00-\u9fa5!@#$%^&*]{0,30}$/.test(this.drive.form.opcDaHttpParams.groupName)?/^[\da-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.drive.form.opcDaHttpParams.user)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.drive.form.opcDaHttpParams.password)?/^[1-9]\d{3,}$/.test(this.drive.form.opcDaHttpParams.period)||(this.$Message.error({content:"时间间隔填写>=1000...",duration:3}),t=!0):(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字或中文...",duration:3}),t=!0):(this.$Message.error({content:"组名填写30位以内英文、中文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"URL请填写正确的 http://IP:端口 格式...",duration:3}),t=!0),t},checkMdbTcpDrive:function(){var t=!1;return""===this.drive.form.tcpPars.port||""===this.drive.form.tcpPars.timeOut?(this.$Message.error({content:"请填写端口、超时时间...",duration:3}),t=!0):/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.drive.form.tcpPars.port)?/^[1-9]\d{3,}$/.test(this.drive.form.tcpPars.timeOut)||(this.$Message.error({content:"超时时间填写>=1000...",duration:3}),t=!0):(this.$Message.error({content:"请正确填写端口号(1-65535)...",duration:3}),t=!0),t},checkHJDrive:function(){var t=!1;return""===this.drive.form.name?(this.$Message.error({content:"请填写设备名称...",duration:3}),t=!0):/^[\da-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.drive.form.name)||(this.$Message.error({content:"设备名称填写30位以内英文、数字或中文...",duration:3}),t=!0),t},checkMdbRtuOrMdbAsciiDrive:function(){var t=!1;return""===this.drive.form.serialPars.baudRate||""===this.drive.form.serialPars.dataBits||""===this.drive.form.serialPars.device||""===this.drive.form.serialPars.parity||""===this.drive.form.serialPars.stopBits||""===this.drive.form.serialPars.timeOut?(this.$Message.error({content:"请填写波特率、数据位、串口、校验方式、停止数据位、超时时间...",duration:3}),t=!0):/^\d{0,6}$/.test(this.drive.form.serialPars.baudRate)?/^\d{0,4}$/.test(this.drive.form.serialPars.dataBits)&&/^\d{0,4}$/.test(this.drive.form.serialPars.stopBits)?/^[1-9]\d{3,}$/.test(this.drive.form.serialPars.timeOut)||(this.$Message.error({content:"超时时间填写>=1000...",duration:3}),t=!0):(this.$Message.error({content:"数据位或停止位填写4位以内数字...",duration:3}),t=!0):(this.$Message.error({content:"波特率填写6位以内数字...",duration:3}),t=!0),t},checkSlaveDrive:function(){var t=!1;return""===this.drive.form.slaveParameters.offset||""===this.drive.form.slaveParameters.size||""===this.drive.form.slaveParameters.slaveId?(this.$Message.error({content:"请填写起始数据位、数据位数量、从站ID...",duration:3}),t=!0):/^\d{0,5}$/.test(this.drive.form.slaveParameters.offset)&&/^\d{0,5}$/.test(this.drive.form.slaveParameters.size)&&/^\d{0,5}$/.test(this.drive.form.slaveParameters.slaveId)||(this.$Message.error({content:"从起始数据位、数据点数量、从站ID填写5位以内数字...",duration:3}),t=!0),t},checkMQTTDrive:function(){var t=!1;return""===this.drive.form.mqttServerParams.host||""===this.drive.form.mqttServerParams.username||""===this.drive.form.mqttServerParams.password||""===this.drive.form.mqttServerParams.port?(this.$Message.error({content:"请填写IP地址、端口、用户名、密码...",duration:3}),t=!0):/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.drive.form.mqttServerParams.host)?/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.drive.form.mqttServerParams.port)?/^[a-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.drive.form.mqttServerParams.username)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.drive.form.mqttServerParams.password)||(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文或中文...",duration:3}),t=!0):(this.$Message.error({content:"请正确填写端口号(1-65535)...",duration:3}),t=!0):(this.$Message.error({content:"请填写正确的IP格式...",duration:3}),t=!0),t}}},l=(a("7edb"),a("397a"),a("c701")),d=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",staticStyle:{float:"left",width:"100%"}},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[t.loginType?t._e():a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),t.loginType?a("jk_tabsbtn",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}):t._e(),t.loginType?a("Button",{staticStyle:{float:"right","margin-left":"5px","margin-top":"6px"},attrs:{type:"warning",size:"small",loading:t.loading},on:{click:t.is_Connect}},[t._v("连接测试")]):t._e(),t.loginType?a("Button",{staticStyle:{float:"right","margin-top":"6px"},attrs:{type:"primary",size:"small"},on:{click:t.updateDrive}},[t._v("保存")]):t._e(),"OPC_DA_HTTP"==t.channel.form.driveType?a("Button",{staticStyle:{float:"right",margin:"6px 5px 0 0"},attrs:{size:"small",icon:"ios-cloud-download-outline"},on:{click:t.downloadDaHttpClient}},[t._v("桥接客户端下载")]):t._e(),t.loginType?a("Tag",{staticStyle:{float:"right","margin-top":"6px","margin-right":"5px"},attrs:{type:"border",color:t.driveState.color}},[t._v(t._s(t.driveState.name))]):t._e()],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"715px"}},[a("contentTabs",{attrs:{links:t.driverInfo}})],1)])])}),[],!1,null,"2c1129b5",null);e.default=d.exports},"597a":function(t,e,a){},"599d":function(t,e,a){},"59ac":function(t,e,a){"use strict";a.r(e);var i={name:"SysCollectCount",components:{jk_tabs:a("25b1").a},data:function(){return{tableloading:!0,columns1:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"通道类型",width:170,key:"channelType",align:"center",render:function(t,e){return"MOD_BUS_TCP_SLAVE"==e.row.channelType?e.row.channelType="MODBUS_TCP从站推送":"MOD_BUS_RTU_SLAVE"==e.row.channelType?e.row.channelType="MODBUS_RTU从站推送":"MOD_BUS_ASCII_SLAVE"==e.row.channelType?e.row.channelType="MODBUS_ASCII从站推送":"OPC_DA_HTTP"==e.row.channelType?e.row.channelType="OPC_DA桥接客户端":"MOD_BUS_TCP"==e.row.channelType?e.row.channelType="MODBUS_TCP":"MOD_BUS_RTU"==e.row.channelType?e.row.channelType="MODBUS_RTU":"MOD_BUS_ASCII"==e.row.channelType&&(e.row.channelType="MODBUS_ASCII"),t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.channelType}},e.row.channelType)])}},{title:"通道总数",key:"channelCount",align:"center",sortable:!0},{title:"驱动总数",key:"driveCount",align:"center",sortable:!0},{title:"节点总数",key:"itemCount",align:"center",sortable:!0},{title:"今日采集次数",key:"todayCount",align:"center",sortable:!0,render:function(t,e){return t("div",[t("Tag",{props:{color:"primary"}},[e.row.todayCount,t("div",{style:{minWidth:"35px"}},e.row.todayCount)])])}},{title:"本周采集次数",key:"weekCount",align:"center",sortable:!0,render:function(t,e){return t("div",[t("Tag",{props:{color:"primary"}},[e.row.weekCount,t("div",{style:{minWidth:"35px"}},e.row.weekCount)])])}},{title:"本月采集次数",key:"monthCount",align:"center",sortable:!0,render:function(t,e){return t("div",[t("Tag",{props:{color:"primary"}},[e.row.weekCount,t("div",{style:{minWidth:"35px"}},e.row.weekCount)])])}}],data1:[],links:[{name:"采集统计",to:"/sys/count/collect"},{name:"上报统计",to:"/sys/count/upload"}],url:null,loginType:null,timer:""}},mounted:function(){"true"==this.$storage.getStorage("loginType")&&this.links.splice(1,1),this.showData(),this.timer=setInterval(this.showData,5e3)},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.collect.count.url).then((function(e){for(var a in t.tableloading=!1,t.data1=e.data.data,t.data1)"MOD_BUS_TCP_SLAVE"!=t.data1[a].channelType&&"MOD_BUS_RTU_SLAVE"!=t.data1[a].channelType&&"MOD_BUS_ASCII_SLAVE"!=t.data1[a].channelType||(t.data1[a].todayCount=t.data1[a].todayCount+"(推送)",t.data1[a].weekCount=t.data1[a].weekCount+"(推送)")}))}},beforeDestroy:function(){clearInterval(this.timer)}},n=(a("0334"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"700px",overflow:"auto"}},[a("Table",{attrs:{loading:t.tableloading,size:"small",border:"",columns:t.columns1,data:t.data1},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updateInterface(i)}}},[t._v("修改")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.deleteInterface(i)}}},[t._v("删除")])]}}])},[a("div",{attrs:{slot:"loading"},slot:"loading"},[a("div",{staticStyle:{height:"10px",width:"200px"}},[a("Row",[a("Col",{staticClass:"demo-spin-col",attrs:{span:"8"}},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[t._v("Loading")])],1)],1)],1)],1)])])],1)])])}),[],!1,null,"327a8cb2",null);e.default=s.exports},"59ca":function(t,e,a){},"5b62":function(t,e,a){t.exports=a.p+"img/logo.16f8b647.png"},"5d71":function(t,e,a){"use strict";a("1761")},"5d7f":function(t,e,a){"use strict";a("283d")},"5d9c":function(t,e,a){"use strict";a("08ec")},"5e07":function(t,e,a){"use strict";a("bce7")},"5e14":function(t,e,a){"use strict";a("a986")},"5e1d":function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"LogUpgrade",components:{jk_tabs:i.a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"访问IP",key:"clientIp",align:"center"},{title:"访问用户名",key:"username",align:"center"},{title:"描述",key:"describe",align:"center"},{title:"状态",align:"center",render:function(t,e){return t("p",e.row.state?"成功":"失败")}},{title:"访问时间",sortable:!0,align:"center",render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.createTime).format("yyyy-MM-dd hh:mm:ss"))}}],timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"createTime",order:!0}]}},links:[{name:"系统升级日志",to:"/logs/logUpgrade"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.upgrade.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")},query:function(){if(this.page.form.filters=[],""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"createTime",params:[t,e],type:"between"})}this.showData()}}},r=(a("a2e2"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"3f1cc405",null);e.default=o.exports},"5e7e":function(t,e,a){"use strict";var i=a("a593");e.a=new i.default},"5f3f":function(t,e,a){"use strict";a.r(e);var i={name:"ContentTabs",props:{links:{type:Array}},data:function(){return{loginType:null}},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1},methods:{common_event:function(t,e){this[t](e)},pass:function(t){alert(t)},nopass:function(t){alert(t)},okSelect:function(t){this.links[3].child[2].val=t}}},n=(a("f61c"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.links,(function(e,i){return a("div",{key:i,staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(e.title))]),a("div",{staticStyle:{margin:"15px 10px"}},t._l(e.child,(function(i,n){return a("div",{key:n,staticStyle:{float:"left","margin-bottom":"10px",width:"260px",height:"32px","text-align":"right"}},[e.arr?a("div",[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v(t._s(i.title))]),a("div",{staticStyle:{margin:"15px 10px",display:"flex","align-items":"center","flex-wrap":"wrap"}},t._l(i.child,(function(e,n){return a("div",{key:n,staticStyle:{"margin-bottom":"10px"}},[a("span",{staticStyle:{"margin-right":"25px","font-size":"12px"}},[t._v(t._s(e.name)+":")]),e.input?a("Input",{staticStyle:{width:"100px"},attrs:{val:e.data,disabled:i.disabled},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}}):t._e(),e.swith?a("i-Switch",{attrs:{val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关")])]):t._e(),e.pwd?a("Input",{staticStyle:{width:"100px"},attrs:{type:"password",val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}}):t._e(),e.select?a("Select",{staticStyle:{width:"100px"},attrs:{val:e.data},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"j.val"}},t._l(e.cityList,(function(e){return a("Option",{key:e.val,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1):t._e(),e.select?a("span",{staticStyle:{"margin-left":"5px"}},[t._v(" ")]):t._e(),e.sign?a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")]):t._e(),e.sign?t._e():a("span",{staticStyle:{"margin-left":"5px"}},[t._v(" ")])],1)})),0)])]):a("div",[a("span",{staticStyle:{"margin-right":"25px","font-size":"12px"}},[t._v(t._s(i.name)+":")]),t.loginType?a("span",[i.swith?a("i-Switch",{staticStyle:{margin:"5px 74px 0 0"},attrs:{size:"large",val:i.data},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"v.val"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]):t._e()],1):t._e(),t.loginType?t._e():a("span",[i.swith?a("i-Switch",{staticStyle:{margin:"5px 74px 0 0"},attrs:{size:"large",disabled:"disabled",val:i.data},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"v.val"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]):t._e()],1),i.input?a("Input",{staticStyle:{width:"130px"},attrs:{val:i.data,disabled:i.disabled},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"v.val"}}):t._e(),i.pwd?a("Input",{staticStyle:{width:"130px"},attrs:{type:"password",disabled:i.disabled,val:i.data},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"v.val"}}):t._e(),i.select?a("Select",{staticStyle:{width:"130px","text-align":"left","margin-right":"-8px"},attrs:{disabled:i.disabled,val:i.data},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"v.val"}},t._l(i.cityList,(function(e){return a("Option",{key:e.val,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1):t._e(),i.select?a("span",{staticStyle:{"margin-left":"5px"}},[t._v(" ")]):t._e(),i.input_select?a("Select",{staticClass:"select-box",attrs:{disabled:i.disabled},on:{"on-change":t.okSelect}},t._l(i.options,(function(e,i){return a("Option",{key:i,attrs:{value:e}},[t._v(t._s(e))])})),1):t._e(),i.input_select?a("Input",{staticClass:"input-box",attrs:{disabled:i.disabled,val:i.data},model:{value:i.val,callback:function(e){t.$set(i,"val",e)},expression:"v.val"}}):t._e(),i.sign?a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")]):t._e(),i.sign?t._e():a("span",{staticStyle:{"margin-left":"5px"}},[t._v(" ")])],1)])})),0)])})),0)}),[],!1,null,"1e8b7142",null);e.default=s.exports},6032:function(t,e,a){"use strict";a("6b23")},6096:function(t,e,a){},6339:function(t,e,a){"use strict";a("2af7")},6388:function(t,e,a){"use strict";a("0c52")},6417:function(t,e,a){"use strict";a("0f27")},"682b":function(t,e,a){"use strict";a("d821")},6889:function(t,e,a){"use strict";a("e240")},"6b23":function(t,e,a){},"6bb7":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACNElEQVRYR81X/1kCMQxNJtAR3ECcQNhAJ1AmMEwgTmA2ECaQDXQD2UDcQCaI36spX+93T+4+7D+l9K55SV5eekwnHnxi+9QIQEQE4FRVMdesN0S0VNWt7++IaKqqmLNHBYCITJj5zMzucQozrzDXrNX3AgAze2dmgN6a2T4C60JyACAi50T0QUQXXS9l7gPYTFW/255PASyJ6JGInvyFqc/vDWtECHsx5Hh37Ws480BEc1UNEWwaFQCqGv4TkRvnAHJdtwbgVcy5iIAr4ETwWEQMzqgqnusPIDPMjY/9BwDgANIITr0gXaq6KCNuTMEAEQAPYPyNiPAbAymbp2e3AhARkOw6E8xVWnpeVeARvE9HAcQoEYCWuOcx5GUQiyhwgwNw40E9PXox5CmIQ3kOCiAxjtJ7TXKfgliralBZjCE5ACM4uGw82sL+TlWjsHUDyCQfRAc5D0JU8jw9ouB5VgRyABxjvDMFXQCONd4JwPX9sgUIONQ77H2ECEpW156RcxAO/T9le2fOy870LkMPO1psq3Hfxw0pdNOm0QuAy+tncljU+IrnIoJmtBm0HYtIDHsTLw6lNko7FpFwESUicKCs74U6HwsAlCyQ0qMRQVREZnAAfkUD41fMvDEztNqZ9/jKtWsMAGD+HRF9gVxOsIKup0wcAwAIuM297/8FAOr6GSFNrtq/HYsZN12U1cTM6kqvXOYgKVJ020cHcDA6GsJ87Ng7N8LnXZYQdT041v7Jv45/ACdRazBOS8kYAAAAAElFTkSuQmCC"},"6f39":function(t,e,a){"use strict";a("0f59")},"6f50":function(t,e,a){"use strict";a("de33")},"707b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAMAAACecocUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QTI0NDJGMkY0RTU4MTFFQkFGOUM5MEQ4RDNCREMzQzQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QTI0NDJGMzA0RTU4MTFFQkFGOUM5MEQ4RDNCREMzQzQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMjQ0MkYyRDRFNTgxMUVCQUY5QzkwRDhEM0JEQzNDNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBMjQ0MkYyRTRFNTgxMUVCQUY5QzkwRDhEM0JEQzNDNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiOIZzwAAAAhUExURRLRSC7PWxbRSw/SRjrMYhPQR////xDRRhDQRg7RRf///5YWVEMAAAALdFJOU/////////////8ASk8B8gAAAEBJREFUeNpsjIEKgEAIQ1dd6fb/H9yMO5A4hfHUTeihqqz49MfRGI3vrZ/pBj06l3EKV218OcpDDmm94kS9AgwAI6EEWmMT4PIAAAAASUVORK5CYII="},7204:function(t,e,a){},7397:function(t,e,a){"use strict";a.r(e);var i={name:"Engineered",components:{jk_tabs:a("25b1").a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"状态",align:"center",render:function(t,e){return t("p",e.row.state?"成功":"失败")}},{title:"访问时间",align:"center",render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.createTime).format("yyyy-MM-dd hh:mm:ss"))}},{title:"操作",slot:"action",width:160,align:"center"}],loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"createTime",order:!0}]}},links:[{name:"工程导出",to:"/engineering/engineered"}]}},mounted:function(){"true"==this.$storage.getStorage("loginType")&&this.links.push({name:"配置同步",to:"/engineering/engineeredSynch"})},methods:{synch:function(){var t=this;this.loading=!0,this.$https.fetchGet(this.$api.collect.engineered.synch.url).then((function(e){200==e.data.code?(t.$Notice.success({title:"同步成功",duration:2.5}),t.loading=!1):(t.loading=!1,t.$Notice.error({title:"同步失败",desc:"错误："+e.data.describe,duration:2.5}))})).catch((function(e){t.loading=!1,t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}}},n=(a("0dbc"),a("c701")),s=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row box margin-x clear-margin padding-x"},[e("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[e("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[e("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:this.links}})],1)]),e("div",{staticClass:"modal-body"},[e("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[e("tr",{staticStyle:{height:"40px"}},[this._m(0),e("td",[e("Button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary",loading:this.loading},on:{click:this.synch}},[this._v("一键同步")])],1)])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","font-size":"12px","margin-right":"15px"}},[this._v("配置同步")])])}],!1,null,"486ca11d",null);e.default=s.exports},"74a9":function(t,e,a){"use strict";a.r(e);var i=(a("682b"),a("c701")),n=Object(i.a)({name:"Log",components:{},data:function(){return{}},mounted:function(){},methods:{}},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)],1)}),[],!1,null,"1f7d0240",null);e.default=n.exports},7669:function(t,e,a){"use strict";a("ba55")},"786b":function(t,e,a){"use strict";a.r(e),a("8dee");var i=a("25b1"),n=a("28f8"),s={inject:["reload"],props:{sourcePropData:Array},name:"StrategyAdd",components:{},data:function(){var t,e=this;return{checkedshow1:!1,checkedshow2:!1,checkedshow3:!1,checkedshow4:!1,llowStatus:!1,hhighStatus:!1,highStatus:!1,lowStatus:!1,timeshow:!0,timeswitch:!1,timeselectlist:"时间段",days:[],platForm:{show:!1,form:(t={uuid:"",strId:"",strName:"",strType:"",timeType:0,sjnLaterTime:"",sjdEndTime:"12:00:00",sjdRate:0,sjdStartTime:"00:00:00"},Object(n.a)(t,"sjnLaterTime",5),Object(n.a)(t,"sjnEndTime",12),Object(n.a)(t,"highAlarm",45),Object(n.a)(t,"highStatus",!1),Object(n.a)(t,"lowAlarm",5),Object(n.a)(t,"lowStatus",!1),Object(n.a)(t,"status",!1),Object(n.a)(t,"timestamp",0),Object(n.a)(t,"sourceUuid",""),Object(n.a)(t,"hhighAlarm",50),Object(n.a)(t,"llowAlarm",0),Object(n.a)(t,"hhighStatus",!1),Object(n.a)(t,"llowStatus",!1),t),rules:{strName:[{required:!0,message:"不能为空",trigger:"blur"},{required:!0,pattern:/^[\da-zA-Z\u4e00-\u9fa5_]{0,50}$/,message:"请输入中文数字或英文的组合",trigger:"blur"}],strType:[{required:!0,message:"不能为空",trigger:"blur"}],iface:[{validator:function(t,a,i){"时间段"==e.timeselectlist?(e.platForm.form.sjnEndTime<=0&&i(new Error("持续时间不能小于等于0")),e.platForm.form.sjnLaterTime<0?i(new Error("延迟开启时间不能小于0")):i()):(e.platForm.form.sjdStartTime||i(new Error("请选择开始时间")),e.platForm.form.sjdEndTime?i():i(new Error("请选择结束时间")))}}],lbModel:[{validator:function(t,a,i){e.platForm.form.llowAlarm>=e.platForm.form.lowAlarm&&i(new Error("低低报必须小于低报")),e.platForm.form.hhighAlarm<=e.platForm.form.highAlarm?i(new Error("高高报报必须大于高报")):i()}}]}},weeks:[{name:"每天",value:0},{name:"每周一",value:1},{name:"每周二",value:2},{name:"每周三",value:3},{name:"每周四",value:4},{name:"每周五",value:5},{name:"每周六",value:6},{name:"每周日",value:7}],modelList:[{name:"温度",val:"WD"},{name:"液体",val:"YW"},{name:"气体",val:"QT"},{name:"压力",val:"YL"}]}},computed:{},mounted:function(){},methods:{weeksListchange:function(){7==this.days.length?this.timeswitch=!0:this.timeswitch=!1},timeselectlistchange:function(){"时间段"==this.timeselectlist?this.timeshow=!0:this.timeshow=!1},timechange:function(){if(1==this.timeswitch)for(var t in this.days=[],this.weeks)this.days.push(this.weeks[t].value);else this.days=[]},addTest:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&("时间段"==t.timeselectlist?t.platForm.form.timeType=0:t.platForm.form.timeType=1,t.platForm.form.sourceUuid||(t.platForm.form.sourceUuid=null),t.$https.fetchPost(t.$api.strategy.addStrategyCfg.url,t.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"策略添加成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.reload()}),250)):t.$Notice.error({title:"策略添加失败",desc:"错误："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})})))}))},updateType:function(t){},showAddDrawer:function(){this.platForm.show=!0},addPlatForm:function(){}}},r=(a("5d71"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{attrs:{icon:"md-add-circle",type:"primary"},on:{click:t.showAddDrawer}},[t._v("\n        新增\n    ")]),a("Modal",{attrs:{title:"新增上报策略",width:"700"},model:{value:t.platForm.show,callback:function(e){t.$set(t.platForm,"show",e)},expression:"platForm.show"}},[a("Form",{ref:"plat_form",attrs:{rules:t.platForm.rules,model:t.platForm.form,"label-width":100}},[a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"规则名",prop:"strName"}},[a("Input",{staticStyle:{width:"100%"},attrs:{maxlength:50},model:{value:t.platForm.form.strName,callback:function(e){t.$set(t.platForm.form,"strName",e)},expression:"platForm.form.strName"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"过滤对象",prop:"strType"}},[a("Select",{staticStyle:{width:"100%"},model:{value:t.platForm.form.strType,callback:function(e){t.$set(t.platForm.form,"strType",e)},expression:"platForm.form.strType"}},t._l(t.modelList,(function(e){return a("Option",{key:e.name,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1)],1),a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"数据源对象",prop:"sourceUuid"}},[a("Select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.platForm.form.sourceUuid,callback:function(e){t.$set(t.platForm.form,"sourceUuid",e)},expression:"platForm.form.sourceUuid"}},t._l(t.sourcePropData,(function(e,i){return a("Option",{key:i,attrs:{value:e.uuid}},[t._v(t._s(e.sourceName))])})),1)],1),a("FormItem",{staticStyle:{"margin-bottom":"12px"},attrs:{label:"时效范围",prop:"iface"}},[a("RadioGroup",{staticStyle:{"margin-bottom":"10px"},on:{"on-change":t.timeselectlistchange},model:{value:t.timeselectlist,callback:function(e){t.timeselectlist=e},expression:"timeselectlist"}},[a("Radio",{attrs:{label:"时间段"}}),a("Radio",{attrs:{label:"时间内"}})],1),t.timeshow?a("div",{staticStyle:{"margin-bottom":"12px"}},[a("Input",{staticStyle:{width:"55px"},attrs:{type:"number"},model:{value:t.platForm.form.sjnLaterTime,callback:function(e){t.$set(t.platForm.form,"sjnLaterTime",e)},expression:"platForm.form.sjnLaterTime"}}),t._v("\n                       分钟后开启，持续\n                    "),a("Input",{staticStyle:{width:"55px"},attrs:{type:"number"},model:{value:t.platForm.form.sjnEndTime,callback:function(e){t.$set(t.platForm.form,"sjnEndTime",e)},expression:"platForm.form.sjnEndTime"}}),t._v("\n                        小时\n                ")],1):t._e(),t.timeshow?t._e():a("div",{staticStyle:{"margin-bottom":"12px"}},[t._v("\n                    开始:\n                    "),a("TimePicker",{staticStyle:{width:"135px","margin-right":"15px"},attrs:{format:"HH:mm:ss"},model:{value:t.platForm.form.sjdStartTime,callback:function(e){t.$set(t.platForm.form,"sjdStartTime",e)},expression:"platForm.form.sjdStartTime"}}),t._v("\n                    结束:\n                    "),a("TimePicker",{staticStyle:{width:"135px","margin-right":"15px"},attrs:{format:"HH:mm:ss"},model:{value:t.platForm.form.sjdEndTime,callback:function(e){t.$set(t.platForm.form,"sjdEndTime",e)},expression:"platForm.form.sjdEndTime"}}),t._v("\n                    频率:\n                    "),a("Select",{staticStyle:{width:"130px"},on:{"on-change":function(e){return t.weeksListchange()}},model:{value:t.platForm.form.sjdRate,callback:function(e){t.$set(t.platForm.form,"sjdRate",e)},expression:"platForm.form.sjdRate"}},t._l(t.weeks,(function(e){return a("Option",{key:e.value,model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},[t._v(t._s(e.name))])})),1)],1)],1),a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"子策略",prop:"lbModel"}},[a("Checkbox",{model:{value:t.platForm.form.hhighStatus,callback:function(e){t.$set(t.platForm.form,"hhighStatus",e)},expression:"platForm.form.hhighStatus"}}),a("span",[t._v("高高报: "),a("Input",{staticStyle:{width:"11%"},attrs:{number:""},model:{value:t.platForm.form.hhighAlarm,callback:function(e){t.$set(t.platForm.form,"hhighAlarm",e)},expression:"platForm.form.hhighAlarm"}})],1),a("Checkbox",{staticStyle:{"margin-left":"15px"},model:{value:t.platForm.form.highStatus,callback:function(e){t.$set(t.platForm.form,"highStatus",e)},expression:"platForm.form.highStatus"}}),a("span",[t._v("高报: "),a("Input",{staticStyle:{width:"11%"},attrs:{number:""},model:{value:t.platForm.form.highAlarm,callback:function(e){t.$set(t.platForm.form,"highAlarm",e)},expression:"platForm.form.highAlarm"}})],1),a("Checkbox",{staticStyle:{"margin-left":"15px"},model:{value:t.platForm.form.lowStatus,callback:function(e){t.$set(t.platForm.form,"lowStatus",e)},expression:"platForm.form.lowStatus"}}),a("span",[t._v("低报: "),a("Input",{staticStyle:{width:"11%"},attrs:{number:""},model:{value:t.platForm.form.lowAlarm,callback:function(e){t.$set(t.platForm.form,"lowAlarm",e)},expression:"platForm.form.lowAlarm"}})],1),a("Checkbox",{staticStyle:{"margin-left":"15px"},model:{value:t.platForm.form.llowStatus,callback:function(e){t.$set(t.platForm.form,"llowStatus",e)},expression:"platForm.form.llowStatus"}}),a("span",[t._v("低低报: "),a("Input",{staticStyle:{width:"11%"},attrs:{number:""},model:{value:t.platForm.form.llowAlarm,callback:function(e){t.$set(t.platForm.form,"llowAlarm",e)},expression:"platForm.form.llowAlarm"}})],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.platForm.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.addTest}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"7b2bd648",null).exports,l=a("c47e"),d={inject:["reload"],filters:{ellipsis:function(t){return t?t.length>50?t.slice(0,47)+"...":t:""},dateFormat:function(t){if(!t)return"";var e=new Date(t);function a(t){return t<10&&(t="0"+t),t}var i=e.getFullYear(),n=e.getMonth()+1,s=e.getDate(),r=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return i+"-"+a(n)+"-"+a(s)+" "+a(r)+":"+a(o)+":"+a(l)}},name:"StrategyList",components:{jk_tabs:i.a,Strategy_add:o,Pies:l.a},data:function(){var t=this;return{driveItemName:"",warnList:[{name:"全部",val:0},{name:"一般",val:1},{name:"严重",val:2}],PASSmodel:!0,password:"",confirmModal:!1,tablelogShow:!1,page:{datacount:0,page:1,currentPage:1},driveWarningTitle:"",drivecheckgroup:0,itemList:[],selected:[],strategyData:"",strategyBackupData:"",StrategyDatas:"",strategyListdata:[{name:"全通模式",val:"1"},{name:"工作模式",val:"2"},{name:"测试模式",val:"3"}],timeselectlist:"",weeks:[{name:"每天",value:0},{name:"每周一",value:1},{name:"每周二",value:2},{name:"每周三",value:3},{name:"每周四",value:4},{name:"每周五",value:5},{name:"每周六",value:6},{name:"每周日",value:7}],dataCount:0,currentPage:1,pageSize:10,columns1:[{title:"状态",type:"selection",align:"center",width:60},{title:"规则ID",key:"strId",align:"center"},{title:"规则名",key:"strName",align:"center"},{title:"过滤对象",key:"strType",align:"center",render:function(t,e){return"WD"==e.row.strType?t("div","温度-"+e.row.strType):"QT"==e.row.strType?t("div","气体-"+e.row.strType):"YW"==e.row.strType?t("div","液体-"+e.row.strType):t("div","压力-"+e.row.strType)}},{title:"数据源对象",key:"source",align:"center",slot:"driveList"},{title:"时效范围",key:"timeType",align:"center",slot:"timeType",width:160},{title:"子策略",slot:"lbModel",align:"center",width:240},{title:"状态",key:"status",align:"center",width:95,slot:"state"},{title:"操作",slot:"action",width:120,align:"center"}],checkedshow1:!1,checkedshow2:!1,checkedshow3:!1,checkedshow4:!1,llowStatus:!1,hhighStatus:!1,highStatus:!1,lowStatus:!1,timeshow:!0,timeswitch:!1,days:[],modelList:[{name:"温度",val:"WD"},{name:"液体",val:"YW"},{name:"气体",val:"QT"},{name:"压力",val:"YL"}],sourceData:[],platForm:{show:!1,form:{uuid:"",strId:"",strName:"",strType:"",timeType:0,sjdStartTime:"00:00:00",sjdEndTime:"12:00:00",sjdRate:0,sjnStartTime:0,sjnLaterTime:5,sjnEndTime:12,highAlarm:45,highStatus:!1,lowAlarm:5,lowStatus:!1,status:!1,timestamp:0,sourceUuid:"",hhighAlarm:50,llowAlarm:0,hhighStatus:!1,llowStatus:!1,source:""},rules:{strType:[{required:!0,message:"不能为空",trigger:"blur"}],iface:[{validator:function(e,a,i){"时间段"==t.timeselectlist?(t.platForm.form.sjnEndTime<=0&&i(new Error("持续时间不能小于等于0")),t.platForm.form.sjnLaterTime<0?i(new Error("延迟开启时间不能小于0")):i()):(t.platForm.form.sjdStartTime||i(new Error("请选择开始时间")),t.platForm.form.sjdEndTime?i():i(new Error("请选择结束时间")))}}],lbModel:[{validator:function(e,a,i){t.platForm.form.llowAlarm>=t.platForm.form.lowAlarm&&i(new Error("低低报必须小于低报")),t.platForm.form.hhighAlarm<=t.platForm.form.highAlarm?i(new Error("高高报报必须大于高报")):i()}}]}},data1:[],data3:[],stateTitle:"",stateContent:"",links:[{name:"策略管理",to:"/strategy/strategylist"},{name:"数据源对象",to:"/strategy/datasource"}],iconName:null,StatisticsModal:!1,pieData:[],resp:{Duuid:"",Suuid:""}}},mounted:function(){this.showData(1,10),this.getstrategyInfo(),this.getsourceinfo()},methods:{driveLogSerach:function(t,e){this.getDriveLoginfo(this.resp.Duuid,this.resp.Suuid,t,e)},cancelCheckidentity:function(){this.confirmModal=!1,this.strategyData=this.strategyBackupData},checkidentity:function(){var t=this,e=this.$storage.getStorage("userUuid");e=(e=e.replace('"',"")).replace('"',""),this.$https.fetchPost(this.$api.strategy.changeStrategyCheckUser.url,{userPwd:this.password,userUuid:e}).then((function(e){200==e.data.code?t.$https.fetchPost(t.$api.strategy.updateStrategyInfo.url,{type:t.StrategyDatas}).then((function(e){200==e.data.code?(t.$Notice.success({title:e.data.title,desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.confirmModal=!1,t.password="",t.getstrategyInfo()}),250)):t.$Notice.error({title:e.data.title,desc:"错误："+e.data.describe,duration:5})})).catch((function(a){t.$Notice.error({title:e.data.title,desc:a,duration:5})})):t.$Notice.error({title:e.data.title,desc:"错误："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})}))},pagechange:function(t){this.page.page=t,this.getDriveLoginfo(this.resp.Duuid,this.resp.Suuid)},getDriveLoginfo:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.resp.Duuid=t,this.resp.Suuid=e;var s={alarmLevel:n,itemName:i,num:10,uuid:t};this.$https.fetchPost(this.$api.strategy.findStrategyAlarmLog.url,s).then((function(t){200==t.data.code?(a.tablelogShow=!0,a.itemList=t.data.data.data,0==a.itemList.length&&(a.itemList=[{alarmMsg:"暂无数据"}]),a.page.datacount=t.data.data.count):a.$Notice.error({title:"数据源对象添加失败",desc:"错误："+t.data.desc,duration:5})})).catch((function(t){a.$Notice.error({title:"请求失败",desc:t,duration:5})}))},getDriveLogData:function(t,e,a){this.page.page=1,this.page.currentPage=1,this.getDriveLoginfo(t,e),this.driveWarningTitle=a},showNode:function(t){var e=this,a=t.uuid+"%23"+t.strId;this.itemList=[],this.driveWarningTitle="",this.drivecheckgroup=0,this.StatisticsModal=!0,this.tablelogShow=!1,this.$https.fetchGet(this.$api.strategy.strategyAlarmCount.url+"/"+a).then((function(a){200==a.data.code?(e.pieData=a.data.data,e.$refs.pies.chart(e.pieData,t.strId,t.uuid)):e.$Notice.error({title:"数据源对象添加失败",desc:"错误："+a.data.desc,duration:5})})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:5})}))},getsourceinfo:function(){var t=this;this.$https.fetchGet(this.$api.strategy.findStrategyDataSourceAll.url).then((function(e){200==e.data.code?t.sourceData=e.data.data:t.$Notice.error({title:"数据源对象添加失败",desc:"错误："+e.data.desc,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})}))},delNode:function(t){var e=this;this.$Modal.confirm({title:"删除策略",content:"<p>当前删除的是"+t.strName+",请确认删除</p>",onOk:function(){e.$https.fetchPost(e.$api.strategy.deleteStrategy.url+"/"+t.uuid).then((function(t){200==t.data.code?(e.$Notice.success({title:"策略删除成功",desc:"正在刷新界面",duration:2}),setTimeout((function(){e.showData(e.currentPage,10)}),250)):e.$Notice.error({title:"策略删除失败",desc:"错误："+t.data.describe,duration:5}),e.$Modal.remove()})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:5}),e.$Modal.remove()}))}})},batchOpen:function(){var t=this,e=[];for(var a in this.selected)e.push(this.selected[a].uuid);0!=e.length?this.$https.fetchPost(this.$api.strategy.batchStartStrategy.url,e).then((function(e){200==e.data.code?(t.$Notice.success({title:e.data.title,desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.showData(t.currentPage,10)}),250)):t.$Notice.error({title:e.data.title,desc:"错误："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:resp.data.title,desc:e,duration:5})})):this.$Notice.error({title:"批量启动失败",desc:"没有勾选策略",duration:2})},batchColse:function(){var t=this,e=[];for(var a in this.selected)e.push(this.selected[a].uuid);0!=e.length?this.$https.fetchPost(this.$api.strategy.batchStopStrategy.url,e).then((function(e){200==e.data.code?(t.$Notice.success({title:e.data.title,desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.showData(t.currentPage,10)}),250)):t.$Notice.error({title:e.data.title,desc:"错误："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:resp.data.title,desc:e,duration:5})})):this.$Notice.error({title:"批量关闭失败",desc:"没有勾选策略",duration:5})},batchDelete:function(){var t=this,e=[];for(var a in this.selected)e.push(this.selected[a].uuid);this.$https.fetchPost(this.$api.strategy.batchStopStrategy.url,e).then((function(e){200==e.data.code?(t.$Notice.success({title:e.data.title,desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.showData(t.currentPage,10)}),250)):t.$Notice.error({title:e.data.title,desc:"错误代码："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:resp.data.title,desc:e,duration:5})}))},updateChecked:function(){for(var t=0;t<this.data3.length;t++){this.data3[t]._checked=!1;for(var e=0;e<this.selected.length;e++)this.selected[e].uuid===this.data3[t].uuid&&(this.data3[t]._checked=!0)}},handleCancel:function(t,e){this._.remove(this.selected,(function(t){return t.path===e.path}))},handleSelect:function(t,e){this.selected.push(e)},handleSelectAll:function(t){this.selected=this._.uniqBy(this.selected.concat(t),"uuid")},handleCancelSelectAll:function(t){this.selected=this._.differenceBy(this.selected,this.data3,"uuid")},changeStrategyData:function(t){this.StrategyDatas=t,this.confirmModal=!0},strategyListdatafocus:function(t){},changepage:function(t){this.currentPage=t,this.showData(t,10)},getstrategyInfo:function(){var t=this;this.$https.fetchGet(this.$api.strategy.strategyInfo.url).then((function(e){200==e.status?(t.strategyData=e.data.data.type,t.strategyBackupData=e.data.data.type,"PASS"==t.strategyData?t.PASSmodel=!1:t.PASSmodel=!0):t.$Notice.error({title:"获取数据失败",desc:"错误："+e.data.desc,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})}))},showData:function(t,e){var a=this;this.$https.fetchPost(this.$api.strategy.findStrategyByPage.url,{page:t,size:e,sorts:[{filed:"strId",order:!0}]}).then((function(t){for(var e in a.data1=t.data.data.data,a.dataCount=t.data.data.count,a.data3=a._.cloneDeep(t.data.data.data),a.data1.length<a.pageSize?a.data3=a.data3:a.data3=a._.cloneDeep(a.data1.slice(0,a.pageSize)),a.data3)0==a.data3[e].status?(a.data3[e].status="禁用",a.data3[e].color="red",a.data3[e].iconName="ios-pause"):(a.data3[e].status="启用",a.data3[e].color="green",a.data3[e].iconName="ios-play");a.updateChecked()})).catch((function(t){}))},updateState:function(t,e){var a=this;if("禁用"==this.data1[e].status||0==this.data1[e].status){this.stateTitle="启用策略",this.stateContent="确定要启用此策略吗?";var i=this.$api.strategy.batchStartStrategy.url;(n=[]).push(t.uuid)}else{var n;this.stateTitle="禁用策略",this.stateContent="确定要禁用此策略吗?",i=this.$api.strategy.batchStopStrategy.url,(n=[]).push(t.uuid)}this.$Modal.confirm({title:this.stateTitle,content:"<p>"+this.stateContent+"</p>",onOk:function(){a.$https.fetchPost(i,n).then((function(t){200==t.data.code?(a.$Notice.success({title:"策略启停成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){a.showData(a.currentPage,10)}),250)):a.$Notice.error({title:"策略启停失败",desc:"错误代码："+t.data.desc,duration:2.5})})).catch((function(t){a.$Notice.error({title:"请求失败",desc:t,duration:2.5})}))}})},updateNode:function(t,e){1==e||"启用"==e?this.$Modal.info({title:"警告",content:"策略启用时无法操作，请将策略状态调整为禁用后再操作"}):(this.platForm.show=!0,this.platForm.form=this.data1[t],this.platForm.form.llowStatus?this.checkedshow1=!0:this.checkedshow1=!1,this.platForm.form.hhighStatus?this.checkedshow2=!0:this.checkedshow2=!1,this.platForm.form.highStatus?this.checkedshow3=!0:this.checkedshow3=!1,this.platForm.form.lowStatus?this.checkedshow4=!0:this.checkedshow4=!1,1==this.platForm.form.timeType?(this.timeselectlist="时间内",this.timeshow=!1):(this.timeselectlist="时间段",this.timeshow=!0),this.platForm.form.sourceUuid=this.data1[t].source.uuid)},weeksListchange:function(){7==this.days.length?this.timeswitch=!0:this.timeswitch=!1},timeselectlistchange:function(){"时间段"==this.timeselectlist?this.timeshow=!0:this.timeshow=!1},timechange:function(){if(1==this.timeswitch)for(var t in this.days=[],this.weeks)this.days.push(this.weeks[t].value);else this.days=[]},updateTest:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&("时间段"==t.timeselectlist?t.platForm.form.timeType=0:t.platForm.form.timeType=1,t.platForm.form.sourceUuid||(t.platForm.form.sourceUuid=null),t.$https.fetchPost(t.$api.strategy.updateStrategyCfg.url,t.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"策略修改成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.platForm.show=!1,t.showData(t.currentPage,10)}),250)):t.$Notice.error({title:"策略修改失败",desc:"错误："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})})))}))}}},c=(a("27a2"),Object(r.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row box margin-x clear-margin padding-x"},[i("div",{staticClass:"modal-header",staticStyle:{"border-bottom":"1px solid #a9a9a9","padding-bottom":"5px"}},[i("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[i("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),t.PASSmodel?i("Strategy_add",{staticStyle:{float:"right"},attrs:{sourcePropData:t.sourceData}}):t._e(),t.PASSmodel?t._e():i("Button",{staticStyle:{float:"right"},attrs:{icon:"md-add-circle",disabled:"",type:"primary"}},[t._v("新增")])],1)]),i("div",{staticClass:"modal-body"},[i("div",{staticStyle:{"margin-bottom":"10px"}},[i("span",[i("span",{staticStyle:{"font-size":"13px"}},[t._v("工作模式:  ")]),i("RadioGroup",{staticStyle:{"margin-top":"4px","margin-left":"2px"},on:{"on-change":t.changeStrategyData},model:{value:t.strategyData,callback:function(e){t.strategyData=e},expression:"strategyData"}},[i("Tooltip",{attrs:{placement:"bottom-start",content:"允许所有数据通过,不产生过滤日志,也不拦截数据"}},[i("Radio",{staticStyle:{width:"75px"},attrs:{label:"PASS",value:"PASS"}},[t._v("全通模式")])],1),i("Tooltip",{attrs:{placement:"bottom-start",content:"对符合规则的数据进行过滤,拦截数据,产生过滤日志"}},[i("Radio",{staticStyle:{width:"75px"},attrs:{label:"WORK",value:"WORK"}},[t._v("工作模式")])],1),i("Tooltip",{attrs:{placement:"bottom-start",content:"对符合规则的数据进行过滤,产生过滤日志"}},[i("Radio",{staticStyle:{width:"75px"},attrs:{label:"TEST",value:"TEST"}},[t._v("测试模式")])],1)],1),t.PASSmodel?i("Button",{staticStyle:{float:"right",margin:"0 5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.batchColse()}}},[t._v("批量关闭")]):t._e(),t.PASSmodel?i("Button",{staticStyle:{float:"right",margin:"0 5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.batchOpen()}}},[t._v("批量开启")]):t._e(),t.PASSmodel?t._e():i("Button",{staticStyle:{float:"right",margin:"0 5px"},attrs:{type:"primary",disabled:"",size:"small"},on:{click:function(e){return t.batchColse()}}},[t._v("批量关闭")]),t.PASSmodel?t._e():i("Button",{staticStyle:{float:"right",margin:"0 5px"},attrs:{type:"primary",disabled:"",size:"small"},on:{click:function(e){return t.batchOpen()}}},[t._v("批量开启")])],1)]),i("Table",{ref:"selection",attrs:{size:"small",border:"",columns:t.columns1,data:t.data3},on:{"on-select-all-cancel":t.handleCancelSelectAll,"on-select-all":t.handleSelectAll,"on-select":t.handleSelect,"on-select-cancel":t.handleCancel},scopedSlots:t._u([{key:"driveList",fn:function(e){var a=e.row;return[a.source?i("div",[t._v("\n                        "+t._s(a.source.sourceName)+"\n                    ")]):t._e()]}},{key:"timeType",fn:function(e){var a=e.row;return["启用"==a.status?i("div",[1==a.timeType?i("div",[t._v("\n                            "+t._s(a.sjdStartTime)+" - "+t._s(a.sjdEndTime)+"\n                        ")]):t._e(),0==a.timeType?i("div",[t._v("\n                            "+t._s(t.$util.time_stamp2time_date(a.sjnStartTime,"yyyy-MM-dd h:m:s").format("yyyy-MM-dd h:m:s"))+"\n                        ")]):t._e()]):t._e(),"禁用"==a.status?i("div",[t._v("禁用中")]):t._e()]}},{key:"lbModel",fn:function(e){var n=e.row;return[i("div",{},[i("span",{staticStyle:{"text-align":"center",display:"inline-block",width:"20%",margin:"0 4px"}},[i("img",{staticStyle:{margin:"0 4px"},attrs:{src:a("3cf6"),alt:""}}),t._v(t._s(n.hhighAlarm))]),i("span",{staticStyle:{"text-align":"center",display:"inline-block",width:"20%","margin-right":"4px"}},[i("img",{staticStyle:{width:"13px",height:"15px"},attrs:{src:a("0791"),alt:""}}),t._v(t._s(n.highAlarm))]),i("span",{staticStyle:{"text-align":"center",display:"inline-block",width:"20%","margin-left":"4px"}},[i("img",{staticStyle:{width:"13px",height:"15px"},attrs:{src:a("a8f3"),alt:""}}),t._v(t._s(n.lowAlarm))]),i("span",{staticStyle:{"text-align":"center",display:"inline-block",width:"20%",margin:"0 4px"}},[i("img",{staticStyle:{margin:"0 4px"},attrs:{src:a("707b"),alt:""}}),t._v(t._s(n.llowAlarm))])])]}},{key:"state",fn:function(e){var a=e.row,n=e.index;return[t.data3[n].iconName?i("Button",{staticStyle:{margin:"0 auto",width:"80px"},attrs:{icon:t.data3[n].iconName,size:"small"},nativeOn:{click:function(e){return t.updateState(a,n)}}},[i("span",{style:{color:t.data3[n].color}},[t._v("\n                            "+t._s(a.status)+"\n                        ")])]):t._e()]}},{key:"action",fn:function(e){var n=e.row,s=e.index;return[i("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"}},[i("Tooltip",{attrs:{placement:"top",content:"统计"}},[i("div",{staticStyle:{margin:"0 5px",cursor:"pointer"},on:{click:function(e){return t.showNode(n)}}},[i("img",{attrs:{src:a("e52e"),width:"21px",height:"20px",alt:""}})])]),i("Tooltip",{attrs:{placement:"top",content:"删除"}},[t.PASSmodel?i("div",{staticStyle:{margin:"0 5px",cursor:"pointer"},on:{click:function(e){return t.delNode(n)}}},[i("img",{attrs:{src:a("cd32"),width:"21px",height:"18.5px",alt:""}})]):t._e()]),i("Tooltip",{attrs:{placement:"top",content:"修改"}},[t.PASSmodel?i("div",{staticStyle:{margin:"0 7px",cursor:"pointer"},on:{click:function(e){return t.updateNode(s,n.status)}}},[i("img",{attrs:{src:a("6bb7"),width:"21px",height:"18.5px",alt:""}})]):t._e()])],1)]}}])}),i("Page",{staticStyle:{"margin-top":"10px"},attrs:{current:t.currentPage,total:t.dataCount,"show-elevator":"","page-size":t.pageSize,"show-total":!0},on:{"update:current":function(e){t.currentPage=e},"on-change":t.changepage}})],1)]),i("Modal",{attrs:{title:"修改上报策略",width:"700"},model:{value:t.platForm.show,callback:function(e){t.$set(t.platForm,"show",e)},expression:"platForm.show"}},[i("Form",{ref:"plat_form",attrs:{rules:t.platForm.rules,model:t.platForm.form,"label-width":100}},[i("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"规则名",prop:"strName"}},[i("Input",{staticStyle:{width:"100%"},attrs:{maxlength:50,disabled:""},model:{value:t.platForm.form.strName,callback:function(e){t.$set(t.platForm.form,"strName",e)},expression:"platForm.form.strName"}})],1),i("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"过滤对象",prop:"strType"}},[i("Select",{staticStyle:{width:"100%"},model:{value:t.platForm.form.strType,callback:function(e){t.$set(t.platForm.form,"strType",e)},expression:"platForm.form.strType"}},t._l(t.modelList,(function(e){return i("Option",{key:e.name,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1)],1),i("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"数据源对象",prop:"sourceUuid"}},[i("Select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.platForm.form.sourceUuid,callback:function(e){t.$set(t.platForm.form,"sourceUuid",e)},expression:"platForm.form.sourceUuid"}},t._l(t.sourceData,(function(e,a){return i("Option",{key:a,staticStyle:{width:"100%",overflow:"hidden"},attrs:{label:e.sourceName,value:e.uuid}},[i("Tooltip",{attrs:{placement:"right",content:e.sourceContent}},[i("span",[t._v(t._s(e.sourceName))])]),i("span",{staticStyle:{"text-align":"right",width:"65%",float:"right",color:"#ccc","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"}},[t._v(t._s(t._f("ellipsis")(e.sourceContent)))])],1)})),1)],1),i("FormItem",{staticStyle:{"margin-bottom":"12px"},attrs:{label:"时效范围",prop:"timeselectlist"}},[i("RadioGroup",{staticStyle:{"margin-bottom":"10px"},on:{"on-change":t.timeselectlistchange},model:{value:t.timeselectlist,callback:function(e){t.timeselectlist=e},expression:"timeselectlist"}},[i("Radio",{attrs:{label:"时间内"}}),i("Radio",{attrs:{label:"时间段"}})],1),t.timeshow?i("div",{staticStyle:{"margin-bottom":"12px"}},[i("Input",{staticStyle:{width:"55px"},attrs:{type:"number"},model:{value:t.platForm.form.sjnLaterTime,callback:function(e){t.$set(t.platForm.form,"sjnLaterTime",e)},expression:"platForm.form.sjnLaterTime"}}),t._v("\n                       分钟后开启，持续\n                    "),i("Input",{staticStyle:{width:"55px"},attrs:{type:"number"},model:{value:t.platForm.form.sjnEndTime,callback:function(e){t.$set(t.platForm.form,"sjnEndTime",e)},expression:"platForm.form.sjnEndTime"}}),t._v("\n                        小时\n                ")],1):t._e(),t.timeshow?t._e():i("div",{staticStyle:{"margin-bottom":"12px"}},[t._v("\n                    开始:\n                    "),i("TimePicker",{staticStyle:{width:"135px","margin-right":"15px"},attrs:{format:"HH:mm:ss"},model:{value:t.platForm.form.sjdStartTime,callback:function(e){t.$set(t.platForm.form,"sjdStartTime",e)},expression:"platForm.form.sjdStartTime"}}),t._v("\n                    结束:\n                    "),i("TimePicker",{staticStyle:{width:"135px","margin-right":"15px"},attrs:{format:"HH:mm:ss"},model:{value:t.platForm.form.sjdEndTime,callback:function(e){t.$set(t.platForm.form,"sjdEndTime",e)},expression:"platForm.form.sjdEndTime"}}),t._v("\n                    频率:\n                    "),i("Select",{staticStyle:{width:"130px"},on:{"on-change":function(e){return t.weeksListchange()}},model:{value:t.platForm.form.sjdRate,callback:function(e){t.$set(t.platForm.form,"sjdRate",e)},expression:"platForm.form.sjdRate"}},t._l(t.weeks,(function(e){return i("Option",{key:e.value,model:{value:e.value,callback:function(a){t.$set(e,"value",a)},expression:"item.value"}},[t._v(t._s(e.name))])})),1)],1)],1),i("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"子策略",prop:"lbModel"}},[i("Checkbox",{model:{value:t.platForm.form.hhighStatus,callback:function(e){t.$set(t.platForm.form,"hhighStatus",e)},expression:"platForm.form.hhighStatus"}}),i("span",[t._v("高高报: "),i("Input",{staticStyle:{width:"11%"},attrs:{number:""},model:{value:t.platForm.form.hhighAlarm,callback:function(e){t.$set(t.platForm.form,"hhighAlarm",e)},expression:"platForm.form.hhighAlarm"}})],1),i("Checkbox",{staticStyle:{"margin-left":"15px"},model:{value:t.platForm.form.highStatus,callback:function(e){t.$set(t.platForm.form,"highStatus",e)},expression:"platForm.form.highStatus"}}),i("span",[t._v("高报: "),i("Input",{staticStyle:{width:"11%"},attrs:{number:""},model:{value:t.platForm.form.highAlarm,callback:function(e){t.$set(t.platForm.form,"highAlarm",e)},expression:"platForm.form.highAlarm"}})],1),i("Checkbox",{staticStyle:{"margin-left":"15px"},model:{value:t.platForm.form.lowStatus,callback:function(e){t.$set(t.platForm.form,"lowStatus",e)},expression:"platForm.form.lowStatus"}}),i("span",[t._v("低报: "),i("Input",{staticStyle:{width:"11%"},attrs:{number:""},model:{value:t.platForm.form.lowAlarm,callback:function(e){t.$set(t.platForm.form,"lowAlarm",e)},expression:"platForm.form.lowAlarm"}})],1),i("Checkbox",{staticStyle:{"margin-left":"15px"},model:{value:t.platForm.form.llowStatus,callback:function(e){t.$set(t.platForm.form,"llowStatus",e)},expression:"platForm.form.llowStatus"}}),i("span",[t._v("低低报: "),i("Input",{staticStyle:{width:"11%"},attrs:{number:""},model:{value:t.platForm.form.llowAlarm,callback:function(e){t.$set(t.platForm.form,"llowAlarm",e)},expression:"platForm.form.llowAlarm"}})],1)],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.platForm.show=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary",size:"large"},on:{click:t.updateTest}},[t._v("确定")])],1)],1),i("Modal",{attrs:{title:"拦截统计",width:"80%"},model:{value:t.StatisticsModal,callback:function(e){t.StatisticsModal=e},expression:"StatisticsModal"}},[i("div",{staticStyle:{display:"flex",height:"90%","justify-content":"center",position:"relative"}},[i("Pies",{ref:"pies",staticStyle:{width:"48%",height:"401px"},attrs:{warning:t.drivecheckgroup,id:"1"},on:{sendDriveLogData:t.getDriveLogData}}),t.tablelogShow?i("div",{staticStyle:{width:"47%",height:"420px","margin-left":"3%"}},[i("div",{staticStyle:{height:"92%","overflow-y":"scroll",background:"#fff"}},[i("table",{staticStyle:{width:"100%","border-collapse":"collapse"},attrs:{dataArr:t.pieData}},[i("thead",{staticStyle:{"border-bottom":"1px","line-height":"33px","font-weight":"bold"}},[i("tr",{staticStyle:{"background-color":"#eee"}},[i("span",{staticStyle:{"margin-left":"10%"}},[t._v(t._s(t.driveWarningTitle))]),i("div",{staticStyle:{float:"right","margin-right":"10px"}},[i("Input",{staticStyle:{width:"auto"},attrs:{suffix:"ios-search",placeholder:"请输入具体节点名"},model:{value:t.driveItemName,callback:function(e){t.driveItemName=e},expression:"driveItemName"}}),i("Select",{staticStyle:{width:"60px"},model:{value:t.drivecheckgroup,callback:function(e){t.drivecheckgroup=e},expression:"drivecheckgroup"}},t._l(t.warnList,(function(e){return i("Option",{key:e.val,attrs:{value:e.val}},[t._v(t._s(e.name))])})),1),i("Button",{attrs:{type:"primary"},on:{click:function(e){return t.driveLogSerach(t.driveItemName,t.drivecheckgroup)}}},[t._v("查询")])],1)])])]),t._l(t.itemList,(function(e,a){return i("ul",{key:a,staticClass:"connectList agile-list"},[i("li",{class:2==e.alarmType?"danger-element":"warning-element",staticStyle:{width:"100%","table-layout":"fixed",maring:"10px"}},[t._v("\n                            "+t._s(10*(t.page.page-1)+a+1+". ")+" "+t._s(e.alarmMsg)+"\n                            "),i("div",{staticClass:"agile-detail"},["暂无数据"!=e.alarmMsg?i("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-time",size:"12"}}):t._e(),t._v("\n                                "+t._s(t._f("dateFormat")(e.alarmTime))+"\n                            ")],1)])])}))],2)]):t._e()],1),i("div",{attrs:{slot:"footer"},slot:"footer"})]),i("Modal",{attrs:{title:"验证身份",closable:!1,"mask-closable":!1,width:"450"},model:{value:t.confirmModal,callback:function(e){t.confirmModal=e},expression:"confirmModal"}},[i("div",{},[t._v("\n           请输入密码： "),i("Input",{staticStyle:{width:"300px"},attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{size:"large"},on:{click:function(e){return t.cancelCheckidentity()}}},[t._v("取消")]),i("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.checkidentity()}}},[t._v("确定")])],1)])],1)}),[],!1,null,"df126882",null));e.default=c.exports},"7edb":function(t,e,a){"use strict";a("a084")},8152:function(t,e,a){"use strict";a("58da")},"84a9":function(t,e,a){},"84df":function(t,e,a){"use strict";function i(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var i in a)if(new RegExp("(".concat(i,")")).test(e)){var s=a[i]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?s:n(s))}return e}function n(t){return("00"+t).substr(t.length)}a.d(e,"a",(function(){return i})),a("3269"),a("8dee")},8526:function(t,e,a){},8620:function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"ReportingServiceInfo",components:{jk_tabs:i.a},data:function(){return{columns1:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"名称",key:"name",align:"center"},{title:"描述",key:"remark",align:"center"},{title:"协议",key:"driveType",align:"center"},{title:"创建时间",key:"createTime",align:"center"}],data1:[],links:[{name:"转发服务",to:"/engineering/reportingService/info"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.upload.channelInfo.url).then((function(e){for(var a in t.data1=e.data.data,t.data1)t.data1[a].createTime=t.formatDate(t.data1[a].createTime)})).catch((function(t){}))},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")}}},r=(a("a2cd"),a("c701")),o=Object(r.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid",staticStyle:{"min-width":"0",flex:"1"}},[e("div",{staticClass:"row box margin-x clear-margin padding-x"},[e("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[e("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[e("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:this.links}})],1)]),e("div",{staticClass:"modal-body",staticStyle:{height:"715px",overflow:"auto"}},[e("Table",{attrs:{size:"small",border:"",columns:this.columns1,data:this.data1}})],1)])])}),[],!1,null,"110bfdbb",null);e.default=o.exports},"86b3":function(t,e,a){},"86c5":function(t,e,a){"use strict";a.r(e),a("8dee");var i=a("ddcb"),n=(a("a450"),{components:{vBaseChart:i.a},props:{flow:Array},data:function(){return{init:!0,flows:{}}},methods:{handleMsg:function(t,e){for(var a in t){var i=t[a],n=i.name,s=i.displayName,r=this.$util.time_stamp2time_date(i.time).format("hh:mm:ss"),o=i.recvSpeed,l=i.sendSpeed;if(e.hasOwnProperty(n)){var d=e[n].option.xAxis.data,c=e[n].option.series[0].data,p=e[n].option.series[1].data;d.length>=10?(d.shift(),c.shift(),p.shift()):(d.push(r),c.push(o),p.push(l))}else e[n]=this.getDefFlow(n,s,r,o,l);e[n].show=!0,e[n].refresh=new Date}},getDefFlow:function(t,e,a,i,n){return{id:t,show:!1,option:{title:{text:"网络流量情况",subtext:t+":"+e,textStyle:{fontSize:14},top:0},tooltip:{trigger:"axis"},legend:{data:["接收速率","发送速率"]},grid:{bottom:"30px",left:"70px",top:"54px"},xAxis:{type:"category",boundaryGap:!1,data:[a]},yAxis:{type:"value",axisLabel:{formatter:function(t,e){var a=1048576,i=1073741824,n=1099511627776;return t<1024?t+="/B":t>=1024&&t<a?t=parseInt(t/1024)+"/KB":t>=a&&t<i?t=parseInt(t/a)+"/MB":t>=i&&t<n?t=parseInt(t/i)+"/GB":t>=n&&(t=parseInt(t/n)+"/TB"),t}}},series:[{name:"接收速率",smooth:!0,type:"line",data:[i]},{name:"发送速率",smooth:!0,type:"line",data:[n]}]},refresh:0}}},watch:{flow:function(t,e){var a;this.init?(a={},this.handleMsg(t,a),this.flows=a,this.init=!1):(a=this.flows,this.handleMsg(t,a))}}}),s=(a("f8ba"),a("c701")),r=Object(s.a)(n,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Tabs",{attrs:{value:""}},this._l(this.flows,(function(t,a){return e("TabPane",{key:a,attrs:{label:t.id,name:t.id}},[e("vBaseChart",{staticStyle:{height:"300px"},attrs:{opt:t}})],1)})),1)],1)}),[],!1,null,"1ccf45f7",null).exports,o={components:{vBaseChart:i.a,Flow:r},data:function(){return{cpu:{id:"cpu",show:!0,option:{visualMap:{show:!1,type:"continuous",seriesIndex:0,min:0,max:100},tooltip:{trigger:"axis"},grid:{bottom:"30px",left:"30px",top:"20px"},xAxis:{data:[]},yAxis:{splitLine:{show:!1},min:0,max:100},series:{type:"line",showSymbol:!1,symbolSize:8,symbol:"circle",markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},data:[]}},refresh:0},mem:{id:"mem",show:!0,option:{tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{bottom:"30px",left:"30px",top:"20px"},xAxis:{type:"category",data:["内存使用率"]},yAxis:{type:"value",min:0,max:100},series:[{name:"已使用",type:"bar",data:[0]},{name:"未使用",type:"bar",data:[0]}]},refresh:0},flow:{id:"flow",show:!0,option:{title:{text:"网络流量情况",textStyle:{fontSize:14},top:0},tooltip:{trigger:"axis"},legend:{data:["上行流量","下行流量"]},grid:{bottom:"30px",left:"30px",top:"30px"},xAxis:{type:"category",boundaryGap:!1,data:["周一","周二","周三","周四","周五","周六","周日"]},yAxis:{type:"value"},series:[{name:"上行流量",smooth:!0,type:"line",data:[120,132,101,134,90,230,210]},{name:"下行流量",smooth:!0,type:"line",data:[220,182,191,234,290,330,310]}]},refresh:0},hard:{disk:[],baseboard:null,cpu:null},sys:{dns:[],runTime:null,gateway:null},flowOpt:{},webSocket:null}},mounted:function(){this.connWebSocket()},methods:{connWebSocket:function(){var t,e=this,a=this.$https.getAxios().defaults.baseURL;t=a.indexOf("https://")>=0?a.replace("https://","wss://")+"/collect/runner":a.replace("http://","ws://")+"/collect/runner";var i=new WebSocket(t);i.onmessage=this.$options.methods.handleMsg.bind(this),i.onopen=function(t){e.send()},i.onerror=function(t){},i.onclose=function(t){},this.webSocket=i},closeWebSocket:function(){null!=this.webSocket&&this.webSocket.close()},handleMsg:function(t){var e=JSON.parse(t.data);if(e.hard&&(this.hard=e.hard),e.sys&&(e.sys.runTime=this.getDuration(e.sys.runTime),this.sys=e.sys),e.mem){var a=e.mem[0],i=e.mem[1],n=a-i;this.mem.option.series[0].data=[parseInt(n/a*100)],this.mem.option.series[1].data=[parseInt(i/a*100)],this.mem.refresh=new Date}if(e.cpu){var s=this.$util.time_stamp2time_date(e.cpu[0]).format("hh:mm:ss"),r=e.cpu[1],o=this.cpu.option.xAxis.data,l=this.cpu.option.series.data;o.length>=10&&(o.shift(),l.shift()),o.push(s),l.push(r),this.cpu.refresh=new Date}JSON.parse(e).netIfs&&(this.flowOpt=JSON.parse(e).netIfs)},send:function(){this.webSocket.send(JSON.stringify({instruct:"MONITOR_COLLECT_DEV"}))},getDuration:function(t){var e=t/1e3/60/60/24,a=Math.floor(e),i=t/1e3/60/60-24*a,n=Math.floor(i),s=t/1e3/60-1440*a-60*n,r=Math.floor(s);return a+"天"+n+"时"+r+"分"+(t/1e3-86400*a-3600*n-60*r)+"秒"}},beforeDestroy:function(){this.closeWebSocket()}},l=(a("6889"),Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-view"},[a("div",{staticClass:"content"},[a("h2",{staticClass:"title"},[t._v("运行信息")]),a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:"9"}},[a("div",{staticClass:"box"},[a("h4",[t._v("cpu整体使用情况")]),a("vBaseChart",{staticStyle:{height:"220px"},attrs:{opt:t.cpu}})],1)]),a("Col",{attrs:{span:"9"}},[a("div",{staticClass:"box"},[a("h4",[t._v("内存整体使用情况")]),a("vBaseChart",{staticStyle:{height:"220px"},attrs:{opt:t.mem}})],1)]),a("Col",{attrs:{span:"6"}},[a("div",{staticClass:"box"},[a("h4",[t._v("系统运行信息")]),a("List",{staticStyle:{padding:"12px",height:"220px"}},[a("ListItem",[a("strong",[t._v("运行时长:")]),a("span",[t._v(t._s(t.sys.runTime))])]),a("ListItem",[a("strong",[t._v("默认网关:")]),a("span",[t._v(t._s(t.sys.gateway))])]),a("ListItem",[a("strong",[t._v("首选DNS:")]),t.sys.dns.length>=1?a("span",[t._v(t._s(t.sys.dns[0]))]):t._e()])],1)],1)])],1),a("Row",{staticStyle:{"margin-top":"1em"},attrs:{gutter:16}},[a("Col",{attrs:{span:"24"}},[a("div",{staticClass:"box"},[a("Flow",{attrs:{flow:t.flowOpt}})],1)])],1)],1)])}),[],!1,null,"54c04265",null));e.default=l.exports},"871d":function(t,e,a){},"893a":function(t,e,a){"use strict";a("89fd")},"896c":function(t,e,a){},"89ee":function(t,e,a){},"89fd":function(t,e,a){},"8adf":function(t,e,a){"use strict";a("1bc78");var i={name:"treeMenu",inject:["reload"],filters:{ellipsis:function(t){return t?t.length>8?t.slice(0,6)+"...":t:""}},props:{data:{type:Array},name:String,loading:Boolean},data:function(){return{folderIconList:[],loadingIconList:[],scope:{},menuName:"",uuid:null,menu:[],timer:"",newVal2:[],loginType:null}},created:function(){var t=this;this.data.forEach((function(e,a){e.children&&e.children.length&&(t.folderIconList[a]=t.scope[a]?"folder-open":"folder")}))},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1},watch:{data:function(t,e){var a=this;t.forEach((function(t,e){t.children&&t.children.length&&"采集服务"==t.menuName||"转发服务"==t.menuName?(a.$set(a.scope,e,!0),a.folderIconList[e]="folder-open"):t.children&&t.children.length&&(a.folderIconList[e]="folder")}))}},methods:{doTask:function(t){this.$set(this.scope,t,!this.scope[t]),this.folderIconList[t]=this.scope[t]?"folder-open":"folder"},toggle:function(t,e){var a=this;this.loadingIconList=[],t.children&&t.children.length?this.doTask(e):(this.loadingIconList[e]="loading",this.$emit("getSubMenu",t,(function(t){t&&t.length&&a.doTask(e)})))},quick:function(t){this.$storage.setStorage("getItem",t),1==t.id?this.$router.push({path:"/engineering/collectionService/info"}):2==t.id?this.$router.push({path:"/engineering/collectionService/channelConfig"}):3==t.id?this.$router.push({path:"/engineering/collectionService/driveConfig"}):10==t.id?this.$router.push({path:"/engineering/reportingService/info"}):20==t.id?this.$router.push({path:"/engineering/reportingService/channelConfig"}):30==t.id&&this.$router.push({path:"/engineering/reportingService/driveConfig"}),this.reload()},rightBtn:function(t,e){document.getElementById("msgRightMenu").style.display="none",document.getElementById("msgRightMenu1").style.display="none",document.getElementById("msgRightMenu2").style.display="none",this.menuName=t.menuName,this.menuName;var a=null;1==t.id||10==t.id?(this.$emit("getSubMenu",t,e),a=document.getElementById("msgRightMenu")):2==t.id||20==t.id?(this.$parent.$emit("getSubMenu",t,e),a=document.getElementById("msgRightMenu1")):3==t.id||30==t.id?(this.$parent.$parent.$emit("getSubMenu",t,e),a=document.getElementById("msgRightMenu2")):4==t.id.length&&this.$parent.$parent.$parent.$emit("getSubMenu",t,e);var i=i||window.event,n=i.pageX-400,s=i.pageY-110;return n>423&&(n=423),a.style.display="block",a.style.left=n+130+"px",a.style.top=s-50+"px",document.onclick=function(){a.style.display="none"},!1}}},n=(a("1052"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"tree-menu"},t._l(t.data,(function(e,i){return a("li",{key:i},[a("div",{staticStyle:{"border-bottom":"1px solid rgb(169, 169, 169)"},on:{click:function(a){t.quick(e),t.toggle(e,i)},contextmenu:function(a){a.preventDefault(),t.loginType&&t.rightBtn(e,i)}}},[1==e.id||10==e.id?a("Icon",{staticStyle:{"margin-left":"20px"},attrs:{type:"md-paper"}}):t._e(),2==e.id||20==e.id?a("Icon",{staticStyle:{"margin-left":"30px"},attrs:{type:"md-crop"}}):t._e(),3==e.id||30==e.id?a("Icon",{staticStyle:{"margin-left":"40px"},attrs:{type:"md-desktop"}}):t._e(),t._v("\n         \n        "),a("Tooltip",{attrs:{content:e.menuName}},[a("span",[t._v(t._s(t._f("ellipsis")(e[t.name]||e.menuName)))])]),a("i",{class:["icon",e.children&&e.children.length?t.folderIconList[i]:"file-text",t.loading?t.loadingIconList[i]:""]})],1),t.scope[i]?a("tree-menu",{attrs:{data:e.children}}):t._e()],1)})),0)}),[],!1,null,"457a9b6a",null);e.a=s.exports},"8b2a":function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"LogEngineeredExport",components:{jk_tabs:i.a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"状态",align:"center",render:function(t,e){return t("p",e.row.state?"成功":"失败")}},{title:"访问时间",align:"center",render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.createTime).format("yyyy-MM-dd hh:mm:ss"))}}],timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"createTime",order:!0}]}},links:[{name:"工程导出日志",to:"/logs/logEngineeredExport"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.engineeredExport.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")},query:function(){if(this.page.form.filters=[],""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"createTime",params:[t,e],type:"between"})}this.showData()}}},r=(a("b973"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"6e42cf2b",null);e.default=o.exports},"8c64":function(t,e,a){},"8f73":function(t,e,a){"use strict";a.r(e);var i=a("1247"),n=a("9a16"),s={name:"CollectionService",components:{test:i.default,flexbtn:n.a},provide:function(){return{reload:this.reload}},data:function(){return{IsRouterAlive:!0,nodetree:!0}},created:function(){},methods:{reload:function(){this.IsRouterAlive=!1,this.$nextTick((function(){this.IsRouterAlive=!0}))},parentFn:function(t){this.nodetree=t}}},r=a("c701"),o=Object(r.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticStyle:{display:"flex","flex-wrap":"nowrap","overflow-x":"hidden","overflow-y":"auto"}},[e("test",{directives:[{name:"show",rawName:"v-show",value:this.nodetree,expression:"nodetree"}]}),e("flexbtn",{attrs:{nodetree:this.nodetree},on:{childFn:this.parentFn}}),this.IsRouterAlive?e("router-view"):this._e()],1)])}),[],!1,null,"67549208",null);e.default=o.exports},"916c":function(t,e,a){"use strict";a.r(e);var i={name:"SysLicense",components:{jk_tabs:a("25b1").a},data:function(){return{content:[{name:"单位名称:",title:"companyName",val:""},{name:"联系电话:",title:"iphone",val:""},{name:"单位座机:",title:"special",val:""},{name:"单位地址:",title:"site",val:""},{name:"邮件地址:",title:"email",val:""},{name:"购买日期:",title:"data",val:""},{name:"单位联系人:",title:"linkman",val:""},{name:"所在部门:",title:"branch",val:""},{name:"供应商:",title:"provider",val:""}],licenseInfo:{code:"",type:"",currentLicenseState:"",expireDate:""},url:"",file:null,loading:!1,links:[{name:"license授权",to:"/licenseTimeOut"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.system.license.show.url).then((function(e){t.licenseInfo.code=e.data.data.devSerialnumber,"UNREGISTERED"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="未注册":"EXPIRED"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="已过期":"NORMAL"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="正常":"ABNORMAL"==e.data.data.currentLicenseState&&(t.licenseInfo.currentLicenseState="异常");var a=t.$util.time_stamp2time_date(1e3*e.data.data.expireDate);t.licenseInfo.expireDate=a.format("yyyy-MM-dd hh:mm:ss");var i="OFFICIAL"==e.data.data.license.type?"正式":"试用 ("+e.data.data.license.trialDays+") 天";for(var n in t.licenseInfo.type=i,t.content){var s=t.content[n].title;t.content[n].val=e.data.data.license.register[s]}})).catch((function(t){}))},handleUpload:function(t){return this.file=t,!1},upload:function(){var t=this;if(null==this.file)this.$Notice.error({title:"未选择文件",desc:"请重新选择文件...",duration:3});else{this.loading=!0;var e=new FormData;e.append("file",this.file),this.$https.fetchPost(this.$api.system.license.register.url,e).then((function(e){200==e.data.code?(t.$Notice.success({title:"上传license文件成功",desc:"正在刷新界面",duration:3}),t.$router.push({path:"/login"})):t.$Notice.error({title:"上传license文件失败",desc:e.data.describe,duration:3}),t.loading=!1})).catch((function(e){t.$Notice.error({title:"请求失败",duration:3})}))}}}},n=(a("a23f"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"600px"}},[a("div",{staticStyle:{float:"left",width:"99%"}},[a("div",{staticStyle:{border:"1px solid #666",position:"relative","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("注册信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},t._l(t.content,(function(e,i){return a("tr",{staticStyle:{height:"35px"}},[a("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[a("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.name))])]),a("td",[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v(t._s(e.val))])])])})),0)])]),a("div",{staticStyle:{border:"1px solid #666",position:"relative","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("授权验证")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"150px"}},[t._m(0),a("td",[a("div",{staticStyle:{margin:"7px 0"}},[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v("license状态:"),a("span",{staticStyle:{"margin-left":"45px"}},[t._v(t._s(t.licenseInfo.currentLicenseState))])])]),a("div",{staticStyle:{border:"1px solid #ababaa"}}),a("div",{staticStyle:{margin:"7px 0"}},[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v("设备识别号:"),a("span",{staticStyle:{"margin-left":"45px"}},[t._v(t._s(t.licenseInfo.code)+"  (双击选中确认)")])])]),a("div",{staticStyle:{border:"1px solid #ababaa"}}),a("div",{staticStyle:{margin:"7px 0"}},[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v("授权类型:"),a("span",{staticStyle:{"margin-left":"57px",color:"red"}},[t._v(t._s(t.licenseInfo.type))])])]),"正式"!=t.licenseInfo.type?a("div",{staticStyle:{border:"1px solid #ababaa"}}):t._e(),"正式"!=t.licenseInfo.type?a("div",{staticStyle:{margin:"7px 0"}},[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v("license到期时间:"),a("span",{staticStyle:{"margin-left":"20px",color:"red"}},[t._v(t._s(t.licenseInfo.expireDate))])])]):t._e()])]),a("tr",{staticStyle:{height:"35px"}},[t._m(1),a("td",[a("Upload",{staticStyle:{float:"left",margin:"15px 0 0 15px"},attrs:{"before-upload":t.handleUpload,action:t.url}},[a("Button",{staticStyle:{float:"left"},attrs:{icon:"ios-cloud-upload-outline"}},[t._v("点击选择文件")]),null!==t.file?a("div",{staticStyle:{float:"left",margin:"6px 0 0 20px"}},[t._v("Upload file: "+t._s(t.file.name))]):t._e()],1)],1)])])])]),a("div",[a("Button",{staticStyle:{margin:"10px 50%"},attrs:{type:"primary",loading:t.loading},on:{click:t.upload}},[t._v("上传")])],1)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("授权信息:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("授权文件:")])])}],!1,null,"598ee170",null);e.default=s.exports},9284:function(t,e,a){"use strict";a("09d0")},"932d":function(t,e,a){"use strict";a("84a9")},9354:function(t,e,a){"use strict";a("ca22")},9419:function(t,e,a){"use strict";a("599d")},94194:function(t,e,a){"use strict";a.r(e);var i=(a("0e75"),a("c701")),n=Object(i.a)({name:"Data",components:{},data:function(){return{}},mounted:function(){},methods:{}},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)],1)}),[],!1,null,"33e70215",null);e.default=n.exports},"971b":function(t,e,a){},"97a2":function(t,e,a){},"9a16":function(t,e,a){"use strict";a("1247");var i={name:"flexbtn",data:function(){return{message:". 节点导航栏隐藏",message1:". 节点导航栏展开",flexbtn1:!1,flexbtn2:!1,nodemessage:!0,flexbtn3:!0,flexbtn4:!1,flexbtn5:!1,flexbtn6:!1}},props:{nodetree:{type:Boolean}},methods:{enter3:function(){this.flexbtn4=!0,this.flexbtn3=!1,this.nodemessage=!1,this.$emit("childFn",this.nodemessage)},enter2:function(){this.nodemessage=!1,this.$emit("childFn",this.nodemessage),this.flexbtn1=!1,this.flexbtn2=!1,this.flexbtn3=!1,this.flexbtn4=!0},enter1:function(){this.flexbtn1=!1,this.flexbtn2=!1},enter4:function(){this.flexbtn3=!0,this.flexbtn4=!1,this.nodemessage=!0,this.$emit("childFn",this.nodemessage)},enter5:function(){this.nodemessage=!0,this.$emit("childFn",this.nodemessage),this.flexbtn6=!1,this.flexbtn5=!1,this.flexbtn4=!1,this.flexbtn3=!0},enter6:function(){this.flexbtn6=!1,this.flexbtn5=!1,this.flexbtn4=!0},setStorage:function(t,e){sessionStorage.setItem(t,JSON.stringify(e))},getStorage:function(t){return sessionStorage.getItem(t)},removeStorage:function(t){sessionStorage.removeItem(t)}}},n=(a("075c"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{float:"left"}},[a("Button",{directives:[{name:"show",rawName:"v-show",value:t.flexbtn3,expression:"flexbtn3"}],staticClass:"flexbtn",attrs:{size:"small",type:"primary"},on:{click:t.enter3}},[a("Icon",{attrs:{type:"ios-arrow-back"}})],1),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.flexbtn1,expression:"flexbtn1"}],staticClass:"flexbtn",attrs:{size:"small",type:"primary"},on:{click:t.enter1}},[a("Icon",{attrs:{type:"ios-arrow-back"}})],1),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.flexbtn6,expression:"flexbtn6"}],staticClass:"flexbtn1",attrs:{size:"small",type:"primary"},on:{click:t.enter6}},[a("Icon",{attrs:{type:"ios-arrow-back"}})],1),a("Button",{directives:[{name:"show",rawName:"v-show",value:t.flexbtn4,expression:"flexbtn4"}],staticClass:"flexbtn1",attrs:{size:"small",type:"primary"},on:{click:t.enter4}},[a("Icon",{attrs:{type:"ios-arrow-forward"}})],1)],1)}),[],!1,null,"7e5eab1e",null);e.a=s.exports},"9a9b":function(t,e,a){"use strict";a("336c")},"9f63":function(t,e,a){},a084:function(t,e,a){},a1cc:function(t,e,a){"use strict";a("02b58")},a23f:function(t,e,a){"use strict";a("bdd4")},a243:function(t,e,a){"use strict";a("e1b3")},a26a:function(t,e,a){},a29c:function(t,e,a){"use strict";a("59ca")},a2cd:function(t,e,a){"use strict";a("4a73")},a2e2:function(t,e,a){"use strict";a("ccc8")},a3a4:function(t,e,a){"use strict";a("8c64")},a45a:function(t,e,a){"use strict";a("a450");var i={components:{vBaseChart:a("ddcb").a},props:{flow:Array},data:function(){return{init:!0,flows:{}}},methods:{handleMsg:function(t,e){for(var a in t){var i=t[a],n=i.name,s=i.displayName,r=this.$util.time_stamp2time_date(i.time).format("hh:mm:ss"),o=1024*i.recvSpeed,l=1024*i.sendSpeed;if(e.hasOwnProperty(n)){var d=e[n].option.xAxis.data,c=e[n].option.series[0].data,p=e[n].option.series[1].data;d.length>=20?(d.shift(),c.shift(),p.shift()):(d.push(r),c.push(o),p.push(l))}else e[n]=this.getDefFlow(n,s,r,o,l);e[n].show=!0,e[n].refresh=new Date}},getDefFlow:function(t,e,a,i,n){return{id:t,show:!1,option:{tooltip:{trigger:"axis"},legend:{data:["接收速率","发送速率"],left:10},grid:{bottom:"30px",left:"70px",top:"54px"},xAxis:{type:"category",boundaryGap:!1,data:[a]},yAxis:{type:"value",axisLabel:{formatter:function(t,e){var a=1048576,i=1073741824,n=1099511627776;return t<1024?t+="/B":t>=1024&&t<a?t=(t/1024).toFixed(2)+"/KB":t>=a&&t<i?t=(t/a).toFixed(2)+"/MB":t>=i&&t<n?t=(t/i).toFixed(2)+"/GB":t>=n&&(t=(t/n).toFixed(2)+"/TB"),t}}},series:[{name:"接收速率",smooth:!0,type:"line",data:[i]},{name:"发送速率",smooth:!0,type:"line",data:[n]}]},refresh:0}}},watch:{flow:function(t,e){var a;this.init?(a={},this.handleMsg(t,a),this.flows=a,this.init=!1):(a=this.flows,this.handleMsg(t,a))}}},n=(a("b924"),a("c701")),s=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Tabs",{attrs:{type:"card",value:""}},this._l(this.flows,(function(t,a){return e("TabPane",{key:a,attrs:{label:t.id,name:t.id}},[e("vBaseChart",{staticStyle:{height:"280px","margin-top":"12px"},attrs:{opt:t}})],1)})),1)],1)}),[],!1,null,"7c788a30",null);e.a=s.exports},a55b:function(t,e,a){"use strict";a.r(e),a("6a61");var i=a("2e91"),n={data:function(){return{login:{username:null,password:null,captcha:null},title:null}},mounted:function(){var t=this;this.getCode(),this.systemType().then((function(e){e.data.data?t.title="伟思信安工业数据采集网闸系统-采集模块":t.title="伟思信安工业数据采集网闸系统-上报模块",t.$storage.setStorage("loginType",e.data.data)}))},methods:{getCode:function(){var t=this;this.$https.fetchGet(this.$api.user.captcha.url).then((function(e){t.$refs.captcha.src=e.data.data})).catch((function(t){}))},systemType:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$https.fetchGet(this.$api.global.url);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),submit:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&t.$https.fetchPost(t.$api.user.login.url,t.login).then((function(e){200==e.data.code?(t.$storage.setStorage("userName",e.data.data.principal.username),t.$storage.setStorage("userUuid",e.data.data.principal.uuid),"系统管理员"==e.data.data.authorities[0].authority?(t.$storage.setStorage("users","admins"),t.$storage.getStorage("loginType"),"false"==t.$storage.getStorage("loginType")?t.$router.push({path:"/sys/info/upload"}):t.$router.push({path:"/sys"})):"审计管理员"==e.data.data.authorities[0].authority?(t.$storage.setStorage("users","logauditor"),t.$router.push({path:"/logs"})):"安全管理员"==e.data.data.authorities[0].authority&&(t.$storage.setStorage("users","usermanager"),t.$router.push({path:"/user"}))):t.$Notice.error({title:"登录失败",desc:e.data.describe})})).catch((function(t){}))}))}}},s=(a("e686"),a("c701")),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("div",{staticClass:"layout1"}),a("Row",{staticClass:"layout2",attrs:{type:"flex",justify:"center"}},[a("Form",{ref:"plat_form",attrs:{model:t.login},nativeOn:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.submit(e):null}}},[a("div",{staticStyle:{"font-size":"17px","text-align":"center",padding:"15px 0 10px 0"}},[t._v("\n                    "+t._s(t.title)+"\n                ")]),a("div",{staticStyle:{width:"250px",margin:"auto"}},[a("FormItem",{staticStyle:{margin:"0 0 12px 0"},attrs:{prop:"name"}},[a("Input",{attrs:{prefix:"md-person",placeholder:"账号"},model:{value:t.login.username,callback:function(e){t.$set(t.login,"username",e)},expression:"login.username"}})],1),a("FormItem",{staticStyle:{margin:"0 0 12px 0"},attrs:{prop:"passWord"}},[a("Input",{attrs:{prefix:"md-lock",type:"password",placeholder:"密码"},model:{value:t.login.password,callback:function(e){t.$set(t.login,"password",e)},expression:"login.password"}})],1),a("FormItem",{staticStyle:{margin:"0 0 12px 0"},attrs:{prop:"captcha"}},[a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"12"}},[a("Input",{attrs:{type:"text",placeholder:"验证码"},model:{value:t.login.captcha,callback:function(e){t.$set(t.login,"captcha",e)},expression:"login.captcha"}})],1),a("Col",{attrs:{span:"10"}},[a("img",{ref:"captcha",staticClass:"form-control",attrs:{alt:"点击刷新验证码",src:"data:image/png;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0a\nHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIy\nMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAjAEsDASIA\nAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQA\nAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3\nODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWm\np6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEA\nAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSEx\nBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElK\nU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3\nuLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1i1tb\ndrSFmgiJKKSSg54prpZh2iaFImxkMUXpnr3H50+F2SygwAB5a/OeQOO4qB53by5njxs3BXQ5BPr9\nMBv8e9bNmCQyK2DwSsUTzI2KkLGuGx6fLU3kRhCy20UinBVtg6YHUYH6Z+lebNY2X9mz3F/PKPEp\nkYhVkIlWYMPLCKvBUgrgqD14IA46jU9K1PU9P0ixupmitsb9SjiZlkmPl4MYKfKULF9wyOMY6VlT\nqOT1NZU0jejjtbl3EcCI6jlGUDP19D9Pb6VV+zwGDcVxIq52kYU4PIPv+PcfQcjcaJp3hrV9Cn8P\npsnu78QT2Imd1liIfc7KSSdgIIOMDOTWxZaXDr95fzX6o5t7p4IrbcVCKp5OVPJORz7enA0ZnP3b\nW6m5BBZNByYklGRliPzwSQakh+zO6x+VAz7sHCDpgnIx16f/AFhXNWVhbavDqmh3Y+02lu6gIxIJ\nTqqZHzDay4POccdsVga74N8N/aYtI0jTlTVLh+rTSuLeLGGkI3EcMNoyQCzDkgGpcmti6UYVFq7f\nL/gnpktlCy5jiiVx0ygwfY1hXKq85YBVBAO1BwOBWvpaww2EVnbqY4oIxHEM5IQDA5PUgYz1rJup\nC1wx3KOAMKBgcDgc1abM2ka0mRpMLBiAFQtjqeO344qhcvcJp139klVr/wCcxYIwWKnDDPHX14x1\n7VfRXk0+L+ICMbWRiNpx3HfGP/rUrwRmKWSJyXYgAkk4PAwc/lz60mrlRdjj9Nm8KT+Go5L46dJM\n0Ja5eRgLkvjLnn5ic5IIP07VYTxQ+heC9MuNZMdzeXS7YIpZlVpcn5SzHgAKVJc9M889dyfTbP7b\n9plsYBc+YH+0vApIIOFYMOR26/8A65LuxsNURV1aytLnbkRtJEsmzI5IyOAcZz7c9KzhBxd2aOSZ\nz2g3Oii+W8uvEGnX2uXZEbOs4IjySViiUnOwHjHVick5wBJd/wBmXF9fSPf3Gm38EgRz55iMwAAU\n4OcjA4x2PPqb8Hh7SbTEsej6YksUm5JBbIjRuDkYbGfTB9+o4q1qOm2t1MztaJcSIu0+Yu9l545O\neDuzj2+orR6mVRc2xl+G4LeSW+v7KExQtIscCJnG1FxvBOC2cnPGQeucmqGlR/2v4l17W3yUgmXT\nLfzWCSJsGZAQBtILkEE84B6V1ayC0kJiUm3l4U5yFYcevt/nFV4LVLKSX7JBaxiR8uBHsMjMOrDu\nTgdeeM9yTNiqXuRaLESbXdPNMLOdyqQPlIPYe/bHuOcVlTRBJCHyrYGQT7VfkVZRscCNvVMhB2GQ\nffPPbPPNUrtW+0vvZSeOS2cjHHP0xVomQJf3MMapHLtXHTaP8KX+0rtyA0uRkH7o7H6UUVdjK7uL\n/al5/wA9v/HR/hTI7ycPlXC/7qgDqPSiihocW7jlvbiEu0cmCxGeB2zSLdTEqS/IxjgdiSB9Paii\np6Fp+8C3U0eAj4G4HgD3FC3twEJ8zsRgqCMHHGPSiihCbEF5OBkOB8vTaMfl0pByPxoopSKg9T//\n2Q=="},on:{click:t.getCode}})])],1)],1),a("FormItem",[a("Button",{staticStyle:{width:"100%","background-color":"#e86429",color:"white"},on:{click:t.submit}},[t._v("登录")])],1)],1)])],1)],1)}),[],!1,null,"3b31c254",null);e.default=r.exports},a8f3:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAACYSURBVDhP3ZJNEsIgDIXz2j0u9B5egp66hxCv0jVNmrTgohPjuHP8GH4S4BEI9OekR14vJa/NdBla7wPA2sPwiQVYWOL9nyIg0dbqW2IBm69S29glFhBiGrUEuAKp5H4q2kOaj3fPCT8CYEzPSe+ue0UsnbULnXEFlvt8LB72FAg0FS/fN6QysX4kN/RO/IigmwDXZv0kRBshpST80peTQgAAAABJRU5ErkJggg=="},a8f8:function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"LogLicenseRegister",components:{jk_tabs:i.a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"访问IP",key:"clientIp",align:"center"},{title:"访问用户名",key:"username",align:"center"},{title:"描述",key:"describe",align:"center"},{title:"状态",align:"center",render:function(t,e){return t("p",e.row.state?"成功":"失败")}},{title:"访问时间",sortable:!0,align:"center",render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.createTime).format("yyyy-MM-dd hh:mm:ss"))}}],timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"createTime",order:!0}]}},links:[{name:"license注册日志",to:"/logs/logLicenseRegister"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.licenseRegister.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")},query:function(){if(this.page.form.filters=[],""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"createTime",params:[t,e],type:"between"})}this.showData()}}},r=(a("6032"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"759d1bec",null);e.default=o.exports},a986:function(t,e,a){},a9f9:function(t,e,a){"use strict";a.r(e),a("a450"),a("e5b4");var i=a("25b1"),n={name:"UserRoleAdd",components:{},data:function(){return{platForm:{show:!1,form:{name:null}},msgText:"",pwd:""}},computed:{},methods:{showAddDrawer:function(){this.platForm.show=!0},addPlatForm:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&t.$https.fetchPost(t.$api.user.role.url,t.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"用户角色添加成功",desc:"正在刷新界面",duration:2.5}),location.reload()):t.$Notice.error({title:"用户角色失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}))},restPlatForm:function(){}}},s=(a("faa5"),a("c701")),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{attrs:{type:"primary"},on:{click:t.showAddDrawer}},[t._v("\n            新增\n        ")]),a("Modal",{attrs:{title:"角色配置","class-name":"vertical-center-modal",width:"500",styles:{top:"25%"}},on:{"on-ok":t.addPlatForm},model:{value:t.platForm.show,callback:function(e){t.$set(t.platForm,"show",e)},expression:"platForm.show"}},[a("Form",{ref:"plat_form",attrs:{rules:t.platForm.rules,model:t.platForm.form,"label-width":150}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"用户名",prop:"vhid"}},[a("Input",{staticStyle:{width:"250px"},model:{value:t.platForm.form.name,callback:function(e){t.$set(t.platForm.form,"name",e)},expression:"platForm.form.name"}})],1)],1)],1)],1)}),[],!1,null,"2c2e81c2",null).exports,o={name:"UserRole",components:{jk_tabs:i.a,roleAdd:r},data:function(){return{columns1:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"角色名称",key:"name",align:"center"}],total:null,find:{page:1,size:10},modal:{show:!1,form:{uuid:null,name:null}},links:[{name:"用户",to:"/user/userConfig"},{name:"角色",to:"/user/userRole"},{name:"用户管理",to:"/user/userManage"}],data1:[]}},mounted:function(){this.showRole()},methods:{showRole:function(){var t=this;this.$https.fetchPost(this.$api.user.role.url+"/actions/page_search",this.find).then((function(e){t.data1=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.find.page=t,this.showRole()},del:function(t){var e=this;this.$Modal.confirm({title:"删除角色信息",content:"<p>当前操作将会删除角色信息，请确认删除</p>",loading:!0,onOk:function(){e.$https.fetchDelete(e.$api.user.role.url+"/"+t).then((function(t){200==t.data.code?location.reload():(e.$Modal.remove(),e.$Message.info("角色信息删除失败"))})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:2.5})}))}})},update:function(t){this.modal.show=!0,this.modal.form.uuid=this.data1[t].uuid,this.modal.form.name=this.data1[t].name},restPlatForm:function(){this.$refs.info_form.resetFields()},addPlatForm:function(){var t=this;this.$refs.info_form.validate((function(e){e&&t.$https.fetchPut(t.$api.user.role.url,t.modal.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"角色信息修改成功",desc:"正在刷新界面",duration:2.5}),location.reload()):t.$Notice.error({title:"角色信息修改失败",desc:"错误代码："+e.data.status,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}))}}},l=(a("f6ca"),Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"550px"}},[a("Table",{attrs:{border:"",size:"small",columns:t.columns1,data:t.data1}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.find.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.find.page,total:t.total,"page-size":t.find.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)]),a("Modal",{attrs:{title:"角色配置","class-name":"vertical-center-modal",width:"500",styles:{top:"25%"}},on:{"on-ok":t.addPlatForm},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[a("Form",{ref:"info_form",attrs:{rules:t.modal.rules,model:t.modal.form,"label-width":150}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"角色名",prop:"vhid"}},[a("Input",{staticStyle:{width:"250px"},model:{value:t.modal.form.name,callback:function(e){t.$set(t.modal.form,"name",e)},expression:"modal.form.name"}})],1)],1)],1)],1)}),[],!1,null,"398febd5",null));e.default=l.exports},aa6d:function(t,e,a){},ac4e:function(t,e,a){"use strict";a.r(e),a("4057");var i={inject:["reload"],name:"StrategyMail",components:{jk_tabs:a("25b1").a},data:function(){return{time1:"09:00",time2:"15:00",time3:"21:00",submitshow:!1,testloading:!1,columns1:[{title:"序号",key:"id",align:"center",width:100,render:function(t,e){return t("span",e.index+1)}},{title:"账号",align:"center",key:"username"},{title:"密码",align:"center",key:"password"},{title:"操作",slot:"action",width:150,align:"center"}],action:!1,data1:[],indeterminate:!1,checkAll:!1,checkAllGroup:[],platForm:{form:{serverIp:"",serverPort:0,fromEmail:"",fromPass:"",status:!1,recipients:[{toEmail:""}]}},links:[{name:"邮箱通知",to:"/strategy/mail"}]}},mounted:function(){this.getinfo()},methods:{submitTest:function(){var t=this;this.testloading=!0,this.$https.fetchPost(this.$api.strategy.testMailInfo.url,this.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"通讯测试成功",duration:2.5}),t.testloading=!1,t.submitshow=!0):(t.testloading=!1,t.submitshow=!1,t.$Notice.error({title:"通讯失败",desc:"错误："+e.data.describe,duration:5}))})).catch((function(e){t.submitshow=!1,t.testloading=!1,t.$Notice.error({title:"请求失败",desc:e,duration:5})}))},deleteList:function(t){this.platForm.form.recipients.length>1?this.platForm.form.recipients.splice(t,1):this.$Notice.warning({title:"删除失败",desc:"至少有一位收件人",duration:5})},addList:function(){this.platForm.form.recipients.length>=20?this.$Notice.warning({title:"新增失败",desc:"收件人最多添加20人",duration:5}):this.platForm.form.recipients.push({toEmail:""})},restPlatForm:function(){this.$refs.plat_form.resetFields()},submit:function(){var t=this;if(this.platForm.form.serverPort=this.platForm.form.serverPort.toString(),this.platForm.form.serverIp)if(this.$util.testportnumber(this.platForm.form.serverPort))if(this.platForm.form.fromEmail)if(this.platForm.form.fromPass)if(this.platForm.form.recipients.length<1)this.$Notice.error({title:"修改失败",desc:"接收人邮箱不能为空",duration:5});else{for(var e in this.platForm.form.recipients){if(!this.$util.testportMail(this.platForm.form.recipients[e].toEmail))return void this.$Notice.error({title:"修改失败",desc:"接收人邮箱格式错误",duration:5})}this.$https.fetchPost(this.$api.strategy.updateMailInfo.url,this.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"邮件服务修改成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.reload()}),250)):t.$Notice.error({title:"邮件服务修改失败",desc:"错误："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})}))}else this.$Notice.error({title:"修改失败",desc:"发件人密码不能为空",duration:5});else this.$Notice.error({title:"修改失败",desc:"发件人账号不能为空",duration:5});else this.$Notice.error({title:"修改失败",desc:"邮件服务器端口请输入正确的端口格式",duration:5});else this.$Notice.error({title:"修改失败",desc:"邮件服务器地址不能为空",duration:5})},getinfo:function(){var t=this;this.$https.fetchGet(this.$api.strategy.mailInfo.url).then((function(e){200==e.data.code?e.data.data&&(t.platForm.form=e.data.data):t.$Notice.error({title:"获取数据失败",desc:e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})}))}}},n=a("c701"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left","margin-top":"20px"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("邮件服务器设置")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"40px"}},[t._m(0),a("td",[a("Input",{staticStyle:{width:"20%","margin-left":"15px"},model:{value:t.platForm.form.serverIp,callback:function(e){t.$set(t.platForm.form,"serverIp",e)},expression:"platForm.form.serverIp"}})],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(1),a("td",[a("Input",{staticStyle:{width:"20%","margin-left":"15px"},model:{value:t.platForm.form.serverPort,callback:function(e){t.$set(t.platForm.form,"serverPort",e)},expression:"platForm.form.serverPort"}}),a("span",{staticStyle:{"margin-left":"5px","font-size":"12px"}})],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(2),a("td",[a("Input",{staticStyle:{width:"20%","margin-left":"15px"},model:{value:t.platForm.form.fromEmail,callback:function(e){t.$set(t.platForm.form,"fromEmail",e)},expression:"platForm.form.fromEmail"}}),a("span",{staticStyle:{"margin-left":"5px","font-size":"12px"}})],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(3),a("td",[a("Input",{staticStyle:{width:"20%","margin-left":"15px"},attrs:{type:"password"},model:{value:t.platForm.form.fromPass,callback:function(e){t.$set(t.platForm.form,"fromPass",e)},expression:"platForm.form.fromPass"}}),a("span",{staticStyle:{"margin-left":"5px","font-size":"12px"}})],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(4),a("td",[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(t.platForm.form.recipients,(function(e,i){return a("span",{key:i,staticStyle:{width:"33%",display:"inline-block","margin-top":"10px"}},[a("Input",{staticStyle:{width:"61%","margin-left":"15px"},model:{value:e.toEmail,callback:function(a){t.$set(e,"toEmail",a)},expression:"item.toEmail"}}),a("i-button",{staticStyle:{"margin-left":"5px"},attrs:{size:"small"},on:{click:function(e){return t.deleteList(i)}}},[t._v("删除")])],1)})),0),a("div",{staticStyle:{margin:"10px 10px 10px 15px"}},[a("i-button",{attrs:{icon:"md-add",size:"small"},on:{click:function(e){return t.addList()}}},[t._v("添加")])],1)])]),a("tr",{staticStyle:{height:"40px"}},[t._m(5),a("td",[a("i-switch",{staticStyle:{"margin-left":"12px"},attrs:{size:"large"},model:{value:t.platForm.form.status,callback:function(e){t.$set(t.platForm.form,"status",e)},expression:"platForm.form.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])]),a("span",{staticStyle:{"margin-left":"5px","font-size":"12px"}})],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(6),a("td",[a("TimePicker",{staticStyle:{width:"112px",margin:"12px"},attrs:{value:t.time1,format:"HH:mm",placeholder:"Select time"}}),a("TimePicker",{staticStyle:{width:"112px",margin:"12px"},attrs:{value:t.time2,format:"HH:mm",placeholder:"Select time"}}),a("TimePicker",{staticStyle:{width:"112px",margin:"12px"},attrs:{value:t.time3,format:"HH:mm",placeholder:"Select time"}})],1)])])])]),a("div",{staticStyle:{"text-align":"center"}},[a("Button",{staticStyle:{"margin-top":"10px","margin-right":"10px"},attrs:{type:"primary",loading:t.testloading},on:{click:function(e){return t.submitTest()}}},[t._v("通讯测试")]),a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("保存")])],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("邮件服务器地址:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("邮件服务器端口:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("发件人账号:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("发件人密码:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("接收人邮箱:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("邮件服务器开关:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("定时发送:")])])}],!1,null,"23158da2",null);e.default=s.exports},ae63:function(t,e,a){"use strict";a.r(e),a("4057");var i=a("25b1"),n={name:"LocalMailAdd",components:{},data:function(){return{platForm:{show:!1,form:{username:"",password:""},rules:{username:{required:!0,message:"不能为空",trigger:"blur"},password:{required:!0,message:"不能为空",trigger:"blur"}}}}},computed:{},methods:{showAddDrawer:function(){this.platForm.show=!0},addPlatForm:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&t.$https.fetchPost(t.$api.mail.addMailUser.url,t.platForm.form).then((function(e){200==e.data.status?(t.$Notice.success({title:"邮件账号添加成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){location.reload()}),250)):t.$Notice.error({title:"邮件账号添加失败",desc:"错误代码："+e.data.desc,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}))},restPlatForm:function(){this.$refs.plat_form.resetFields()}}},s=a("c701"),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{attrs:{type:"primary"},on:{click:t.showAddDrawer}},[t._v("\n        新增邮件账号\n    ")]),a("Drawer",{attrs:{title:"本地邮件服务",width:"1000"},model:{value:t.platForm.show,callback:function(e){t.$set(t.platForm,"show",e)},expression:"platForm.show"}},[a("Form",{ref:"plat_form",attrs:{rules:t.platForm.rules,model:t.platForm.form,"label-width":150}},[a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"用户名",prop:"username"}},[a("Input",{model:{value:t.platForm.form.username,callback:function(e){t.$set(t.platForm.form,"username",e)},expression:"platForm.form.username"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{type:"password"},model:{value:t.platForm.form.password,callback:function(e){t.$set(t.platForm.form,"password",e)},expression:"platForm.form.password"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.addPlatForm}},[t._v("确认")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:t.restPlatForm}},[t._v("重置")])],1)],1)],1)],1)}),[],!1,null,"cfaf3156",null).exports,o={inject:["reload"],name:"SysMail",components:{jk_tabs:i.a,mailAdd:r},data:function(){return{columns1:[{title:"序号",key:"id",align:"center",width:100,render:function(t,e){return t("span",e.index+1)}},{title:"账号",align:"center",key:"username"},{title:"密码",align:"center",key:"password"},{title:"操作",slot:"action",width:150,align:"center"}],action:!1,data1:[],indeterminate:!1,checkAll:!1,checkAllGroup:[],platForm:{form:{ip:"",maxConnection:"",pop3Port:"",smtpPort:"",timeOut:""}},userform:{show:!1,form:{username:"",password:""},rules:{username:{required:!0,message:"不能为空",trigger:"blur"},password:{required:!0,message:"不能为空",trigger:"blur"}}},links:[{name:"邮箱通知",to:"/sys/mail"}]}},mounted:function(){this.getinfo()},methods:{addPlatForm:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&t.$https.fetchPost(t.$api.mail.updateMailUser.url,t.userform.form).then((function(e){200==e.data.status?(t.$Notice.success({title:"邮件账号修改成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.reload()}),250)):t.$Notice.error({title:"邮件账号修改失败",desc:"错误代码："+e.data.desc,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}))},restPlatForm:function(){this.$refs.plat_form.resetFields()},deleteMailUser:function(t,e){var a=this;this.$Modal.confirm({title:"删除邮件用户",content:"<p>当前操作将会导致该配置被删除，请确认删除</p>",onOk:function(){a.$https.fetchPost(a.$api.mail.deleteMailUser.url,{id:t}).then((function(t){200==t.data.status?(a.$Message.info("邮件用户删除成功"),setTimeout((function(){a.reload(),a.$Modal.remove()}),250)):(a.$Modal.remove(),a.$Message.info("邮件用户删除失败"))})).catch((function(t){a.$Notice.error({title:"请求失败",desc:t,duration:2.5})}))}})},updateMailUser:function(t){this.userform.show=!0,this.userform.form.id=this.data1[t].id,this.userform.form.username=this.data1[t].username,this.userform.form.password=this.data1[t].password},submit:function(){var t=this;this.platForm.form.pop3Port=this.platForm.form.pop3Port.toString(),this.platForm.form.smtpPort=this.platForm.form.smtpPort.toString(),this.$util.queryDevIP4(this.platForm.form.ip)||this.$util.queryDevIP6(this.platForm.form.ip)?this.$util.testportnumber(this.platForm.form.pop3Port)?this.$util.testportnumber(this.platForm.form.smtpPort)?this.platForm.form.maxConnection<1||this.platForm.form.maxConnection>100?this.$Notice.error({title:"修改失败",desc:"最大连接数范围为1-100",duration:2.5}):this.platForm.form.timeOut<1||this.platForm.form.timeOut>200?this.$Notice.error({title:"修改失败",desc:"超时时间范围为1-200",duration:2.5}):this.$https.fetchPost(this.$api.mail.updateMailServer.url,this.platForm.form).then((function(e){200==e.data.status?(t.$Notice.success({title:"邮件服务修改成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.reload()}),250)):t.$Notice.error({title:"邮件服务修改失败",desc:"错误代码："+e.data.desc,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})})):this.$Notice.error({title:"修改失败",desc:"smtp端口请输入正确的端口格式",duration:2.5}):this.$Notice.error({title:"修改失败",desc:"pop3端口请输入正确的端口格式",duration:2.5}):this.$Notice.error({title:"修改失败",desc:"请输入正确的ip格式",duration:2.5})},checkaction:function(){var t=this;this.action?this.$https.fetchPost(this.$api.mail.startMailService.url,{},{timeout:2e4}).then((function(e){200==e.data.status?(t.$Notice.success({title:"邮件服务启动成功",desc:"正在刷新页面",duration:2.5}),setTimeout((function(){t.reload()}),250)):(t.action=!1,t.$Notice.error({title:"邮件服务启动失败",desc:e.data.desc,duration:2.5}))})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5}),t.action=!1})):this.$https.fetchGet(this.$api.mail.stopMailService.url).then((function(e){200==e.data.status?(t.$Notice.success({title:"邮件服务关闭成功",desc:"正在刷新页面",duration:2.5}),setTimeout((function(){t.reload()}),250)):(t.action=!0,t.$Notice.error({title:"邮件服务关闭失败",desc:e.data.desc,duration:2.5}))})).catch((function(e){t.action=!0,t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))},getinfo:function(){var t=this;this.$https.fetchGet(this.$api.mail.getMailServerMessage.url).then((function(e){200==e.data.status?(t.platForm.form=e.data.data,e.data.data.users&&(t.data1=e.data.data.users),0==t.platForm.form.action?t.action=!0:t.action=!1):t.$Notice.error({title:"获取数据失败",desc:e.data.desc,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}}},l=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("邮件服务器设置")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"40px"}},[t._m(0),a("td",[a("Input",{staticStyle:{width:"150px","margin-left":"15px"},attrs:{placeholder:""},model:{value:t.platForm.form.ip,callback:function(e){t.$set(t.platForm.form,"ip",e)},expression:"platForm.form.ip"}})],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(1),a("td",[a("Input",{staticStyle:{width:"150px","margin-left":"15px"},attrs:{placeholder:""},model:{value:t.platForm.form.smtpPort,callback:function(e){t.$set(t.platForm.form,"smtpPort",e)},expression:"platForm.form.smtpPort"}}),a("span",{staticStyle:{"margin-left":"5px","font-size":"12px"}},[t._v("默认端口为25")])],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(2),a("td",[a("Input",{staticStyle:{width:"150px","margin-left":"15px"},attrs:{placeholder:""},model:{value:t.platForm.form.pop3Port,callback:function(e){t.$set(t.platForm.form,"pop3Port",e)},expression:"platForm.form.pop3Port"}}),a("span",{staticStyle:{"margin-left":"5px","font-size":"12px"}},[t._v("默认端口为110")])],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(3),a("td",[a("Input",{staticStyle:{width:"150px","margin-left":"15px"},attrs:{placeholder:""},model:{value:t.platForm.form.maxConnection,callback:function(e){t.$set(t.platForm.form,"maxConnection",e)},expression:"platForm.form.maxConnection"}}),a("span",{staticStyle:{"margin-left":"5px","font-size":"12px"}},[t._v("默认最大连接为10")])],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(4),a("td",[a("Input",{staticStyle:{width:"150px","margin-left":"15px"},attrs:{placeholder:""},model:{value:t.platForm.form.timeOut,callback:function(e){t.$set(t.platForm.form,"timeOut",e)},expression:"platForm.form.timeOut"}}),a("span",{staticStyle:{"margin-left":"5px","font-size":"12px"}},[t._v("默认超时时间为20s")])],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(5),a("td",[a("i-switch",{staticStyle:{"margin-left":"12px"},attrs:{size:"large"},on:{"on-change":t.checkaction},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)])])])]),a("div",[a("div",{staticClass:"btn btn-sm btn-custom add_fontclient",staticStyle:{margin:"10px 0 0 50%"},on:{click:t.submit}},[t._v("保存")]),a("mailAdd",{staticStyle:{float:"right","margin-top":"10px"}})],1),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("邮件列表")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("Table",{attrs:{size:"small",columns:t.columns1,data:t.data1},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row,n=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updateMailUser(n)}}},[t._v("修改")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.deleteMailUser(i.id,n)}}},[t._v("删除")])]}}])})],1)])])]),a("Drawer",{attrs:{title:"本地邮件服务",width:"1000"},model:{value:t.userform.show,callback:function(e){t.$set(t.userform,"show",e)},expression:"userform.show"}},[a("Form",{ref:"plat_form",attrs:{rules:t.userform.rules,model:t.userform.form,"label-width":150}},[a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"用户名",prop:"username"}},[a("Input",{model:{value:t.userform.form.username,callback:function(e){t.$set(t.userform.form,"username",e)},expression:"userform.form.username"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"密码",prop:"password"}},[a("Input",{attrs:{type:"password"},model:{value:t.userform.form.password,callback:function(e){t.$set(t.userform.form,"password",e)},expression:"userform.form.password"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.addPlatForm}},[t._v("确认")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:t.restPlatForm}},[t._v("重置")])],1)],1)],1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("邮件服务器IP:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("smtp服务器端口:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("pop3服务器端口:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("邮件服务器最大连接数:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("邮件服务器超时时间:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("是否开启邮件服务器:")])])}],!1,null,"33093c58",null);e.default=l.exports},af18:function(t,e,a){},af74:function(t,e,a){"use strict";a.r(e);var i={name:"upload",data:function(){return{loadingStatus:!1,uploadData:{excelFile:null},driveUuid:null,url:"",uploadFile:[]}},methods:{handleUpload:function(t){return this.uploadData.excelFile=t,!1},upload:function(){var t=this;this.loadingStatus=!0;var e=new FormData;e.append("excelFile",this.uploadData.excelFile),this.$https.fetchPost(this.$api.collect.itemOpcua.url+"/actions/upexcel?driveUuid=ca1bcdb0-79a5-4b79-a46c-fe0e8a695976",e).then((function(e){200==e.data.code?t.$Notice.success({title:"上传节点成功",desc:"正在刷新界面",duration:2.5}):t.$Notice.error({title:"上传节点失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}}},n=a("c701"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"align-items":"center",display:"flex","justify-content":"flex-start"}},[a("Upload",{attrs:{"before-upload":t.handleUpload,action:t.url}},[a("Button",{attrs:{icon:"ios-cloud-upload-outline"}},[t._v("上传节点")])],1),null!==t.uploadData.excelFile?a("div",[t._v("Upload file: "+t._s(t.uploadData.excelFile.name)+" "),a("Button",{attrs:{type:"text",loading:t.loadingStatus},on:{click:t.upload}},[t._v(t._s(t.loadingStatus?"Uploading":"Click to upload"))])],1):t._e()],1)}),[],!1,null,"7f21ad6c",null);e.default=s.exports},b186:function(t,e,a){"use strict";a("f2b0")},b305:function(t,e,a){},b3ff:function(t,e,a){"use strict";a("0ee5")},b477:function(t,e,a){},b4e0:function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"LogStrategyWarning",components:{jk_tabs:i.a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"告警级别",key:"alarmType",align:"center"},{title:"发送状态",key:"sendResult",align:"center",render:function(t,e){return t("p",e.row.sendResult?"成功":"失败")}},{title:"告警消息",key:"alarmMsg",width:500,align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.alarmMsg}},e.row.alarmMsg)])}},{title:"发送时间",width:180,sortable:!0,align:"center",render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.sendTime).format("yyyy-MM-dd hh:mm:ss"))}},{title:"告警时间",width:180,sortable:!0,align:"center",render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.alarmTime).format("yyyy-MM-dd hh:mm:ss"))}}],timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10}},links:[{name:"上报策略告警日志",to:"/logs/logStrategyWarning"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.upload.strategyAlarmLog.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")},query:function(){if(this.page.form.filters=[],""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"timestamp",params:[t,e],type:"between"})}this.showData()}}},r=(a("b5ae"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"4cda6264",null);e.default=o.exports},b556:function(t,e,a){"use strict";a.r(e),a("a450");var i={name:"ChannelConfig",inject:["reload"],components:{jk_tabs:a("25b1").a},data:function(){return{driveUUID:null,driverInfo:[],channel:{form:{uuid:null,name:null,remark:null,manufacturer:null,driveType:null,enable:null},updateForm:{uuid:null,remark:null,enable:null}},loginType:null,links:[{name:"通道配置",to:"/engineering/reportingService/channelConfig"}],children:[{title:"OPC-DA-UPLOAD",expand:!0,driveType:"OPC_DA_UPLOAD"},{title:"OPC-UA-UPLOAD",expand:!0,driveType:"OPC_UA_UPLOAD"},{title:"OPC-UA-SERVER",expand:!0,driveType:"OPC_UA_SERVER"},{title:"SOCKET",expand:!0,driveType:"SOCKET_CLIENT"},{title:"MQTT",expand:!0,driveType:"MQTT_CLIENT"},{title:"SQL",expand:!0,driveType:"SQL"}]}},created:function(){},mounted:function(){this.showData(),"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1},methods:{showData:function(){var t=this;this.item=JSON.parse(this.$storage.getStorage("getItem")),this.$https.fetchGet(this.$api.upload.channelInfo.url).then((function(e){for(var a in e.data.data)e.data.data[a].uuid==t.item.uuid&&(t.channel.form.driveType=e.data.data[a].driveType,t.channel.form.uuid=e.data.data[a].uuid,t.channel.form.name=e.data.data[a].name,t.channel.form.remark=e.data.data[a].remark,t.channel.form.enable=e.data.data[a].enable);for(var i in t.children)t.channel.form.driveType==t.children[i].driveType&&(t.channel.form.manufacturer=t.children[i].title)})).catch((function(t){}))},updateChannel:function(){var t=this;this.channel.updateForm.uuid=this.channel.form.uuid,this.channel.updateForm.remark=this.channel.form.remark,this.channel.updateForm.enable=this.channel.form.enable,this.$https.fetchPost(this.$api.upload.updateChannel.url,this.channel.updateForm).then((function(e){200==e.data.code?(t.$Notice.success({title:"通道配置成功",desc:"正在刷新界面",duration:2.5}),t.reload()):t.$Notice.error({title:"通道配置失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}}},n=(a("a3a4"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",staticStyle:{float:"left",width:"100%"}},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header",class:t.loginType?"pad5":"",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),t.loginType?a("Button",{staticStyle:{float:"right","padding-bottom":"5px"},attrs:{type:"primary"},on:{click:t.updateChannel}},[t._v("保存")]):t._e()],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"715px",overflow:"auto"}},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("基本信息")]),a("div",{staticStyle:{margin:"15px 10px",display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("div",{staticStyle:{width:"250px","text-align":"right","margin-bottom":"15px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("名称:")]),a("Input",{staticStyle:{width:"150px",color:"black"},attrs:{disabled:""},model:{value:t.channel.form.name,callback:function(e){t.$set(t.channel.form,"name",e)},expression:"channel.form.name"}})],1),t.loginType?a("div",{staticStyle:{width:"250px","text-align":"right","margin-bottom":"15px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"150px",color:"black"},model:{value:t.channel.form.remark,callback:function(e){t.$set(t.channel.form,"remark",e)},expression:"channel.form.remark"}})],1):t._e(),t.loginType?t._e():a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:"disabled"},model:{value:t.channel.form.remark,callback:function(e){t.$set(t.channel.form,"remark",e)},expression:"channel.form.remark"}})],1),a("div",{staticStyle:{margin:"5px 0 10px 0",width:"250px","text-align":"right","margin-bottom":"15px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("状态:")]),a("i-Switch",{staticStyle:{"margin-right":"90px"},attrs:{size:"large"},model:{value:t.channel.form.enable,callback:function(e){t.$set(t.channel.form,"enable",e)},expression:"channel.form.enable"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)])]),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("通道配置")]),a("div",{staticStyle:{margin:"15px 10px",display:"flex","flex-wrap":"wrap","align-items":"center"}},[a("div",{staticStyle:{width:"250px","text-align":"right","margin-bottom":"15px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("厂家:")]),a("Input",{staticStyle:{width:"150px",color:"black"},attrs:{disabled:""},model:{value:t.channel.form.manufacturer,callback:function(e){t.$set(t.channel.form,"manufacturer",e)},expression:"channel.form.manufacturer"}})],1),a("div",{staticStyle:{width:"250px","text-align":"right","margin-bottom":"15px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("规约:")]),a("Input",{staticStyle:{width:"150px",color:"black"},attrs:{disabled:""},model:{value:t.channel.form.driveType,callback:function(e){t.$set(t.channel.form,"driveType",e)},expression:"channel.form.driveType"}})],1)])])])])])}),[],!1,null,"31ccadbd",null);e.default=s.exports},b5ae:function(t,e,a){"use strict";a("2efe")},b6a4:function(t,e,a){},b6b1:function(t,e,a){"use strict";a("896c")},b85b:function(t,e,a){"use strict";a.r(e),a("6a61");var i=a("2e91"),n=a("4c09"),s=(a("d0f2"),a("a450"),a("1bc78"),a("0c84"),a("3e38"),a("e5b4"),a("25b1")),r=(a("5f3f"),a("84df")),o={name:"NodeConfig",inject:["reload"],components:{jk_tabs:s.a},data:function(){return{percent:0,progressshow:!0,columns1:[{title:"勾选",slot:"action",width:160,align:"center"},{title:"uuid",key:"itemUuid",align:"center"},{title:"节点名",key:"itemName",align:"center"}],data1:[],total:0,page:{form:{page:1,size:10}},indeterminate:!0,checkAll:!1,checkAllGroup:{list:[]},driveTypeList:["MOD_BUS_TCP","MOD_BUS_TCP_SLAVE","MOD_BUS_RTU","MOD_BUS_RTU_SLAVE","MOD_BUS_ASCII","MOD_BUS_ASCII_SLAVE","OPC_DA","OPC_DA_HTTP","OPC_UA"],updateData:[],node:{data:{base:{driveUuid:null,enable:!1,highAlarm:null,hhighAlarm:null,lowAlarm:null,llowAlarm:null,indexCode:null,name:null},numberFormat:{decimal:null,exp:null,formatEnum:null}},updateData:{},listData:{driveUuid:null,sign:null},find:{nodePage:1,nodeSize:10},driveType:null,signList:null,url:null,busDataUrl:null},modal11:{show:!1,state:null},NodeInfo:[],modal12:{show:!1,url:"",file:null,loading:!0},nameMap:{},mapData:{},m:null,n:null,updateLoading:!1,selectAllState:!1,inverseState:!1,selectArr:[],loginType:null,item:{},url:null,driveType:null,links:[{name:"驱动配置",to:"/engineering/reportingService/driveConfig"},{name:"节点配置",to:"/engineering/reportingService/nodeConfig"}]}},created:function(){},mounted:function(){this.showData(),"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1,this.loginType?this.channelType():this.links.push({name:"业务数据",to:"/engineering/reportingService/busData"})},methods:{channelType:function(){var t=this;this.$https.fetchGet(this.$api.globalChannel.url).then((function(e){200==e.data.code&&e.data.data&&t.links.push({name:"业务数据",to:"/engineering/reportingService/busData"})})).catch((function(t){}))},showData:function(){var t=this;this.item=JSON.parse(this.$storage.getStorage("getItem")),"OPC_UA_SERVER"==this.item.driveType?(this.node.url=this.$api.upload.item.uaServer.url,this.node.busDataUrl=this.node.url+"/findOpcUaServerNode?driveUuid="+this.item.uuid):"OPC_UA_UPLOAD"==this.item.driveType?this.node.url=this.$api.upload.item.uaUpload.url:"OPC_DA_UPLOAD"==this.item.driveType?this.node.url=this.$api.upload.item.daUpload.url:"SOCKET_CLIENT"==this.item.driveType?this.node.url=this.$api.upload.item.socket.url:"MQTT_CLIENT"==this.item.driveType?(this.node.url=this.$api.upload.item.mqtt.url,this.node.busDataUrl=this.node.url+"/findMqttTopic?driveUuid="+this.item.uuid):"SQL"==this.item.driveType&&(this.node.url=this.$api.upload.item.sql.url),this.node.find.driveUuid=this.item.uuid,"OPC_UA_SERVER"==this.item.driveType||"MQTT_CLIENT"==this.item.driveType?this.$https.fetchPost(this.node.busDataUrl).then((function(e){t.node.signList=e.data.data,t.node.find.sign=e.data.data[0],t.findNodeConfigByPage(),t.findNodeConfig()})).catch((function(t){})):(this.findNodeConfigByPage(),this.findNodeConfig())},findNodeConfig:function(){var t=this;this.$https.fetchPost(this.node.url+"/findDriveItemList?driveUuid="+this.item.uuid+"&sign="+this.node.find.sign).then((function(e){for(var a in t.m=new Map,e.data.data)"OPC_UA_SERVER"==t.item.driveType||"MQTT_CLIENT"==t.item.driveType?t.m.set(e.data.data[a],{itemUuid:e.data.data[a]}):t.m.set(e.data.data[a].uuid,e.data.data[a].name)})).catch((function(t){}))},findNodeConfigByPage:function(){var t=this;this.$https.fetchPost(this.node.url+"/findItemByPage",this.node.find).then((function(e){if(t.total=e.data.data.count,t.data1=e.data.data.items,t.selectAllState)for(var a in t.data1)t.data1[a].isSelect=!0;else if(t.inverseState)for(var i in t.data1){var n=0;for(var s in t.selectArr)if(t.data1[i].itemUuid==t.selectArr[s]){n++;break}t.data1[i].isSelect=0==n}})).catch((function(t){}))},switchSign:function(t){this.node.find.sign=t,this.findNodeConfigByPage(),this.findNodeConfig()},formatDate:function(t){var e=new Date(t);return Object(r.a)(e,"yyyy-MM-dd hh:mm")},pageChange:function(t){this.node.find.nodePage=t,this.findNodeConfigByPage()},downloadNode:function(){this.modal11.show=!this.modal11.show},download:function(){var t=this;this.$https.getAxios().post(this.node.url+"/exportUaUploadExcel",this.checkAllGroup,{responseType:"blob"}).then((function(t){var e=t.headers,a=e["content-disposition"].indexOf("="),i=e["content-disposition"].substr(a+1,e["content-disposition"].length),n=e["content-type"],s=new Blob([t.data],{type:n}),r=new FileReader;r.readAsDataURL(s),r.onload=function(t){var e=document.createElement("a");e.download=i,e.style.display="none",e.href=t.target.result,document.body.appendChild(e),e.click(),document.body.removeChild(e)}})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))},uploadNode:function(){this.modal12.show=!this.modal12.show},handleUpload:function(t){this.modal12.file=t;var e=t.name.match(/.xlsx$/);null!=e&&""!=e?this.modal12.file=t:(this.$Notice.error({title:"上传失败",desc:"文件格式不正确...",duration:3}),this.modal12.file=null);var a=t.name.match(/^node/);return null!=a&&""!=a?this.modal12.file=t:(this.$Notice.error({title:"上传失败",desc:"文件命名不正确...",duration:3}),this.modal12.file=null),!1},upload:function(){var t=this;if(null==this.modal12.file)this.$Notice.error({title:"未选择文件",desc:"请重新选择文件...",duration:3}),this.modal12.loading=!1;else{var e=new FormData;e.append("excelFile",this.modal12.file),this.$https.fetchPost(this.node.url+"/importUaUploadExcel?driveUuid="+this.item.uuid+"&sign="+this.node.find.sign,e).then((function(e){200==e.data.code?(t.$Notice.success({title:"上传节点成功",desc:"正在刷新界面",duration:2.5}),t.reload()):t.$Notice.error({title:"上传节点失败",desc:"错误代码："+e.data.describe,duration:2.5}),t.modal12.loading=!1})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5}),t.modal12.loading=!1}))}},handleSelectionChange:function(t,e){"OPC_UA_SERVER"==this.item.driveType||"MQTT_CLIENT"==this.item.driveType?e?this.m.set(t.itemUuid,{itemUuid:t.itemUuid}):this.m.delete(t.itemUuid):e?this.m.set(t.itemUuid,t.itemName):this.m.delete(t.itemUuid)},updateNode:function(){var t=this;if(this.updateLoading=!0,"OPC_UA_SERVER"==this.item.driveType||"MQTT_CLIENT"==this.item.driveType){var e=this.node.find.sign;this.nameMap[e]=Object(n.a)(this.m.values()),this.node.updateData.driveUuid=this.item.uuid,this.node.updateData.nameMap=this.nameMap}else{var a={},i={};this.m.forEach((function(t,e){a[e]=t})),i.driveUuid=this.item.uuid,i.itemMap=a,this.node.updateData.base=i}this.$https.fetchPost(this.node.url+"/updateItems",this.node.updateData).then((function(e){200==e.data.code?(t.$Notice.success({title:"节点修改成功",desc:"正在刷新界面",duration:2.5}),t.updateLoading=!1,t.reload()):(t.$Notice.error({title:"节点修改失败",desc:"错误："+e.data.describe,duration:2.5}),t.updateLoading=!1)})).catch((function(e){t.updateLoading=!1,t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))},findDriveAllItemList:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(){var e,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$https.fetchPost(this.node.url+"/findDriveAllItemList?driveUuid="+this.item.uuid+"&sign="+this.node.find.sign);case 2:for(i in e=t.sent,a=new Map,e.data.data)"OPC_UA_SERVER"==this.item.driveType||"MQTT_CLIENT"==this.item.driveType?a.set(e.data.data[i],{itemUuid:e.data.data[i]}):a.set(e.data.data[i].uuid,e.data.data[i].name);return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),selectAll:function(){var t=this;this.selectAllState=!0,this.inverseState=!1,this.findDriveAllItemList().then((function(e){for(var a in t.m=e,t.data1)t.data1[a].isSelect=!0}))},Inverse:function(){var t=this;this.selectAllState=!1,this.inverseState=!0;var e=[];this.findDriveAllItemList().then((function(a){for(var i in t.m.forEach((function(t,i){a.delete(i),e.push(i)})),t.m=a,t.selectArr=e,t.data1){var n=0;for(var s in t.selectArr)if(t.data1[i].itemUuid==t.selectArr[s]){n++;break}t.data1[i].isSelect=0==n}}))},cvsExport:function(){var t=this;if(this.m.size)if(this.m.size>1e4)this.$Notice.error({title:"导出失败",desc:"最多只能导出9999个节点",duration:5});else{var e={nodes:[]};this.m.forEach((function(t,a){e.nodes.push(a)})),this.$https.fetchPost(this.$api.upload.item.daUploadCVS.url,e,{responseType:"blob"}).then((function(t){var e=t.headers,a=e["content-disposition"].indexOf("="),i=e["content-disposition"].substr(a+1,e["content-disposition"].length),n=e["content-type"],s=new Blob([t.data],{type:n}),r=new FileReader;r.readAsDataURL(s),r.onload=function(t){var e=document.createElement("a");e.download=i,e.style.display="none",e.href=t.target.result,document.body.appendChild(e),e.click(),document.body.removeChild(e)}})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}else this.$Notice.error({title:"导出失败",desc:"请勾选节点",duration:5})},handleCheckAll:function(){this.indeterminate?this.checkAll=!1:this.checkAll=!this.checkAll,this.indeterminate=!1,this.checkAll?this.checkAllGroup.list=["MOD_BUS_TCP","MOD_BUS_TCP_SLAVE","MOD_BUS_RTU","MOD_BUS_RTU_SLAVE","MOD_BUS_ASCII","MOD_BUS_ASCII_SLAVE","OPC_DA","OPC_DA_HTTP","OPC_UA"]:this.checkAllGroup.list=[]},checkAllGroupChange:function(t){9===t.length?(this.indeterminate=!1,this.checkAll=!0):t.length>0?(this.indeterminate=!0,this.checkAll=!1):(this.indeterminate=!1,this.checkAll=!1)}}},l=(a("d493"),a("c701")),d=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",staticStyle:{"min-width":"0",flex:"1"}},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header",class:t.loginType?"pad5":"",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),t.loginType?a("Button",{staticStyle:{float:"right"},attrs:{type:"primary",loading:t.updateLoading},on:{click:t.updateNode}},[t._v("保存配置")]):t._e(),t.loginType?a("Button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{icon:"ios-cloud-download-outline"},on:{click:t.downloadNode}},[t._v("下载模板")]):t._e(),t.loginType?a("Button",{staticStyle:{float:"right","margin-right":"10px"},attrs:{icon:"ios-cloud-upload-outline"},on:{click:t.uploadNode}},[t._v("上传节点")]):t._e()],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"715px",overflow:"auto"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px"}},[a("Button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{click:t.selectAll}},[t._v("全选")]),a("Button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{click:t.Inverse}},[t._v("反选")]),"OPC_DA_UPLOAD"==t.item.driveType?a("Button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small",icon:"ios-cloud-download-outline",type:"primary"},on:{click:t.cvsExport}},[t._v("CSV导出")]):t._e()],1),"OPC_UA_SERVER"==t.item.driveType||"MQTT_CLIENT"==t.item.driveType?a("div",{staticStyle:{float:"right","margin-bottom":"10px"}},["OPC_UA_SERVER"==t.item.driveType?a("span",{staticStyle:{"font-size":"12px","margin-right":"10px"}},[t._v("选择节点标识:")]):t._e(),"MQTT_CLIENT"==t.item.driveType?a("span",{staticStyle:{"font-size":"12px","margin-right":"10px"}},[t._v("选择主题标识:")]):t._e(),a("Select",{staticStyle:{width:"70px"},attrs:{size:"small"},on:{"on-change":t.switchSign},model:{value:t.node.find.sign,callback:function(e){t.$set(t.node.find,"sign",e)},expression:"node.find.sign"}},t._l(t.node.signList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1):t._e(),a("div",{staticStyle:{width:"100%",float:"left"}},[a("Table",{attrs:{size:"small",border:"",columns:t.columns1,data:t.data1},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row;return[a("Checkbox",{on:{"on-change":function(e){return t.handleSelectionChange(i,i.isSelect)}},model:{value:i.isSelect,callback:function(e){t.$set(i,"isSelect",e)},expression:"row.isSelect"}})]}}])}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.node.find.nodePage)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.node.find.nodePage,total:t.total,"page-size":t.node.find.nodeSize,"show-elevator":""},on:{"on-change":t.pageChange}})],1)],1)])]),a("Modal",{attrs:{title:"下载节点","class-name":"vertical-center-modal",width:"800",styles:{top:"25%"}},on:{"on-ok":t.download},model:{value:t.modal11.show,callback:function(e){t.$set(t.modal11,"show",e)},expression:"modal11.show"}},[a("div",{staticStyle:{"border-bottom":"1px solid #e9e9e9","padding-bottom":"6px","margin-bottom":"6px"}},[a("Checkbox",{attrs:{indeterminate:t.indeterminate,value:t.checkAll},nativeOn:{click:function(e){return e.preventDefault(),t.handleCheckAll(e)}}},[t._v("全选")])],1),a("CheckboxGroup",{on:{"on-change":t.checkAllGroupChange},model:{value:t.checkAllGroup.list,callback:function(e){t.$set(t.checkAllGroup,"list",e)},expression:"checkAllGroup.list"}},t._l(t.driveTypeList,(function(t,e){return a("Checkbox",{key:e,attrs:{label:t}})})),1)],1),a("Modal",{attrs:{title:"上传节点",loading:t.modal12.loading,"ok-text":"上传","class-name":"vertical-center-modal",width:"400",styles:{top:"25%"}},on:{"on-ok":t.upload},model:{value:t.modal12.show,callback:function(e){t.$set(t.modal12,"show",e)},expression:"modal12.show"}},[a("Upload",{attrs:{"before-upload":t.handleUpload,action:t.modal12.url}},[a("Button",{staticStyle:{float:"left"},attrs:{icon:"ios-cloud-upload-outline"}},[t._v("点击选择文件")]),null!==t.modal12.file?a("div",{staticStyle:{float:"left","margin-top":"6px"}},[a("span",{staticStyle:{"margin-left":"10px"}},[t._v("上传文件 :  "+t._s(t.modal12.file.name))])]):t._e()],1),"OPC_UA_SERVER"==t.item.driveType||"MQTT_CLIENT"==t.item.driveType?a("div",["OPC_UA_SERVER"==t.item.driveType?a("span",{staticStyle:{"margin-right":"10px"}},[t._v("选择节点标识:")]):t._e(),"MQTT_CLIENT"==t.item.driveType?a("span",{staticStyle:{"margin-right":"10px"}},[t._v("选择主题标识:")]):t._e(),a("Select",{staticStyle:{width:"100px"},on:{"on-change":t.switchSign},model:{value:t.node.find.sign,callback:function(e){t.$set(t.node.find,"sign",e)},expression:"node.find.sign"}},t._l(t.node.signList,(function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])})),1)],1):t._e()],1)],1)}),[],!1,null,"e830124c",null);e.default=d.exports},b86d:function(t,e,a){},b924:function(t,e,a){"use strict";a("b6a4")},b973:function(t,e,a){"use strict";a("9f63")},b996:function(t,e,a){},ba55:function(t,e,a){},bb44:function(t,e,a){"use strict";a("af18")},bce7:function(t,e,a){},bdd4:function(t,e,a){},be08:function(t,e,a){},bf10:function(t,e,a){},bf18:function(t,e,a){},bfd4:function(t,e,a){"use strict";a.r(e),a("a450"),a("d0f2");var i={name:"SysLicense",components:{jk_tabs:a("25b1").a},data:function(){return{content:[{name:"单位名称:",title:"companyName",val:""},{name:"联系电话:",title:"iphone",val:""},{name:"单位座机:",title:"special",val:""},{name:"单位地址:",title:"site",val:""},{name:"邮件地址:",title:"email",val:""},{name:"购买日期:",title:"data",val:""},{name:"单位联系人:",title:"linkman",val:""},{name:"所在部门:",title:"branch",val:""},{name:"供应商:",title:"provider",val:""}],licenseInfo:{code:"",type:"",currentLicenseState:"",expireDate:""},url:"",file:null,loading:!1,links:[{name:"license授权",to:"/sys/license"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.system.license.show.url).then((function(e){t.licenseInfo.code=e.data.data.devSerialnumber,"UNREGISTERED"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="未注册":"EXPIRED"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="已过期":"NORMAL"==e.data.data.currentLicenseState?t.licenseInfo.currentLicenseState="正常":"ABNORMAL"==e.data.data.currentLicenseState&&(t.licenseInfo.currentLicenseState="异常");var a=t.$util.time_stamp2time_date(1e3*e.data.data.expireDate);t.licenseInfo.expireDate=a.format("yyyy-MM-dd hh:mm:ss");var i="OFFICIAL"==e.data.data.license.type?"正式":"试用 ("+e.data.data.license.trialDays+") 天";for(var n in t.licenseInfo.type=i,t.content){var s=t.content[n].title;t.content[n].val=e.data.data.license.register[s]}})).catch((function(t){}))},handleUpload:function(t){var e=t.name.match(/.dat$/);return null!=e&&""!=e?this.file=t:(this.$Notice.error({title:"上传失败",desc:"文件格式不正确...",duration:3}),this.file=null),!1},upload:function(){var t=this;if(null==this.file)this.$Notice.error({title:"未选择文件",desc:"请重新选择文件...",duration:3});else{var e=new FormData;e.append("file",this.file),this.$Modal.confirm({title:"提示",content:"<div>确定要上传license文件吗</div>",onOk:function(){t.loading=!0,t.$https.fetchPost(t.$api.system.license.register.url,e).then((function(e){200==e.data.code?(t.$Notice.success({title:"上传license文件成功",desc:"正在刷新界面",duration:3}),location.reload()):t.$Notice.error({title:"上传license文件失败",desc:e.data.describe,duration:3}),t.loading=!1})).catch((function(e){t.$Notice.error({title:"请求失败",duration:3})}))}})}}}},n=a("c701"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"600px"}},[a("div",{staticStyle:{float:"left",width:"100%"}},[a("div",{staticStyle:{border:"1px solid #666",position:"relative","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("注册信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},t._l(t.content,(function(e,i){return a("tr",{key:i,staticStyle:{height:"35px"}},[a("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[a("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.name))])]),a("td",[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v(t._s(e.val))])])])})),0)])]),a("div",{staticStyle:{border:"1px solid #666",position:"relative","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("授权验证")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"150px"}},[t._m(0),a("td",[a("div",{staticStyle:{margin:"7px 0"}},[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v("license状态:"),a("span",{staticStyle:{"margin-left":"45px"}},[t._v(t._s(t.licenseInfo.currentLicenseState))])])]),a("div",{staticStyle:{border:"1px solid #ababaa"}}),a("div",{staticStyle:{margin:"7px 0"}},[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v("设备识别号:"),a("span",{staticStyle:{"margin-left":"45px"}},[t._v(t._s(t.licenseInfo.code)+"  (双击选中确认)")])])]),a("div",{staticStyle:{border:"1px solid #ababaa"}}),a("div",{staticStyle:{margin:"7px 0"}},[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v("授权类型:"),a("span",{staticStyle:{"margin-left":"57px",color:"red"}},[t._v(t._s(t.licenseInfo.type))])])]),"正式"!=t.licenseInfo.type?a("div",{staticStyle:{border:"1px solid #ababaa"}}):t._e(),"正式"!=t.licenseInfo.type?a("div",{staticStyle:{margin:"7px 0"}},[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v("license到期时间:"),a("span",{staticStyle:{"margin-left":"20px",color:"red"}},[t._v(t._s(t.licenseInfo.expireDate))])])]):t._e()])]),a("tr",{staticStyle:{height:"35px"}},[t._m(1),a("td",[a("Upload",{staticStyle:{float:"left",margin:"15px 0 0 15px"},attrs:{"before-upload":t.handleUpload,action:t.url}},[a("Button",{staticStyle:{float:"left"},attrs:{icon:"ios-cloud-upload-outline"}},[t._v("点击选择文件")]),null!==t.file?a("div",{staticStyle:{float:"left",margin:"6px 0 0 20px"}},[t._v("Upload file: "+t._s(t.file.name))]):t._e()],1)],1)])])])]),a("div",[a("Button",{staticStyle:{margin:"10px 50%"},attrs:{type:"primary",loading:t.loading},on:{click:t.upload}},[t._v("上传")])],1)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("授权信息:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{"background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("授权文件:")])])}],!1,null,"f2e82f14",null);e.default=s.exports},c01b:function(t,e,a){"use strict";a("597a")},c32e:function(t,e,a){"use strict";a("244c")},c40d:function(t,e,a){},c47e:function(t,e,a){"use strict";a("a450"),a("e680");var i={name:"Pie",props:{id:String,dataArr:Object,warning:Number},mounted:function(){},data:function(){return{data:null,url:"",file:null,loading:!1,legendData:[],seriesData:[],DriveLogData:[],driveWarningTitle:""}},methods:{getDriveLoginfo:function(t,e,a){var i=this,n={filters:[{filed:"driveUuid",params:[t]},{filed:"strategyUuid",params:[e]}],page:1,size:10};"全部"!=this.warning&&n.filters.push({filed:"alarmType",params:[this.warning+"告警"]}),this.$https.fetchPost(this.$api.strategy.findStrategyAlarmLogByPage.url,n).then((function(t){200==t.data.code?(i.DriveLogData=t.data.data,i.DriveLogData.title=i.driveWarningTitle):i.$Notice.error({title:"数据源对象添加失败",desc:"错误代码："+t.data.desc,duration:2.5})})).catch((function(t){i.$Notice.error({title:"请求失败",desc:t,duration:2.5})}))},chart:function(t,e,a){var i=this.$echarts.init(document.getElementById(this.id)),n={title:{text:e+"拦截报表",subtext:"点击饼图模块查看拦截详情",x:"center",y:10,textStyle:{fontSize:16,fontWeight:"bolder",color:"#000080"},subtextStyle:{fontSize:12,color:"#8B2323"}},legend:{orient:"horizontal",x:"center",y:"bottom",itemWidth:24,itemHeight:18,textStyle:{color:"#666"},itemGap:30,data:["北京","上海","广州","深圳","郑州"]},series:[{name:"拦截条数",type:"pie",radius:"50%",data:[{value:335,name:"北京"},{value:310,name:"上海"},{value:234,name:"广州"},{value:135,name:"深圳"},{value:148,name:"郑州"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(30, 144, 255，0.5)"}},labelLine:{normal:{show:!1}},label:{normal:{position:"inner",formatter:"{c}"}}}],noDataLoadingOption:{effect:"bubble",text:"暂无数据",effectOption:{effect:{n:0}},textStyle:{fontSize:32,fontWeight:"bold"}},tooltip:{trigger:"item",showDelay:20,hideDelay:20,backgroundColor:"#575d6a",textStyle:{fontSize:"16px",color:"white"},formatter:"{a} <br/>{b} : {c}个 ({d}%)"},color:["#7EC0EE","#FF9F7F","#FFD700","#C9C9C9","#E066FF","#C0FF3E","#418bca","#5db85b","#efad4f","#da5350","#677ce7"],backgroundColor:"#faf8f7"};for(var s in function(){for(var e in t)return!1;return!0}()&&(n.title={subtext:"",extStyle:{color:"grey",fontSize:20},text:"暂无数据",left:"center",top:"center"}),this.legendData=[],this.seriesData=[],t){this.legendData.push(s);var r={value:"",name:"",uuid:""};r.value=t[s].riskCount+t[s].warnCount,r.name=t[s].name,r.uuid=t[s].uuid,this.seriesData.push(r)}n.legend.data=this.legendData,n.series[0].data=this.seriesData,i.setOption(n),i.off("click");var o=this;i.on("click",(function(t){o.driveWarningTitle=t.name,o.$emit("sendDriveLogData",t.data.uuid,a,t.name)}))}}},n=(a("511d"),a("c701")),s=Object(n.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"pie",staticStyle:{width:"100%"},attrs:{id:this.id}})}),[],!1,null,"5425816e",null);e.a=s.exports},c4e0:function(t,e,a){"use strict";a.r(e);var i={name:"Sys",components:{nav5:a("4c9b").a},data:function(){return{}}},n=(a("6417"),a("c701")),s=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)],1)}),[],!1,null,"bdce5ad6",null);e.default=s.exports},c742:function(t,e,a){"use strict";a.r(e),a("a450"),a("d0f2");var i={name:"SysUpdate",components:{jk_tabs:a("25b1").a},data:function(){return{itemList:[{title:"系统名称:",content:null},{title:"当前版本:",content:null},{title:"发布时间:",content:null},{title:"版本描述:",content:null}],data:null,url:"",file:null,loading:!1,links:[{name:"系统升级",to:"/sys/update"}]}},created:function(){this.showData()},mounted:function(){},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.software.software.url).then((function(e){t.itemList[0].content=e.data.data.programName,t.itemList[1].content=e.data.data.version,t.itemList[2].content=t.$util.time_stamp2time_date(e.data.data.startUptime).format("yyyy-MM-dd hh:mm:ss"),t.itemList[3].content=e.data.data.descriptions})).catch((function(t){}))},handleUpload:function(t){var e=t.name.match(/.zip$/);return null!=e&&""!=e?this.file=t:(this.$Notice.error({title:"上传失败",desc:"文件格式不正确...",duration:3}),this.file=null),!1},upload:function(){var t=this;if(null==this.file)this.$Notice.error({title:"未选择文件",desc:"请重新选择文件...",duration:3});else{var e=new FormData;e.append("file",this.file),this.$Modal.confirm({title:"提示",content:'<div>确定要上传升级包吗</div><div style="color:red">注:3S后系统进行重启</div>',onOk:function(){t.loading=!0,t.$Loading.start(),t.$https.fetchPost(t.$api.software.software.url+"/actions/upgrade",e).then((function(e){200==e.data.code?(t.$Notice.success({title:"上传升级包成功",desc:"3S后系统进行重启",duration:3}),t.$Loading.finish(),t.$router.push({path:"/login"})):(t.$Notice.error({title:"上传升级包失败",desc:e.data.describe,duration:3}),t.$Loading.error(),t.loading=!1)})).catch((function(e){t.$Notice.error({title:"请求失败",duration:3}),t.$Loading.error(),t.loading=!1}))}})}}}},n=a("c701"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("当前版本信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},t._l(t.itemList,(function(e,i){return a("tr",{key:i,staticStyle:{height:"35px"}},[a("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[a("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.title))])]),a("td",[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v(t._s(e.content))])])])})),0)])]),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("版本升级")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"35px"}},[t._m(0),a("td",[a("Upload",{staticStyle:{margin:"15px 0 0 15px"},attrs:{"before-upload":t.handleUpload,action:t.url}},[a("Button",{staticStyle:{float:"left"},attrs:{icon:"ios-cloud-upload-outline"}},[t._v("点击选择文件")]),null!==t.file?a("div",{staticStyle:{float:"left",margin:"6px 0 0 20px"}},[t._v("Upload file: "+t._s(t.file.name)+"\n                                    ")]):t._e()],1)],1)])])])]),a("div",[a("Button",{staticStyle:{margin:"10px 50%"},attrs:{type:"primary",loading:t.loading},on:{click:t.upload}},[t._v("升级")])],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("固件升级包:")])])}],!1,null,"04bce640",null);e.default=s.exports},c764:function(t,e,a){"use strict";a.r(e),a("a450");var i=a("1cbc"),n={name:"ChannelConfig",inject:["reload"],components:{jk_tabs:a("25b1").a,jk_tabsbtn:i.a},data:function(){return{driveUUID:null,driverInfo:[],channel:{form:{uuid:null,name:null,remark:null,manufacturer:null,driveType:null},updateForm:{uuid:null,remark:null}},loginType:null,links:[{name:"通道配置",to:"/engineering/collectionService/channelConfig"}],children:[{title:"Modbus-TCP",driveType:"MOD_BUS_TCP"},{title:"Modbus-TCP从站推送",driveType:"MOD_BUS_TCP_SLAVE"},{title:"Modbus-RTU",driveType:"MOD_BUS_RTU"},{title:"Modbus-RTU从站推送",driveType:"MOD_BUS_RTU_SLAVE"},{title:"Modbus-ASCII",driveType:"MOD_BUS_ASCII"},{title:"Modbus-ASCII从站推送",driveType:"MOD_BUS_ASCII_SLAVE"},{title:"OPC-DA",driveType:"OPC_DA"},{title:"OPC-DA客户端",driveType:"OPC_DA_HTTP"},{title:"OPC-UA",driveType:"OPC_UA"}]}},created:function(){},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1,this.showData()},methods:{showData:function(){var t=this;this.item=JSON.parse(this.$storage.getStorage("getItem")),this.$https.fetchGet(this.$api.collect.channelInfo.url).then((function(e){for(var a in e.data.data)e.data.data[a].uuid==t.item.uuid&&(t.channel.form.driveType=e.data.data[a].driveType,t.channel.form.uuid=e.data.data[a].uuid,t.channel.form.name=e.data.data[a].name,t.channel.form.remark=e.data.data[a].remark,t.channel.form.enable=e.data.data[a].enable);for(var i in t.children)t.channel.form.driveType==t.children[i].driveType&&(t.channel.form.manufacturer=t.children[i].title)})).catch((function(t){}))},updateChannel:function(){var t=this;this.channel.updateForm.uuid=this.channel.form.uuid,this.channel.updateForm.remark=this.channel.form.remark,this.$https.fetchPut(this.$api.collect.channelInfo.url,this.channel.updateForm).then((function(e){200==e.data.code?(t.$Notice.success({title:"通道配置成功",desc:"正在刷新界面",duration:2.5}),t.reload()):t.$Notice.error({title:"通道配置失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}}},s=(a("9354"),a("c701")),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",staticStyle:{float:"left",width:"100%"}},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[t.loginType?t._e():a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),t.loginType?a("jk_tabsbtn",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}):t._e(),t.loginType?a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.updateChannel}},[t._v("保存")]):t._e()],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"695px",overflow:"auto"}},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("基本信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("名称:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:t.channel.form.name,callback:function(e){t.$set(t.channel.form,"name",e)},expression:"channel.form.name"}})],1),t.loginType?a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"130px"},model:{value:t.channel.form.remark,callback:function(e){t.$set(t.channel.form,"remark",e)},expression:"channel.form.remark"}})],1):t._e(),t.loginType?t._e():a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:"disabled"},model:{value:t.channel.form.remark,callback:function(e){t.$set(t.channel.form,"remark",e)},expression:"channel.form.remark"}})],1)])]),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("通道配置")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("厂家:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:t.channel.form.manufacturer,callback:function(e){t.$set(t.channel.form,"manufacturer",e)},expression:"channel.form.manufacturer"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("规约:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:t.channel.form.driveType,callback:function(e){t.$set(t.channel.form,"driveType",e)},expression:"channel.form.driveType"}})],1)])])])])])}),[],!1,null,"1bfb385e",null);e.default=r.exports},c85d:function(t,e,a){"use strict";a.r(e),a("a450"),a("e680");var i={components:{Expand:{name:"TableExpand",functional:!0,props:{row:Object,render:Function,index:Number,column:{type:Object,default:null}},render:function(t,e){var a={row:e.props.row,index:e.props.index};return e.props.column&&(a.column=e.props.column),e.props.render(t,a)}}},props:{value:{type:String,default:""},pages:Array},data:function(){return{val:""}},mounted:function(){this.value||(this.val=this.pages[0].name)},methods:{}},n=(a("d2b1"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"JkPages"},[a("Tabs",{attrs:{type:"card"},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},t._l(t.pages,(function(e,i){return a("TabPane",{key:i,attrs:{label:e.label,name:e.name}},[t.val==e.name?a("div",{class:e.dfClass?"":"JkPagesView"},[a("Expand",{attrs:{render:e.render}})],1):t._e()])})),1)],1)}),[],!1,null,"954dec5e",null).exports,r={components:{},props:{url:String,columns:Array,size:{type:Number,default:10},filter:Object,flush:Number},data:function(){return{loading:!1,data:[],total:0,page:1}},mounted:function(){},computed:{},methods:{test:function(t){this.page=t,this.getData()},getData:function(){var t=this,e={page:this.page,size:this.size,filters:this.filter};this.loading=!0,this.$https.fetchPost(this.url,e).then((function(e){t.total=e.data.data.count,t.data=e.data.data.data,t.loading=!1})).catch((function(t){}))}},watch:{flush:function(t,e){this.page=1,this.getData()}}},o=(a("3b67"),Object(n.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Table",{attrs:{loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc"},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page,total:t.total,"page-size":t.size,simple:""},on:{"on-change":t.test}})],1)],1)}),[],!1,null,"0b98b080",null).exports),l=(a("d91d"),{components:{model:{name:"model",functional:!0,props:{render:Function,params:{type:Object,default:function(){return{}}}},render:function(t,e){var a=e.props.params;return e.props.render(t,a)}}},props:{title:String,filterAttr:Object,render:Function},data:function(){return{value:null,size:10}},mounted:function(){this.search()},computed:{},methods:{search:function(){var t;this.filterAttr&&this.value&&(t=[{filed:this.filterAttr.filed,type:"like",params:this.value}]),this.$emit("tableFilterSimple",this.size,t)}},watch:{}}),d=(a("a243"),{components:{TableBody:o,TableFilterSimple:Object(n.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"header"},[a("Col",{attrs:{span:"10"}},[a("h4",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(t.title))])]),a("Col",{staticStyle:{"margin-top":"5px"},attrs:{span:"14"}},[a("Row",{attrs:{type:"flex",justify:"end"}},[t.filterAttr?a("Input",{staticClass:"header-span",attrs:{type:"text",search:"",placeholder:t.filterAttr.label},on:{"on-search":t.search},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):t._e(),a("InputNumber",{staticClass:"header-span",attrs:{formatter:function(t){return"页数:"+t},parser:function(t){return t.replace("页数：","")},max:100,min:1},on:{"on-change":t.search},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}}),t.render?a("span",{staticClass:"header-span"},[a("model",{attrs:{render:t.render}})],1):t._e()],1)],1)],1)],1)}),[],!1,null,"070a3100",null).exports},props:{title:String,filterAttr:Object,render:Function,columns:Array,url:String},data:function(){return{size:null,filter:null,flush:null}},mounted:function(){},computed:{},methods:{},watch:{}}),c=(a("a29c"),Object(n.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"simpleTable"},[a("TableFilterSimple",{attrs:{render:t.render,title:t.title,filterAttr:t.filterAttr},on:{tableFilterSimple:t.tableFilterSimple}}),a("TableBody",{attrs:{url:t.url,columns:t.columns,size:t.size,filter:t.filter,flush:t.flush}})],1)}),[],!1,null,"0e2e675e",null).exports),p=(a("1bc78"),{components:{},data:function(){var t=this;return{modal:{show:!1,formInline:{ipVersion:"IPV4",ip:"",genmask:"",remark:"",iface:""},ruleInline:{ipVersion:{required:!0,trigger:"change",message:"请选择网络版本"},ip:{required:!0,trigger:"change",validator:("请输入合法的ipv4地址","请输入合法的ipv6地址",function(e,a,i){var n=t.modal.formInline.ipVersion,s="IPV6"==n?"请输入合法的ipv6地址":"请输入合法的ipv4地址";("IPV6"==n?/^(([\da-fA-F]{1,4}):){8}$/:/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/).test(a+="IPV6"==n?":":".")?i():i(new Error(s))})},genmask:{required:!0,trigger:"change",validator:function(e,a,i){"IPV4"==t.modal.formInline.ipVersion?/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/.test(a+".")?i():i(new Error("请输入合法的ipv4子网掩码")):/^[0-9]*$/.test(a)&&a>0&&a<129?i():i(new Error("请输入合法的ipv6前缀，0~129之间的数字"))}},remark:{trigger:"change",max:20,message:"请输入0~20的字符串"},iface:{required:!0,message:"请选择要设置网络接口",trigger:"change"}}},netInfs:[]}},mounted:function(){},methods:{showNetInterface:function(){var t=this;this.modal.show=!0,this.$https.fetchGet(this.$api.system.inf.showNetInterface.url).then((function(e){e.data.data.forEach((function(e){t.netInfs.push(e.name)}))})).catch((function(t){}))},handleSubmit:function(t,e){var a=this;this.$refs[t].validate((function(t){t&&a.$https.fetchPost(a.$api.system.inf.addIp.url,e).then((function(t){var e=t.data.code,i=t.data.title,n=t.data.describe;200==e?a.$Notice.success({title:i,duration:1}):a.$Notice.error({title:i,desc:n})}))}))}}}),u=Object(n.a)(p,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.showNetInterface}},[t._v("新增ip")]),a("Modal",{attrs:{title:"添加IP"},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[a("Form",{ref:"formInline",attrs:{model:t.modal.formInline,rules:t.modal.ruleInline,"label-width":100}},[a("FormItem",{attrs:{prop:"ipVersion",label:"网络版本"}},[a("RadioGroup",{model:{value:t.modal.formInline.ipVersion,callback:function(e){t.$set(t.modal.formInline,"ipVersion",e)},expression:"modal.formInline.ipVersion"}},[a("Radio",{attrs:{label:"IPV4"}},[t._v("IPV4")]),a("Radio",{attrs:{disabled:"",label:"IPV6"}},[t._v("IPV6")])],1)],1),a("FormItem",{attrs:{prop:"ip",label:"ip地址"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.1"},model:{value:t.modal.formInline.ip,callback:function(e){t.$set(t.modal.formInline,"ip",e)},expression:"modal.formInline.ip"}})],1),a("FormItem",{attrs:{prop:"genmask",label:"掩码/前缀"}},[a("Input",{attrs:{type:"text",placeholder:"255.255.255.0"},model:{value:t.modal.formInline.genmask,callback:function(e){t.$set(t.modal.formInline,"genmask",e)},expression:"modal.formInline.genmask"}})],1),a("FormItem",{attrs:{prop:"iface",label:"网络接口"}},[a("Select",{model:{value:t.modal.formInline.iface,callback:function(e){t.$set(t.modal.formInline,"iface",e)},expression:"modal.formInline.iface"}},t._l(t.netInfs,(function(e){return a("Option",{attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{prop:"remark",label:"备注"}},[a("Input",{attrs:{type:"textarea",placeholder:"192.168.1.254"},model:{value:t.modal.formInline.remark,callback:function(e){t.$set(t.modal.formInline,"remark",e)},expression:"modal.formInline.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline",t.modal.formInline)}}},[t._v("添加")])],1)],1)],1)}),[],!1,null,"66546658",null).exports,m={components:{},props:{row:Object},data:function(){var t=this;return{modal:{show:!1,spinShow:!1,formInline:{ipVersion:"IPV4",ip:"",genmask:"",remark:"",iface:""},ruleInline:{ipVersion:{required:!0,trigger:"change",message:"请选择网络版本"},ip:{required:!0,trigger:"change",validator:("请输入合法的ipv4地址","请输入合法的ipv6地址",function(e,a,i){var n=t.modal.formInline.ipVersion,s="IPV6"==n?"请输入合法的ipv6地址":"请输入合法的ipv4地址";("IPV6"==n?/^(([\da-fA-F]{1,4}):){8}$/:/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/).test(a+="IPV6"==n?":":".")?i():i(new Error(s))})},genmask:{required:!0,trigger:"change",validator:function(e,a,i){"ipv4"==t.modal.formInline.ipVersion.toLowerCase()?/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/.test(a+".")?i():i(new Error("请输入合法的ipv4子网掩码")):/^[0-9]*$/.test(a)&&a>0&&a<129?i():i(new Error("请输入合法的ipv6前缀，0~129之间的数字"))}},remark:{trigger:"change",max:20,message:"请输入0~20的字符串"},iface:{required:!0,message:"请选择要设置网络接口",trigger:"change"}}},netInfs:[]}},mounted:function(){this.initAttr()},computed:{},methods:{initAttr:function(){var t=this.row,e=this.modal.formInline;for(var a in e)t.hasOwnProperty(a)&&t[a]&&(e[a]=t[a])},updateClick:function(){var t=this;this.modal.show=!0,this.modal.spinShow=!0,this.$https.fetchGet(this.$api.system.inf.showNetInterface.url).then((function(e){e.data.data.forEach((function(e){t.netInfs.push(e.name)})),t.modal.spinShow=!1})).catch((function(t){}))},handleSubmit:function(t,e){var a=this;this.$refs[t].validate((function(t){if(t){var i={oldIp:a.row,ip:e};a.$https.fetchPut(a.$api.system.inf.updateIp.url,i).then((function(t){var e=t.data.code,i=t.data.title,n=t.data.describe;200==e?a.$Notice.success({title:i,duration:1}):a.$Notice.error({title:i,desc:n})}))}}))},del:function(){var t=this;this.$Modal.confirm({title:"删除IP",content:"<p>当前操作将会导致该IP信息被删除，请确认删除</p>",loading:!0,onOk:function(){t.$https.fetchDelete(t.$api.system.inf.delIp.url,t.row).then((function(e){t.$Modal.remove();var a=e.data.code,i=e.data.title,n=e.data.describe;200==a?t.$Notice.success({title:i,duration:1}):t.$Notice.error({title:i,desc:n})})).catch((function(t){}))}})}}},h=Object(n.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ButtonGroup",{attrs:{size:"small"}},[1==t.row.mgType||0==t.row.mgType?[a("Button",{on:{click:t.updateClick}},[a("Icon",{attrs:{size:"16",type:"md-clipboard"}}),t._v("\n                修改\n            ")],1),a("Button",{on:{click:t.del}},[a("Icon",{staticStyle:{"font-weight":"bold"},attrs:{size:"16",type:"ios-close-circle-outline"}}),t._v("\n                删除\n            ")],1)]:t._e()],2),a("Modal",{attrs:{title:"修改IP"},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[t.modal.spinShow?a("Spin",{attrs:{size:"large",fix:""}},[t._v("数据加载中")]):t._e(),a("Form",{ref:"formInline",attrs:{model:t.modal.formInline,rules:t.modal.ruleInline,"label-width":100}},[a("FormItem",{attrs:{prop:"ipVersion",label:"网络版本"}},[a("RadioGroup",{model:{value:t.modal.formInline.ipVersion,callback:function(e){t.$set(t.modal.formInline,"ipVersion",e)},expression:"modal.formInline.ipVersion"}},[a("Radio",{attrs:{label:"IPV4"}},[t._v("IPV4")])],1)],1),a("FormItem",{attrs:{prop:"ip",label:"ip地址"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.1"},model:{value:t.modal.formInline.ip,callback:function(e){t.$set(t.modal.formInline,"ip",e)},expression:"modal.formInline.ip"}})],1),a("FormItem",{attrs:{prop:"genmask",label:"掩码/前缀"}},[a("Input",{attrs:{type:"text",placeholder:"255.255.255.0"},model:{value:t.modal.formInline.genmask,callback:function(e){t.$set(t.modal.formInline,"genmask",e)},expression:"modal.formInline.genmask"}})],1),a("FormItem",{attrs:{prop:"iface",label:"网络接口"}},[a("Select",{model:{value:t.modal.formInline.iface,callback:function(e){t.$set(t.modal.formInline,"iface",e)},expression:"modal.formInline.iface"}},t._l(t.netInfs,(function(e,i){return a("Option",{key:i,attrs:{value:e}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{prop:"remark",label:"备注"}},[a("Input",{attrs:{type:"textarea",placeholder:"192.168.1.254"},model:{value:t.modal.formInline.remark,callback:function(e){t.$set(t.modal.formInline,"remark",e)},expression:"modal.formInline.remark"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline",t.modal.formInline)}}},[t._v("添加")])],1)],1)],1)}),[],!1,null,null,null).exports,f={components:{SimpleTable:c},data:function(){return{mgTable:{title:"管理IP列表",columns:[{title:"序号",width:70,type:"index",align:"center"},{title:"管理类型",key:"mgType",render:function(t,e){var a=e.row.mgType,i={0:["默认","default","该类型地址不属于本软件系统管理,为操作系统上的IP"],1:["受管","primary","该类型属于软件系统管理IP,软件将会同步操作系统保证有该IP地址"],2:["禁用","error","该类型当前系统不能添加,修改,删除"]},n=i.hasOwnProperty(a)?i[a][0]:"未知",s=i.hasOwnProperty(a)?i[a][1]:"warning";return t("Tooltip",{props:{placement:"right",content:i.hasOwnProperty(a)?i[a][2]:"未知类型,存在请联系管理员",maxWidth:"600"}},[t("Tag",{props:{color:s}},n)])}},{title:"是否运行",key:"state",render:function(t,e){var a=e.row.state,i=e.row.state?"是":"否",n=e.row.state?"primary":"error",s=e.row.desc;return a?t("Tag",{props:{type:"dot",color:n}},i):t("Tooltip",{props:{content:s,maxWidth:"200"}},[t("Tag",{props:{type:"dot",color:n}},i)])}},{title:"所属网卡",key:"iface"},{title:"ip",key:"ip"},{title:"掩码/前缀",key:"genmask"},{title:"版本",key:"ipVersion"},{title:"备注",key:"remark"},{title:"操作",width:220,render:function(t,e){return t(h,{props:e})}}],render:function(t,e){return t(u)},cache:[]}}},mounted:function(){this.showNetInterface()},methods:{showNetInterface:function(){var t=this;this.$https.fetchGet(this.$api.system.inf.ip.url,{ipVersion:"All"}).then((function(e){var a=e.data.data;t.mgTable.cache=a}))}}},v=Object(n.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("SimpleTable",this._b({},"SimpleTable",this.mgTable,!1))],1)}),[],!1,null,"6423e9d3",null).exports,g={components:{},data:function(){var t=this,e=function(e,a){return function(i,n,s){var r=t.modal.formInline.ipVersion,o="IPV6"==r?a:e;("IPV6"==r?/^(([\da-fA-F]{1,4}):){8}$/:/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/).test(n+="IPV6"==r?":":".")?s():s(new Error(o))}};return{modal:{show:!1,formInline:{ipVersion:"IPV4",destination:"",gateway:"",genmask:"",iface:""},ruleInline:{ipVersion:{required:!0,trigger:"change",message:"请选择网络版本"},destination:{required:!0,trigger:"change",validator:e("请输入合法的ipv4地址","请输入合法的ipv6地址")},genmask:{required:!0,trigger:"change",validator:function(e,a,i){"IPV4"==t.modal.formInline.ipVersion?/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/.test(a+".")?i():i(new Error("请输入合法的ipv4子网掩码")):/^[0-9]*$/.test(a)&&a>0&&a<129?i():i(new Error("请输入合法的ipv6前缀，0~129之间的数字"))}},gateway:{required:!0,trigger:"change",validator:e("请输入合法的ipv4网关","请输入合法的ipv6网关")},iface:{required:!0,message:"请选择要设置网络接口",trigger:"change"}}},netInfs:[]}},mounted:function(){},methods:{handleSubmit:function(t,e){var a=this;this.$refs[t].validate((function(t){t&&a.$https.fetchPost(a.$api.system.inf.addRoute.url,e).then((function(t){var e=t.data.code,i=t.data.title,n=t.data.describe;200==e?a.$Notice.success({title:i,duration:1}):a.$Notice.error({title:i,desc:n})}))}))},showNetInfterace:function(){var t=this;this.modal.show=!0,this.$https.fetchGet(this.$api.system.inf.showNetInterface.url).then((function(e){e.data.data.forEach((function(e){t.netInfs.push(e.name)}))})).catch((function(t){}))}}},y=Object(n.a)(g,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{staticStyle:{float:"right","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.showNetInfterace}},[t._v("新增路由")]),a("Modal",{attrs:{title:"添加路由"},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[a("Form",{ref:"formInline",attrs:{model:t.modal.formInline,rules:t.modal.ruleInline,"label-width":100}},[a("FormItem",{attrs:{prop:"ipVersion",label:"网络版本"}},[a("RadioGroup",{model:{value:t.modal.formInline.ipVersion,callback:function(e){t.$set(t.modal.formInline,"ipVersion",e)},expression:"modal.formInline.ipVersion"}},[a("Radio",{attrs:{label:"IPV4"}},[t._v("IPV4")])],1)],1),a("FormItem",{attrs:{prop:"destination",label:"ip地址"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.1"},model:{value:t.modal.formInline.destination,callback:function(e){t.$set(t.modal.formInline,"destination",e)},expression:"modal.formInline.destination"}})],1),a("FormItem",{attrs:{prop:"genmask",label:"掩码/前缀"}},[a("Input",{attrs:{type:"text",placeholder:"255.255.255.0"},model:{value:t.modal.formInline.genmask,callback:function(e){t.$set(t.modal.formInline,"genmask",e)},expression:"modal.formInline.genmask"}})],1),a("FormItem",{attrs:{prop:"gateway",label:"网关"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.254"},model:{value:t.modal.formInline.gateway,callback:function(e){t.$set(t.modal.formInline,"gateway",e)},expression:"modal.formInline.gateway"}})],1),a("FormItem",{attrs:{prop:"iface",label:"网络接口"}},[a("Select",{model:{value:t.modal.formInline.iface,callback:function(e){t.$set(t.modal.formInline,"iface",e)},expression:"modal.formInline.iface"}},t._l(t.netInfs,(function(e){return a("Option",{attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline",t.modal.formInline)}}},[t._v("添加")])],1)],1)],1)}),[],!1,null,"4962c650",null).exports,x={components:{},props:{row:Object},data:function(){var t=this,e=function(e,a){return function(i,n,s){var r=t.modal.formInline.ipVersion,o="IPV6"==r?a:e;("IPV6"==r?/^(([\da-fA-F]{1,4}):){8}$/:/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/).test(n+="IPV6"==r?":":".")?s():s(new Error(o))}};return{modal:{show:!1,spinShow:!1,formInline:{ipVersion:"",destination:"",gateway:"",genmask:"",iface:""},ruleInline:{ipVersion:{required:!0,trigger:"change",message:"请选择网络版本"},destination:{required:!0,trigger:"change",validator:e("请输入合法的ipv4地址","请输入合法的ipv6地址")},genmask:{required:!0,trigger:"change",validator:function(e,a,i){"ipv4"==t.modal.formInline.ipVersion.toLowerCase()?/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/.test(a+".")?i():i(new Error("请输入合法的ipv4子网掩码")):/^[0-9]*$/.test(a)&&a>0&&a<129?i():i(new Error("请输入合法的ipv6前缀，0~129之间的数字"))}},gateway:{required:!0,trigger:"change",validator:e("请输入合法的ipv4网关","请输入合法的ipv6网关")},iface:{required:!0,message:"请选择要设置网络接口",trigger:"change"}}},netInfs:[]}},mounted:function(){this.initAttr()},computed:{},methods:{initAttr:function(){var t=this.row,e=this.modal.formInline;for(var a in e)t.hasOwnProperty(a)&&t[a]&&(e[a]=t[a])},updateClick:function(){var t=this;this.modal.show=!0,this.modal.spinShow=!0,this.$https.fetchGet(this.$api.system.inf.showNetInterface.url).then((function(e){e.data.data.forEach((function(e){t.netInfs.push(e.name)})),t.modal.spinShow=!1})).catch((function(t){}))},handleSubmit:function(t,e){var a=this;this.$refs[t].validate((function(t){if(t){var i={oldRoute:a.row,route:e};a.$https.fetchPut(a.$api.system.inf.updateRoute.url,i).then((function(t){var e=t.data.code,i=t.data.title,n=t.data.describe;200==e?a.$Notice.success({title:i,duration:1}):a.$Notice.error({title:i,desc:n})}))}}))},del:function(){var t=this;this.$Modal.confirm({title:"删除路由",content:"<p>当前操作将会导致该路由信息被删除，请确认删除</p>",loading:!0,onOk:function(){t.$https.fetchDelete(t.$api.system.inf.delRoute.url,t.row).then((function(e){t.$Modal.remove();var a=e.data.code,i=e.data.title,n=e.data.describe;200==a?t.$Notice.success({title:i,duration:1}):t.$Notice.error({title:i,desc:n})}))}})}}},b=Object(n.a)(x,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ButtonGroup",{attrs:{size:"small"}},[1==t.row.mgType||0==t.row.mgType?[a("Button",{on:{click:t.updateClick}},[a("Icon",{attrs:{size:"16",type:"md-clipboard"}}),t._v("\n                修改\n            ")],1),a("Button",{on:{click:t.del}},[a("Icon",{staticStyle:{"font-weight":"bold"},attrs:{size:"16",type:"ios-close-circle-outline"}}),t._v("\n                删除\n            ")],1)]:t._e()],2),a("Modal",{attrs:{title:"修改路由"},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[t.modal.spinShow?a("Spin",{attrs:{size:"large",fix:""}},[t._v("数据加载中")]):t._e(),a("Form",{ref:"formInline",attrs:{model:t.modal.formInline,rules:t.modal.ruleInline,"label-width":100}},[a("FormItem",{attrs:{prop:"ipVersion",label:"网络版本"}},[a("RadioGroup",{model:{value:t.modal.formInline.ipVersion,callback:function(e){t.$set(t.modal.formInline,"ipVersion",e)},expression:"modal.formInline.ipVersion"}},[a("Radio",{attrs:{label:"IPV4"}},[t._v("IPV4")]),a("Radio",{attrs:{label:"IPV4",disabled:""}},[t._v("IPV6")])],1)],1),a("FormItem",{attrs:{prop:"destination",label:"ip地址"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.1"},model:{value:t.modal.formInline.destination,callback:function(e){t.$set(t.modal.formInline,"destination",e)},expression:"modal.formInline.destination"}})],1),a("FormItem",{attrs:{prop:"genmask",label:"掩码/前缀"}},[a("Input",{attrs:{type:"text",placeholder:"255.255.255.0"},model:{value:t.modal.formInline.genmask,callback:function(e){t.$set(t.modal.formInline,"genmask",e)},expression:"modal.formInline.genmask"}})],1),a("FormItem",{attrs:{prop:"gateway",label:"网关"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.254"},model:{value:t.modal.formInline.gateway,callback:function(e){t.$set(t.modal.formInline,"gateway",e)},expression:"modal.formInline.gateway"}})],1),a("FormItem",{attrs:{prop:"iface",label:"网络接口"}},[a("Select",{model:{value:t.modal.formInline.iface,callback:function(e){t.$set(t.modal.formInline,"iface",e)},expression:"modal.formInline.iface"}},t._l(t.netInfs,(function(e){return a("Option",{attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formInline",t.modal.formInline)}}},[t._v("添加")])],1)],1)],1)}),[],!1,null,null,null).exports,S={components:{SimpleTable:c},data:function(){return{mgTable:{title:"管理路由列表",columns:[{title:"序号",width:70,type:"index",align:"center"},{title:"管理类型",key:"mgType",render:function(t,e){var a=e.row.mgType,i={0:["默认","default","该类型地址不属于本软件系统管理,为操作系统上的IP"],1:["受管","primary","该类型属于软件系统管理IP,软件将会同步操作系统保证有该IP地址"],2:["禁用","error","该类型当前系统不能添加,修改,删除"]},n=i.hasOwnProperty(a)?i[a][0]:"未知",s=i.hasOwnProperty(a)?i[a][1]:"warning";return t("Tooltip",{props:{placement:"right",content:i.hasOwnProperty(a)?i[a][2]:"未知类型,存在请联系管理员",maxWidth:"600"}},[t("Tag",{props:{color:s}},n)])}},{title:"是否运行",key:"state",render:function(t,e){var a=e.row.state,i=e.row.state?"是":"否",n=e.row.state?"primary":"error",s=e.row.desc;return a?t("Tag",{props:{type:"dot",color:n}},i):t("Tooltip",{props:{content:s,maxWidth:"200"}},[t("Tag",{props:{type:"dot",color:n}},i)])}},{title:"版本",width:70,key:"ipVersion"},{title:"目标",key:"destination"},{title:"掩码/前缀",key:"genmask"},{title:"网关",key:"gateway"},{title:"所属网卡",key:"iface"},{title:"操作",width:220,render:function(t,e){return t(b,{props:e})}}],render:function(t,e){return t(y)},cache:[]}}},mounted:function(){this.showNetInterface()},methods:{showNetInterface:function(){var t=this;this.$https.fetchGet(this.$api.system.inf.route.url,{ipVersion:"All"}).then((function(e){var a=e.data.data;t.mgTable.cache=a}))}}},w=Object(n.a)(S,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("SimpleTable",this._b({},"SimpleTable",this.mgTable,!1))],1)}),[],!1,null,"43190535",null).exports,_={components:{JkPages:s},data:function(){return{pages:[{label:"地址管理",name:"地址管理",render:function(t,e){return t(v)}},{label:"路由管理",name:"路由管理",render:function(t,e){return t(w)}}]}},computed:{},methods:{}},k=Object(n.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-view"},[e("JkPages",{attrs:{pages:this.pages}})],1)}),[],!1,null,"38f18e0b",null);e.default=k.exports},ca22:function(t,e,a){},ccc8:function(t,e,a){},cd13:function(t,e,a){"use strict";a.r(e),a("e5b4"),a("8dee"),a("a450");var i=a("25b1"),n={name:"UserConfigAdd",components:{},data:function(){return{platForm:{show:!1,state:!1,roleUuid:"",form:{state:null,username:"",password:"",roleUuidList:[]}},roleList:[],msgText:"",pwd:""}},computed:{},mounted:function(){this.showRole()},methods:{showRole:function(){var t=this;this.$https.fetchPost(this.$api.user.role.url+"/actions/page_search",{page:1,size:100}).then((function(e){for(var a in e.data.data.data)"安全管理员"==e.data.data.data[a].name&&e.data.data.data.splice(a,1);t.roleList=e.data.data.data})).catch((function(t){}))},showAddDrawer:function(){this.platForm.show=!0},addPlatForm:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&(t.platForm.form.state=t.platForm.state?1:0,t.platForm.form.password=t.pwd,t.platForm.form.roleUuidList.push(t.platForm.roleUuid),t.checkPlatForm()||(t.platForm.show=!1,t.$https.fetchPost(t.$api.user.user.url,t.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"用户信息添加成功",desc:"正在刷新界面",duration:2.5}),location.reload()):t.$Notice.error({title:"用户信息失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))))}))},restPlatForm:function(){},checkPlatForm:function(){var t=!1;return""===this.platForm.form.username||""===this.pwd||""===this.platForm.roleUuid?(this.$Message.error({content:"请填写用户名、密码,选择用户角色...",duration:3}),t=!0):/^[\da-zA-Z]{6,30}$/.test(this.platForm.form.username)?/^((?=.*[A-Za-z])|(?=.*\d))(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{6,30}$/.test(this.pwd)||(this.$Message.error({content:"密码填写6-30位以内英文、数字或特殊字符(至少1个字母、1个特殊字符或者至少1个数字、1个特殊字符)...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写6-30位以内英文、数字...",duration:3}),t=!0),t},checkStrong:function(t){var e=0;if(t.length<1)return e;switch(/\d/.test(t)&&e++,/[a-z]/.test(t)&&e++,/[A-Z]/.test(t)&&e++,/\W/.test(t)&&e++,e){case 1:return 1;case 2:return 2;case 3:case 4:return t.length<4?3:4}return e}},watch:{pwd:function(t,e){this.msgText=this.checkStrong(t),this.msgText>1||1==this.msgText?document.getElementById("one").style.background="red":document.getElementById("one").style.background="#eee",this.msgText>2||2==this.msgText?document.getElementById("two").style.background="orange":document.getElementById("two").style.background="#eee",4==this.msgText?document.getElementById("three").style.background="#00D1B2":document.getElementById("three").style.background="#eee"}}},s=(a("d08e"),a("c701")),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{attrs:{type:"primary"},on:{click:t.showAddDrawer}},[t._v("\n            新增\n        ")]),a("Modal",{attrs:{title:"用户配置","class-name":"vertical-center-modal",width:"500",styles:{top:"25%"}},on:{"on-ok":t.addPlatForm},model:{value:t.platForm.show,callback:function(e){t.$set(t.platForm,"show",e)},expression:"platForm.show"}},[a("Form",{ref:"plat_form",attrs:{rules:t.platForm.rules,model:t.platForm.form,"label-width":150}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"启用",prop:"subnet"}},[a("Checkbox",{model:{value:t.platForm.state,callback:function(e){t.$set(t.platForm,"state",e)},expression:"platForm.state"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"用户名",prop:"vhid"}},[a("Input",{staticStyle:{width:"250px"},model:{value:t.platForm.form.username,callback:function(e){t.$set(t.platForm.form,"username",e)},expression:"platForm.form.username"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"密码",prop:"password"}},[a("Input",{staticStyle:{width:"250px"},attrs:{type:"password"},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}}),a("div",{staticClass:"input_span"},[a("span",{staticStyle:{margin:"auto"},attrs:{id:"one"}}),a("span",{attrs:{id:"two"}}),a("span",{attrs:{id:"three"}})])],1),a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"角色",prop:"password"}},[a("Select",{staticStyle:{width:"250px"},model:{value:t.platForm.roleUuid,callback:function(e){t.$set(t.platForm,"roleUuid",e)},expression:"platForm.roleUuid"}},t._l(t.roleList,(function(t,e){return a("Option",{attrs:{label:t.name,value:t.uuid}})})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.platForm.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.addPlatForm}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"04378475",null).exports,o={name:"UserConfig",components:{jk_tabs:i.a,userAdd:r},data:function(){return{columns1:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"用户名",key:"username",align:"center"},{title:"状态",key:"state",align:"center",render:function(t,e){return t("span",0==e.row.state?"禁用":"启用")}},{title:"角色",key:"",align:"center",render:function(t,e){return t("span",e.row.roleList[0].name)}},{title:"操作",slot:"action",width:150,align:"center"}],total:null,find:{page:1,size:10},links:[{name:"用户",to:"/user/userConfig"},{name:"角色",to:"/user/userRole"},{name:"用户管理",to:"/user/userManage"}],modal:{show:!1,state:!1,roleUuid:null,username:null,form:{uuid:null,state:null,password:null,roleUuidList:[]}},roleList:[],data1:[],password:"",disabled:!1,userName:null}},mounted:function(){this.userName=this.$storage.getStorage("userName").replace(/\"/g,""),this.showData()},methods:{showRole:function(){var t=this;this.$https.fetchPost(this.$api.user.role.url+"/actions/page_search",{page:1,size:100}).then((function(e){for(var a in e.data.data.data)"安全管理员"==e.data.data.data[a].name&&e.data.data.data.splice(a,1);t.roleList=e.data.data.data})).catch((function(t){}))},showData:function(){var t=this;this.$https.fetchPost(this.$api.user.user.url+"/actions/page_search",this.find).then((function(e){t.data1=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.find.page=t,this.showData()},del:function(t,e){var a=this;this.$Modal.confirm({title:"删除用户信息",content:"<p>当前操作将会删除用户信息，请确认删除</p>",loading:!0,onOk:function(){a.$https.fetchDelete(a.$api.user.user.url+"/"+t).then((function(t){200==t.data.code?(location.reload(),e==a.userName&&a.logout()):(a.$Modal.remove(),a.$Message.info("用户信息删除失败"))})).catch((function(t){a.$Notice.error({title:"请求失败",desc:t,duration:2.5})}))}})},update:function(t,e){e==this.userName?this.disabled=!0:this.disabled=!1,document.getElementById("oneShow").style.background="#eee",document.getElementById("twoShow").style.background="#eee",document.getElementById("threeShow").style.background="#eee",this.showRole(),this.modal.show=!0,this.modal.form.uuid=this.data1[t].uuid,this.password=null,this.modal.state=0!=this.data1[t].state,this.modal.username=this.data1[t].username,this.modal.roleUuid=this.data1[t].roleList[0].uuid},restPlatForm:function(){this.$refs.info_form.resetFields()},addPlatForm:function(){var t=this;this.$refs.info_form.validate((function(e){e&&(t.modal.form.state=t.modal.state?1:0,t.modal.form.password=t.password,t.modal.form.roleUuidList.push(t.modal.roleUuid),t.checkPlatForm()||(t.modal.show=!1,t.$https.fetchPut(t.$api.user.user.url,t.modal.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"用户信息修改成功",desc:"正在刷新界面",duration:2.5}),location.reload()):t.$Notice.error({title:"用户信息修改失败",desc:"错误代码："+e.data.status,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))))}))},checkPlatForm:function(){var t=!1;return null!=this.password&&""!=this.password&&(/^((?=.*[A-Za-z])|(?=.*\d))(?=.*[$@$!%*#?&])[A-Za-z\d$@$!%*#?&]{6,30}$/.test(this.password)||(this.$Message.error({content:"密码填写6-30位以内英文、数字或特殊字符(至少1个字母、1个特殊字符或者至少1个数字、1个特殊字符)...",duration:3}),t=!0)),t},logout:function(){var t=this;this.$https.fetchGet(this.$api.user.logout.url).then((function(e){200==e.data.code&&(sessionStorage.removeItem("users"),sessionStorage.removeItem("userName"),sessionStorage.removeItem("loginType"),t.$Notice.info({title:"退出成功"}),t.$router.push({path:"/login"}))})).catch((function(t){}))},checkStrong:function(t){var e=0;if(t.length<1)return e;switch(/\d/.test(t)&&e++,/[a-z]/.test(t)&&e++,/[A-Z]/.test(t)&&e++,/\W/.test(t)&&e++,e){case 1:return 1;case 2:return 2;case 3:case 4:return t.length<4?3:4}return e}},watch:{password:function(t,e){null!=t&&(this.msgText=this.checkStrong(t),this.msgText>1||1==this.msgText?document.getElementById("oneShow").style.background="red":document.getElementById("oneShow").style.background="#eee",this.msgText>2||2==this.msgText?document.getElementById("twoShow").style.background="orange":document.getElementById("twoShow").style.background="#eee",4==this.msgText?document.getElementById("threeShow").style.background="#00D1B2":document.getElementById("threeShow").style.background="#eee")}}},l=(a("932d"),Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),a("userAdd",{staticStyle:{float:"right"}})],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"550px"}},[a("Table",{attrs:{border:"",size:"small",columns:t.columns1,data:t.data1},scopedSlots:t._u([{key:"action",fn:function(e){var i=e.row,n=e.index;return"sysAdmin"!=i.username&&"userAdmin"!=i.username&&"logAdmin"!=i.username?[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.update(n,i.username)}}},[t._v("修改")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.del(i.uuid,i.username)}}},[t._v("删除")])]:void 0}}],null,!0)}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.find.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.find.page,total:t.total,"page-size":t.find.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)]),a("Modal",{attrs:{title:"用户配置","class-name":"vertical-center-modal",width:"500",styles:{top:"25%"}},on:{"on-ok":t.addPlatForm},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[a("Form",{ref:"info_form",attrs:{rules:t.modal.rules,model:t.modal.form,"label-width":110}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"启用",prop:"subnet"}},[a("Checkbox",{attrs:{disabled:t.disabled},model:{value:t.modal.state,callback:function(e){t.$set(t.modal,"state",e)},expression:"modal.state"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"用户名",prop:"vhid"}},[a("Input",{staticStyle:{width:"250px"},attrs:{disabled:""},model:{value:t.modal.username,callback:function(e){t.$set(t.modal,"username",e)},expression:"modal.username"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"密码",prop:"password"}},[a("Input",{staticStyle:{width:"250px"},attrs:{type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("span",{staticStyle:{"margin-left":"10px","font-size":"12px",color:"red"}},[t._v("(不修改请留空...)")]),a("div",{staticClass:"input_span"},[a("span",{staticStyle:{margin:"auto"},attrs:{id:"oneShow"}}),a("span",{attrs:{id:"twoShow"}}),a("span",{attrs:{id:"threeShow"}})])],1),a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"角色",prop:"password"}},[a("Select",{staticStyle:{width:"250px"},model:{value:t.modal.roleUuid,callback:function(e){t.$set(t.modal,"roleUuid",e)},expression:"modal.roleUuid"}},t._l(t.roleList,(function(t,e){return a("Option",{attrs:{label:t.name,value:t.uuid}})})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.modal.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.addPlatForm}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"5c19f1b8",null));e.default=l.exports},cd32:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEuklEQVRYR8WXf4hUVRTHv2dmd9o2q4EsSEWtpB+ICYr9YZmFUVSIaCxhVJv9sS3aes8dbCv74ZaGsbHzzn2LSwmpKf2S0JC0hNB+F0WSEf0CK7RCCa1QInZ23om7vbeMOrPOW//w/TPMPe+e+7nn9yOc4YfO8PlIBcDMXQBmnwL6fRHx79X1pAXYDeCGU2h+T0RurOt0ILUFBgFEpCo4MyuAkQMw8woAo2L6K4jogKr+UXGbVgATATxV44Z+/y8AXkrkqjqOiHIADvk1VT3onOtJ5EM3sdZOVtVv6jXd6bxHRBcEQXDE6zjOlNbaSaVSqcELGhoaPlPV74jo0dM5DMDuKIrejaKow+tpbGw8GgTBbydZ4MRDmPlnVf3XOXdVLYC2trbmtWvX/lMpZ+aJIuLdAGvt2arq5RtEZFE1PTWzgJn3ArhQRMb4jcy81f+KyPxEkTHGW+iAiNycrHlwAF/599rb2y9qamo6RERhEAQmLcCHAKaLSHMMsCMGmlFxmI96DzV4kcWLF4/K5XJHieitIAjmWmsvVdV9RLQqCIInUgEYY7YT0W2Jcmvt5iiKpjnnJtUC6OjoGJfNZg8A2CQi9xpjriaivara6Zx7LhUAM78CYGF/f/+5fX19x5j5RQDzRGT0CQBfiMg1sc+nqOrXAHpFZGmhUJgZRdHHqtrunHshLcDzAB4gonE+aq21TlWXiMhglsRuOQhgfwXALFX9AMBKEXnSGHMLEb0D4C4ReTUVgLW2W1Ufymazk3t6er41xjxDRMtzudx53d3dR2sAzFXVbURUCHzUGXMHEb2RyWRuLxaLPoZOempmgTHmcSJaGUXRtWEYfmKtfURVV2cymfHFYtH72WfGcRZg5nsAbIyi6P4wDNdba1tVdUMURbPCMPwoLcBSInIAfCC+bYx5kIh6VXWqc877uRqALzYhES0IgmBrtT0nQgxXB+4DsJ6IFgZB8BozD/5X1dnOOe/nagA+1Z4GMEdEdiVWA3BJUpzqBrDWzlfVLUkEG2NaiGizqs5zzm2rBmCMKRKRjevHHmZeBeCxytpfN0ChUJjjaziAh0Wkm5lvBbBDVVudcxtrAKwjokXlcnlSb2/vPmYWACafzzd2dXUNpI2BGUT0OYDVIrLcWjuYYqpqnHNhDYAtRDS/VCqNXrNmzeG4dtwpIkmLT5UFfh74XlX7nHNLmHkagC+JaEUQBN7PJ8WAtXaXj5F8Pn+WvzEzvw5gVtJPUlmAmS8G8DuAl0Xk7kKhcHkURT/8X/rF+9kD+F5QWQn3qOr4pFpaa7er6mUicmW1w/1azSxYtmzZOQMDA8eSxtLZ2Tmmv7/f9/Gh1hoDDDWjuBOWRWSwXzCzz5ampFKmskCsoATgUxG5vq2t7fzm5ua/ALyZtOQqAH8C+ElEpvv9xpg9AI44525KbYEY4DCAX0VkaktLS3bs2LE+koeGTmbeH8tnVrikUv6jH/OccwtGCuCHi4yITIgPGJp2/H9r7ZRyufx3GIYexJv8ODkz+xjaWWsaGjYGYoV+KpogIvlaNxhunZn9cLKu1jRUD4Cfiq4byeHJnuGmoXoA6vkUG5ZPVZ91zu0cUQyczs3r3Zvq27BepWne+w/waZI/NTX10AAAAABJRU5ErkJggg=="},cec9:function(t,e,a){"use strict";a.r(e),a("1bc78"),a("a450"),a("6a61");var i=a("2e91"),n=a("28f8"),s=a("8adf"),r=a("5f3f"),o={name:"ReportMenu",inject:["reload"],components:{myTree:s.a,contentTabs:r.default},data:function(){var t;return{theData:[],data:[],menuName:"menuName",item:{},switch1:!1,loading:!1,modal11:!1,modal12:!1,test1:!1,channel:{form:(t={name:null,remark:null},Object(n.a)(t,"name",null),Object(n.a)(t,"driveType",null),t)},driver:{form:{classify:null,driveType:null,manufacturer:null}},modal13:{show:!1,url:null,driveType:null,data:{},params:[],nodes_list:[],users_list:[],val:{nameSpaceIndex:2,alarmRate:3,quotaRate:3,reportType:"WH"}},modal14:{show:!1,url:null,data:{}},driveUrl:null,add_users_disabled:!1,add_nodes_disabled:!1,add_mqtt_disabled:!1,links:[{title:"基本配置",child:[{name:"名称",input:!0,swith:!1,val:"test"},{name:"是否开启",input:!1,swith:!0,val:"test1"}]},{title:"通道配置",child:[{name:"名称",input:!0,swith:!1,val:"test3"}]}],data1:[{title:"行业标准",expand:!1,children:[{title:"OPC-DA-UPLOAD",expand:!0,driveType:"OPC_DA_UPLOAD",manufacturer:"通用协议"},{title:"OPC-UA-UPLOAD",expand:!0,driveType:"OPC_UA_UPLOAD",manufacturer:"通用协议"},{title:"OPC-UA-SERVER",expand:!0,driveType:"OPC_UA_SERVER",manufacturer:"通用协议"},{title:"SOCKET",expand:!0,driveType:"SOCKET_CLIENT",manufacturer:"通用协议"},{title:"MQTT",expand:!0,driveType:"MQTT_CLIENT",manufacturer:"IBM"},{title:"SQL",expand:!0,driveType:"SQL",manufacturer:"通用协议"}]}]}},created:function(){this.showData()},mounted:function(){},methods:{getSubMenu:function(t,e){null!=JSON.stringify(t)&&(this.item=t)},findChannel:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$https.fetchGet(this.$api.upload.channelInfo.url);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),findDrive:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(e){var a,i,n,s,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e,t.t0=regeneratorRuntime.keys(a[0].children);case 2:if((t.t1=t.t0()).done){t.next=12;break}return i=t.t1.value,"OPC_UA_SERVER"==(n=a[0].children[i].driveType)?this.driveUrl=this.$api.upload.drive.uaServer.url:"OPC_UA_UPLOAD"==n?this.driveUrl=this.$api.upload.drive.uaUpload.url:"OPC_DA_UPLOAD"==n?this.driveUrl=this.$api.upload.drive.daUpload.url:"SOCKET_CLIENT"==n?this.driveUrl=this.$api.upload.drive.socket.url:"MQTT_CLIENT"==n?this.driveUrl=this.$api.upload.drive.mqtt.url:"SQL"==n&&(this.driveUrl=this.$api.upload.drive.sql.url),t.next=8,this.$https.fetchGet(this.driveUrl+"/findDrive/"+a[0].children[i].uuid);case 8:for(r in(s=t.sent).data.data)a[0].children[i].children.push({id:"30",menuName:s.data.data[r].name,uuid:s.data.data[r].uuid,remark:s.data.data[r].remark,enable:s.data.data[r].enable,driveType:n});t.next=2;break;case 12:return t.abrupt("return",a);case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),showData:function(){var t=this;this.findChannel().then((function(e){var a=[{id:"10",menuName:"转发服务",menuCode:"20",children:[]}];for(var i in e.data.data)a[0].children.push({id:"20",menuName:e.data.data[i].name,uuid:e.data.data[i].uuid,driveType:e.data.data[i].driveType,children:[],remark:e.data.data[i].remark,enable:e.data.data[i].enable});t.findDrive(a).then((function(e){t.theData=e}))}))},addChannel:function(){this.modal11=!this.modal11;var t=this.theData[0].children.length+1;this.channel.form.name="通道C"+t},addPlatForm:function(){this.modal12=!this.modal12},addDrive:function(){"OPC_UA_SERVER"==this.item.driveType&&this.item.children.length>0||"SOCKET_CLIENT"==this.item.driveType&&this.item.children.length>0?this.$Notice.error({title:"驱动配置失败",desc:"该协议只能添加一个驱动配置信息",duration:3}):this.modal13.show=!this.modal13.show,this.links=[{title:"基本信息",data:"base",child:[{name:"名称",input:!0,sign:!0,data:"name",val:""},{name:"描述",input:!0,data:"remark",val:""},{name:"状态",swith:!0,data:"enable",val:!0}]}],"OPC_UA_SERVER"!=this.item.driveType&&"MQTT_CLIENT"!=this.item.driveType&&"OPC_UA_UPLOAD"!=this.item.driveType&&"OPC_DA_UPLOAD"!=this.item.driveType&&"SQL"!=this.item.driveType||this.links.push({title:"配置信息",data:"loopUpload",child:[{name:"上报间隔(秒)",input:!0,data:"uploadInterval",val:"5"}]}),this.modal13.data={base:{channelUuid:null,enable:!1,name:null,remark:null},driveType:null,loopUpload:{uploadInterval:5}},this.modal13.data.base.channelUuid=this.item.uuid,this.modal13.data.driveType=this.item.driveType,this.modal13.driveType=this.item.driveType,"OPC_UA_SERVER"==this.item.driveType?(this.modal13.url=this.$api.upload.drive.uaServer.url,this.modal13.params=[],this.modal13.nodes_list=[],this.modal13.users_list=[],this.modal13.params.push({name:"服务浏览路径",local:"discovery",val:"/visec/descovery"},{name:"HTTP端口",local:"httpPort",val:"8443"},{name:"服务路径",local:"path",val:"visec"},{name:"根节点",local:"rootNode",val:"visecnode"},{name:"TCP端口",local:"tcpPort",val:"12686"}),this.modal13.nodes_list.push({nameVal:"",sqlStrVal:""}),this.modal13.users_list.push({nameVal:"",passwordVal:""})):"MQTT_CLIENT"==this.item.driveType?(this.modal13.url=this.$api.upload.drive.mqtt.url,this.links.push({title:"MQTT连接信息",data:"params",child:[{name:"上报IP地址",input:!0,sign:!0,data:"host",val:""},{name:"端口",input:!0,sign:!0,data:"port",val:""},{name:"用户名",input:!0,sign:!0,data:"userName",val:""},{name:"密码",pwd:!0,sign:!0,data:"password",val:""},{name:"客户端ID",input:!0,sign:!0,data:"clientId",val:""}]}),this.modal13.params=[],this.modal13.params.push({nameVal:"",qosVal:"0",topicVal:"",topicIdVal:""}),this.modal13.data.params={clientId:null,host:null,password:null,port:null,userName:null}):"OPC_UA_UPLOAD"==this.item.driveType?(this.modal13.url=this.$api.upload.drive.uaUpload.url,this.links.push({title:"OPC UA连接信息",data:"params",child:[{name:"用户名",input:!0,sign:!0,data:"user",val:""},{name:"密码",pwd:!0,sign:!0,data:"password",val:""},{name:"url",input:!0,sign:!0,data:"url",val:"opc.tcp://"},{name:"安全模式",select:!0,data:"securitypolicy",val:"none",cityList:[{name:"none",val:"none"},{name:"basic128rsa15",val:"basic128rsa15"},{name:"basic256",val:"basic256"},{name:"basic256sha256",val:"basic256sha256"},{name:"aes128_sha256_rsaOaep",val:"aes128_sha256_rsaOaep"},{name:"aes256_sha256_rsapss",val:"aes256_sha256_rsapss"}]}]}),this.modal13.data.params={password:null,securitypolicy:null,url:null,user:null}):"OPC_DA_UPLOAD"==this.item.driveType?(this.modal13.url=this.$api.upload.drive.daUpload.url,this.links.push({title:"OPC DA连接信息",data:"params",child:[{name:"连接类型",select:!0,data:"conntype",val:2,cityList:[{name:"服务名称",val:2},{name:"CLSID",val:1}]},{name:"服务器名称",input:!0,sign:!1,data:"progid",val:""},{name:"服务器IP地址",input:!0,sign:!0,data:"host",val:""},{name:"服务器用户名",input:!0,sign:!1,data:"user",val:""},{name:"服务器密码",pwd:!0,sign:!1,data:"password",val:""},{name:"超时时间(毫秒)",input:!0,sign:!0,data:"timeout",val:"3000"}]}),this.modal13.data.params={password:null,progid:null,host:null,user:null,timeout:null,conntype:null}):"SOCKET_CLIENT"==this.item.driveType?(this.modal13.url=this.$api.upload.drive.socket.url,this.links.push({title:"SOCKET基本配置",data:"config",child:[{name:"APP ID",input:!0,sign:!0,data:"appId",val:""},{name:"SERVICE ID",input:!0,sign:!0,data:"serviceId",val:""},{name:"网关ID",input:!0,sign:!0,data:"gatewayId",val:""},{name:"企业编码",input:!0,sign:!0,data:"enterpriseId",val:""}]}),this.modal13.params=[],this.modal13.params.push({cipherCodeVal:"",cipherIvVal:"",encryptionTypeVal:"AES128",reportIpVal:""}),this.modal13.data.config={appId:null,enterpriseId:null,gatewayId:null,serviceId:null}):"SQL"==this.item.driveType&&(this.modal13.url=this.$api.upload.drive.sql.url,this.links.push({title:"SQL连接信息",data:"params",child:[{name:"数据库名",input:!0,sign:!0,data:"dbName",val:""},{name:"IP",input:!0,sign:!0,data:"host",val:""},{name:"端口",input:!0,sign:!0,data:"port",val:""},{name:"用户名",input:!0,sign:!0,data:"username",val:""},{name:"密码",pwd:!0,sign:!0,data:"password",val:""},{name:"SQL驱动类型",select:!0,data:"type",val:"MySQL",cityList:[{name:"MySQL",val:"MySQL"},{name:"SQLSERVER",val:"SQLSERVER"},{name:"ORACLE",val:"ORACLE"}]}]}),this.modal13.data.params={dbName:null,host:null,password:null,port:null,type:null,username:null})},add_nodes:function(){this.modal13.nodes_list.length>=10?this.add_nodes_disabled=!0:this.modal13.nodes_list.push({})},del_nodes:function(t){this.add_nodes_disabled=!1,this.modal13.nodes_list.splice(t,1)},add_users:function(){this.modal13.users_list.length>=5?this.add_users_disabled=!0:this.modal13.users_list.push({})},del_users:function(t){this.add_users_disabled=!1,this.modal13.users_list.splice(t,1)},add_params:function(){this.modal13.params.length>=10?this.add_mqtt_disabled=!0:this.modal13.params.push({})},del_params:function(t){this.add_mqtt_disabled=!1,this.modal13.params.splice(t,1)},selectChange:function(t){var e=t[t.length-1];this.driver.form.driveType=e.driveType,this.driver.form.name=e.title,this.driver.form.manufacturer=e.manufacturer,e.nodeKey>=1&&e.nodeKey<=18?this.driver.form.classify="行业标准":e.nodeKey>=20?this.driver.form.classify="PLC系列":0!=e.nodeKey&&19!=e.nodeKey||(this.driver.form.classify=null,this.driver.form.driveType=null,this.driver.form.manufacturer=null)},okDriver:function(){this.channel.form.driveType=this.driver.form.driveType},okAddChannel:function(){var t=this,e=0;for(var a in this.theData[0].children)if("OPC_UA_SERVER"==this.channel.form.driveType&&this.theData[0].children[a].driveType==this.channel.form.driveType||"SOCKET_CLIENT"==this.channel.form.driveType&&this.theData[0].children[a].driveType==this.channel.form.driveType){this.$Notice.error({title:"通道配置失败",desc:"该协议只能添加一个通道配置信息",duration:3}),e++;break}0==this.checkChannel()&&0==e&&(this.modal11=!1,this.$https.fetchPost(this.$api.upload.addChannel.url,this.channel.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"通道配置成功",desc:"正在刷新界面",duration:3}),t.showData(),t.reload()):t.$Notice.error({title:"通道配置失败",desc:e.data.describe,duration:3})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:3})})))},delChannel:function(){var t=this;this.$https.fetchPost(this.$api.upload.delChannel.url+"/"+this.item.uuid).then((function(e){200==e.data.code?(t.$Notice.success({title:"通道删除成功",desc:"正在刷新界面",duration:3}),t.showData(),t.reload(),t.$router.push({path:"/engineering/reportingService"})):t.$Notice.error({title:"通道删除失败",desc:e.data.describe,duration:3})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:3})}))},delDrive:function(){var t=this;this.$https.fetchDelete(this.driveUrl+"/"+this.item.uuid).then((function(e){200==e.data.code?(t.$Notice.success({title:"驱动删除成功",desc:"正在刷新界面",duration:2.5}),t.showData(),t.$router.push({path:"/engineering/reportingService"})):t.$Notice.error({title:"驱动删除失败",desc:e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5})}))},okAddDrive:function(){var t=this;for(var e in this.links)for(var a in this.links[e].child){var i=this.links[e].data,n=this.links[e].child[a].data;this.modal13.data[i][n]=this.links[e].child[a].val}var s=this.checkDrive(),r=null;if("OPC_UA_SERVER"==this.modal13.driveType){var o={},l={};for(var d in this.modal13.nodes_list)o[d]={name:"",sqlStr:""};for(var c in this.modal13.users_list)l[c]={name:"",password:""};for(var p in this.modal13.data.params={discovery:null,httpPort:null,path:null,rootNode:null,tcpPort:null,nodes:o,users:l},this.modal13.params){var u=this.modal13.params[p].local;this.modal13.data.params[u]=this.modal13.params[p].val}for(var m in this.modal13.nodes_list)this.modal13.data.params.nodes[m].name=this.modal13.nodes_list[m].nameVal,this.modal13.data.params.nodes[m].sqlStr=this.modal13.nodes_list[m].sqlStrVal;var h={};for(var f in this.modal13.users_list)this.modal13.data.params.users[f].name=this.modal13.users_list[f].nameVal,this.modal13.data.params.users[f].password=this.modal13.users_list[f].passwordVal,h[this.modal13.data.params.users[f].name]=this.modal13.data.params.users[f];this.modal13.data.params.users=h,r=this.checkServerDrive()}else if("OPC_UA_UPLOAD"==this.modal13.driveType)this.modal13.data.nameSpaceIndex=this.modal13.val.nameSpaceIndex,r=this.checkUploadDrive();else if("OPC_DA_UPLOAD"==this.modal13.driveType)r=this.checkDaUploadDrive();else if("SOCKET_CLIENT"==this.modal13.driveType){var v={};for(var g in this.modal13.params)v[g]={cipherCode:"",cipherIv:"",encryptionType:"AES128",reportIp:""};for(var y in this.modal13.data.alarmRate=this.modal13.val.alarmRate,this.modal13.data.ipMap=v,this.modal13.data.quotaRate=this.modal13.val.quotaRate,this.modal13.data.reportType=this.modal13.val.reportType,this.modal13.params)this.modal13.data.ipMap[y].cipherCode=this.modal13.params[y].cipherCodeVal,this.modal13.data.ipMap[y].cipherIv=this.modal13.params[y].cipherIvVal,this.modal13.data.ipMap[y].encryptionType=this.modal13.params[y].encryptionTypeVal,this.modal13.data.ipMap[y].reportIp=this.modal13.params[y].reportIpVal;r=this.checkSocketDrive()}else if("MQTT_CLIENT"==this.modal13.driveType){var x={};for(var b in this.modal13.params)x[b]={name:"",qos:"",topic:"",topicId:""};for(var S in this.modal13.data.topics=x,this.modal13.params)this.modal13.data.topics[S].name=this.modal13.params[S].nameVal,this.modal13.data.topics[S].qos=this.modal13.params[S].qosVal,this.modal13.data.topics[S].topic=this.modal13.params[S].topicVal,this.modal13.data.topics[S].topicId=this.modal13.params[S].topicIdVal;r=this.checkMqttDrive()}else"SQL"==this.modal13.driveType&&(r=this.checkSQLDrive());0==s&&0==r&&(this.modal13.show=!1,this.$https.fetchPost(this.modal13.url+"/addDrive",this.modal13.data).then((function(e){200==e.data.code?(t.$Notice.success({title:"驱动配置成功",desc:"正在刷新界面",duration:2.5}),t.showData()):t.$Notice.error({title:"驱动配置失败",desc:e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5})})))},is_Connect:function(t){var e=this;this.loading=!0;var a=null;"OPC_UA_UPLOAD"==this.modal13.driveType||"OPC_UA_UPLOAD"==this.modal13.driveType?a={password:this.links[2].child[1].val,securitypolicy:this.links[2].child[3].val,url:this.links[2].child[2].val,user:this.links[2].child[0].val}:"SOCKET_CLIENT"==this.modal13.driveType?a={ipPort:this.modal13.params[t].reportIpVal}:"MQTT_CLIENT"==this.modal13.driveType?a={clientId:this.links[2].child[4].val,host:this.links[2].child[0].val,password:this.links[2].child[3].val,port:this.links[2].child[1].val,userName:this.links[2].child[2].val}:"SQL"==this.modal13.driveType&&(a={dbName:this.links[2].child[0].val,host:this.links[2].child[1].val,password:this.links[2].child[4].val,port:this.links[2].child[2].val,type:this.links[2].child[5].val,username:this.links[2].child[3].val}),this.$https.fetchPost(this.modal13.url+"/isConnect",a).then((function(t){t.data.data?(e.$Notice.success({title:"连接成功",desc:"请进行下一步...",duration:2.5}),e.loading=!1):e.$Notice.error({title:"连接失败",desc:"请重新填写...",duration:2.5}),e.loading=!1})).catch((function(t){e.$Notice.error({title:"请求失败",duration:2.5}),e.loading=!1}))},checkChannel:function(){var t=!1;return null!=this.channel.form.name&&null!=this.channel.form.driveType||(this.$Message.error({content:"请填写通道名称或者通道驱动...",duration:3}),t=!0),t},checkDrive:function(){var t=!1;return""===this.modal13.data.base.name||""===this.modal13.data.loopUpload.uploadInterval?(this.$Message.error({content:"请填写驱动名称或者间隔时间...",duration:3}),t=!0):/^[1-9]\d{0,2}$/.test(this.modal13.data.loopUpload.uploadInterval)?/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(this.modal13.data.base.name)||(this.$Message.error({content:"驱动名称不允许特殊符号...",duration:3}),t=!0):(this.$Message.error({content:"间隔时间填写1-999之间的数字...",duration:3}),t=!0),t},checkDaUploadDrive:function(){var t=!1;return/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.modal13.data.params.host)?/^[1-9]\d{0,7}$/.test(this.modal13.data.params.timeout)||(this.$Message.error({content:"超时时间填写1-99999999之间的数字...",duration:3}),t=!0):(this.$Message.error({content:"服务器IP地址请填写正确的IP格式...",duration:3}),t=!0),t},checkUploadDrive:function(){var t=!1;return""===this.modal13.data.params.password||""===this.modal13.data.params.user||""===this.modal13.data.params.url||""===this.modal13.data.nameSpaceIndex?(this.$Message.error({content:"请填写用户名、密码、URL、名称空间编号...",duration:3}),t=!0):/^[\da-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.modal13.data.params.user)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.modal13.data.params.password)||(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字或中文...",duration:3}),t=!0),t},checkServerDrive:function(){var t=!1;for(var e in""===this.modal13.data.params.discovery||""===this.modal13.data.params.httpPort||""===this.modal13.data.params.path||""===this.modal13.data.params.rootNode||""===this.modal13.data.params.tcpPort?(this.$Message.error({content:"请填写HTTP端口、TCP端口、服务路径、服务浏览路径、根节点...",duration:3}),t=!0):/^[1-9]\d{0,5}$/.test(this.modal13.data.params.httpPort)&&/^[1-9]\d{0,5}$/.test(this.modal13.data.params.tcpPort)?/^[A-Za-z1-9]{0,18}$/.test(this.modal13.data.params.path)&&/^[A-Za-z1-9]{0,18}$/.test(this.modal13.data.params.rootNode)?/^[A-Za-z1-9/]{0,24}$/.test(this.modal13.data.params.discovery)||(this.$Message.error({content:"服务浏览路径填写24位以内的数字与英文,不能为0...",duration:3}),t=!0):(this.$Message.error({content:"服务路径、根路径填写18位以内的数字与英文,不能为0...",duration:3}),t=!0):(this.$Message.error({content:"HTTP端口、TCP端口填写5位以内的数字,不能为0...",duration:3}),t=!0),this.modal13.data.params.nodes)""===this.modal13.data.params.nodes[e].name||""===this.modal13.data.params.nodes[e].sqlStr?(this.$Message.error({content:"请填写NODE名称、发布标识...",duration:3}),t=!0):/^[1-9a-zA-Z]{0,18}$/.test(this.modal13.data.params.nodes[e].name)&&/^[1-9a-zA-Z]{0,18}$/.test(this.modal13.data.params.nodes[e].sqlStr)||(this.$Message.error({content:"NODE名称、发布标识填写18位以内英文、数字,不能为0...",duration:3}),t=!0);for(var a in this.modal13.data.params.users)""===this.modal13.data.params.users[a].name||""===this.modal13.data.params.users[a].password?(this.$Message.error({content:"请填写用户名、密码...",duration:3}),t=!0):/^[\da-zA-Z_]{0,30}$/.test(this.modal13.data.params.users[a].name)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.modal13.data.params.password)||(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字...",duration:3}),t=!0);return t},checkSocketDrive:function(){var t=!1;for(var e in""===this.modal13.data.config.appId||""===this.modal13.data.config.enterpriseId||""===this.modal13.data.config.gatewayId||""===this.modal13.data.config.serviceId||""===this.modal13.data.alarmRate||""===this.modal13.data.quotaRate?(this.$Message.error({content:"请填写APP ID、企业编码、网关ID、SERVICE ID、告警频率、指标频率...",duration:3}),t=!0):/^[1-9]\d{0,3}$/.test(this.modal13.data.alarmRate)&&/^[1-9]\d{0,3}$/.test(this.modal13.data.quotaRate)||(this.$Message.error({content:"告警频率、指标频率填写3位以内的数字,不能为0...",duration:3}),t=!0),this.modal13.data.ipMap)""===this.modal13.data.ipMap[e].cipherCode||""===this.modal13.data.ipMap[e].cipherIv||""===this.modal13.data.ipMap[e].encryptionType||""===this.modal13.data.ipMap[e].reportIp?(this.$Message.error({content:"请填写加密密钥、向量IV、加密类型、上报地址...",duration:3}),t=!0):/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5]):([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.modal13.data.ipMap[e].reportIp)||(this.$Message.error({content:"上报地址请填写正确的 IP:端口 格式...",duration:3}),t=!0);return t},checkMqttDrive:function(){var t=!1;return""===this.modal13.data.params.clientId||""===this.modal13.data.params.host||""===this.modal13.data.params.password||""===this.modal13.data.params.userName||""===this.modal13.data.params.port?(this.$Message.error({content:"请填写客户端ID、上报IP地址、用户名、密码、端口...",duration:3}),t=!0):/^[\da-zA-Z_]{0,30}$/.test(this.modal13.data.params.userName)&&/^[\da-zA-Z_]{0,30}$/.test(this.modal13.data.params.clientId)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.modal13.data.params.password)?/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.modal13.data.params.port)?/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.modal13.data.params.host)||(this.$Message.error({content:"请填写正确的IP格式...",duration:3}),t=!0):(this.$Message.error({content:"请正确填写端口号(1-65535)...",duration:3}),t=!0):(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"客户端ID、用户名填写18位以内英文、数字...",duration:3}),t=!0),t},checkSQLDrive:function(){var t=!1;return""===this.modal13.data.params.dbName||""===this.modal13.data.params.host||""===this.modal13.data.params.password||""===this.modal13.data.params.username||""===this.modal13.data.params.port?(this.$Message.error({content:"请填写数据库名、IP、密码、端口、用户名...",duration:3}),t=!0):/^[\da-zA-Z_./!@#$%^&*[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘]{0,30}$/.test(this.modal13.data.params.username)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.modal13.data.params.password)?/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.modal13.data.params.port)?/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.modal13.data.params.host)||(this.$Message.error({content:"请填写正确的IP格式...",duration:3}),t=!0):(this.$Message.error({content:"请正确填写端口号(1-65535)...",duration:3}),t=!0):(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字或特殊字符......",duration:3}),t=!0),t}}},l=(a("4264"),a("c701")),d={name:"ReportingService",components:{reportMenu:Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"min-width":"200px",height:"770px",float:"left",border:"1px solid rgba(0,0,0,.2)","box-shadow":"2px 3px 5px rgba(0,0,0,.3)","border-radius":"4px",margin:"15px 0 0 20px","background-color":"#fff",overflow:"auto"}},[a("div",{staticClass:"treesclass"},[a("my-tree",{attrs:{data:t.theData,name:t.menuName,loading:t.loading},on:{getSubMenu:t.getSubMenu}})],1),a("ul",{staticClass:"dropdown-menu",attrs:{id:"msgRightMenu"}},[a("li",[a("a",{staticStyle:{"text-align":"center","font-size":"12px"},attrs:{id:"adddepart"},on:{click:t.addChannel}},[t._v("新建通道...")])])]),a("ul",{staticClass:"dropdown-menu",attrs:{id:"msgRightMenu1"}},[a("li",[a("a",{staticStyle:{"text-align":"center","font-size":"12px"},on:{click:t.addDrive}},[t._v("新建驱动...")])]),a("li",[a("a",{staticStyle:{"text-align":"center","font-size":"12px"},on:{click:t.delChannel}},[t._v("删除通道...")])])]),a("ul",{staticClass:"dropdown-menu",attrs:{id:"msgRightMenu2"}},[a("li",[a("a",{staticStyle:{"text-align":"center","font-size":"12px"},on:{click:t.delDrive}},[t._v("删除驱动...")])])]),a("Modal",{attrs:{title:"通道","class-name":"vertical-center-modal",width:"600",styles:{top:"25%"}},on:{"on-ok":t.okAddChannel},model:{value:t.modal11,callback:function(e){t.modal11=e},expression:"modal11"}},[a("div",{staticStyle:{width:"100%",height:"150px"}},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("基本信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"200px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("名称:")]),a("Input",{staticStyle:{width:"130px"},model:{value:t.channel.form.name,callback:function(e){t.$set(t.channel.form,"name",e)},expression:"channel.form.name"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),a("div",{staticStyle:{float:"left","margin-left":"10px",width:"200px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"130px"},model:{value:t.channel.form.remark,callback:function(e){t.$set(t.channel.form,"remark",e)},expression:"channel.form.remark"}})],1)])]),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"10px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("通道配置")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"190px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("名称:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:t.driver.form.name,callback:function(e){t.$set(t.driver.form,"name",e)},expression:"driver.form.name"}})],1),a("div",{staticStyle:{float:"left","margin-left":"10px",width:"285px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"130px","margin-right":"10px"},attrs:{disabled:""},model:{value:t.channel.form.driveType,callback:function(e){t.$set(t.channel.form,"driveType",e)},expression:"channel.form.driveType"}}),a("Button",{attrs:{size:"small"},on:{click:t.addPlatForm}},[t._v("选择协议")])],1)])])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.modal11=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.okAddChannel}},[t._v("确定")])],1)]),a("Modal",{attrs:{title:"请选择协议","class-name":"vertical-center-modal",width:"900",styles:{top:"15%"}},on:{"on-ok":t.okDriver},model:{value:t.modal12,callback:function(e){t.modal12=e},expression:"modal12"}},[a("div",{staticStyle:{width:"100%",height:"350px"}},[a("div",{staticStyle:{width:"36%","margin-left":"50px",height:"350px",border:"1px solid rgba(0,0,0,.2)","box-shadow":"2px 3px 5px rgba(0,0,0,.3)","border-radius":"4px",float:"left",overflow:"auto"}},[a("Tree",{attrs:{data:t.data1},on:{"on-select-change":t.selectChange}})],1),a("div",{staticStyle:{width:"30%","margin-left":"50px",float:"left"}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("分类:")]),a("Input",{staticStyle:{width:"170px"},attrs:{disabled:""},model:{value:t.driver.form.classify,callback:function(e){t.$set(t.driver.form,"classify",e)},expression:"driver.form.classify"}})],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("名称:")]),a("Input",{staticStyle:{width:"170px"},attrs:{disabled:""},model:{value:t.driver.form.name,callback:function(e){t.$set(t.driver.form,"name",e)},expression:"driver.form.name"}})],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("厂家:")]),a("Input",{staticStyle:{width:"170px"},attrs:{disabled:""},model:{value:t.driver.form.manufacturer,callback:function(e){t.$set(t.driver.form,"manufacturer",e)},expression:"driver.form.manufacturer"}})],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("描述:")]),a("Input",{staticStyle:{width:"170px"},attrs:{disabled:""},model:{value:t.driver.form.driveType,callback:function(e){t.$set(t.driver.form,"driveType",e)},expression:"driver.form.driveType"}})],1)])])]),a("Modal",{attrs:{title:"驱动信息","class-name":"vertical-center-modal",width:"900"},on:{"on-ok":t.okAddDrive},model:{value:t.modal13.show,callback:function(e){t.$set(t.modal13,"show",e)},expression:"modal13.show"}},[a("contentTabs",{attrs:{links:t.links}}),"OPC_UA_SERVER"==t.modal13.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("OPC UA连接信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[t._l(t.modal13.params,(function(e,i){return a("div",{key:i,staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"20px","font-size":"12px"}},[t._v(t._s(e.name)+":")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"d.val"}})],1)})),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("NODE节点")]),t._l(t.modal13.nodes_list,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 10px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"20px","font-size":"12px"}},[t._v("NODE名称:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.nameVal,callback:function(a){t.$set(e,"nameVal",a)},expression:"d.nameVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"20px","font-size":"12px"}},[t._v("NODE标识:")]),a("Input",{staticStyle:{width:"100px"},model:{value:e.sqlStrVal,callback:function(a){t.$set(e,"sqlStrVal",a)},expression:"d.sqlStrVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),0==i?a("Button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small",disabled:t.add_nodes_disabled},on:{click:t.add_nodes}},[t._v("+")]):t._e(),i>0?a("Button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){return t.del_nodes(i)}}},[t._v("-")]):t._e()],1)}))],2),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("用户")]),t._l(t.modal13.users_list,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 10px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"20px","font-size":"12px"}},[t._v("用户名:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.nameVal,callback:function(a){t.$set(e,"nameVal",a)},expression:"d.nameVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"20px","font-size":"12px"}},[t._v("密码:")]),a("Input",{staticStyle:{width:"130px"},attrs:{type:"password"},model:{value:e.passwordVal,callback:function(a){t.$set(e,"passwordVal",a)},expression:"d.passwordVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),0==i?a("Button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small",disabled:t.add_users_disabled},on:{click:t.add_users}},[t._v("+")]):t._e(),i>0?a("Button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){return t.del_users(i)}}},[t._v("-")]):t._e()],1)}))],2)],2)]):t._e(),"MQTT_CLIENT"==t.modal13.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("发布消息配置")]),t._l(t.modal13.params,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 10px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"20px","font-size":"12px"}},[t._v("发布名称:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.nameVal,callback:function(a){t.$set(e,"nameVal",a)},expression:"d.nameVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"20px","font-size":"12px"}},[t._v("发布ID:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.topicIdVal,callback:function(a){t.$set(e,"topicIdVal",a)},expression:"d.topicIdVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"20px","font-size":"12px"}},[t._v("发布标题:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.topicVal,callback:function(a){t.$set(e,"topicVal",a)},expression:"d.topicVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),0==i?a("Button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small",disabled:t.add_mqtt_disabled},on:{click:t.add_params}},[t._v("+")]):t._e(),i>0?a("Button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){return t.del_params(i)}}},[t._v("-")]):t._e(),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"20px","font-size":"12px"}},[t._v("消息质量:")]),a("Select",{staticStyle:{width:"130px"},model:{value:e.qosVal,callback:function(a){t.$set(e,"qosVal",a)},expression:"d.qosVal"}},[a("Option",{key:"0",attrs:{value:"0"}},[t._v("最多一次,有可能重复或丢失")]),a("Option",{key:"1",attrs:{value:"1"}},[t._v("至少一次,有可能重复")]),a("Option",{key:"2",attrs:{value:"2"}},[t._v("只有一次,确保消息只到达一次")])],1)],1)],1)}))],2):t._e(),"OPC_UA_UPLOAD"==t.modal13.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("名称空间编号")]),a("div",{staticStyle:{margin:"15px 0 0 10px",float:"left"}},[a("div",{staticStyle:{float:"left",margin:"0 0 10px 10px"}},[a("Input",{staticStyle:{width:"130px","margin-left":"36px"},attrs:{disabled:""},model:{value:t.modal13.val.nameSpaceIndex,callback:function(e){t.$set(t.modal13.val,"nameSpaceIndex",e)},expression:"modal13.val.nameSpaceIndex"}})],1)])]):t._e(),"SOCKET_CLIENT"==t.modal13.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("SOCKET驱动信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"255px","text-align":"right","margin-left":"3px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("告警上报频率/秒:")]),a("Input",{staticStyle:{width:"130px","margin-right":"10px"},model:{value:t.modal13.val.alarmRate,callback:function(e){t.$set(t.modal13.val,"alarmRate",e)},expression:"modal13.val.alarmRate"}}),a("span",{staticStyle:{color:"red","margin-left":"10px"}},[t._v(" ")])],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"255px","text-align":"right","margin-left":"6px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("指标上报频率/秒:")]),a("Input",{staticStyle:{width:"130px","margin-right":"8px"},model:{value:t.modal13.val.quotaRate,callback:function(e){t.$set(t.modal13.val,"quotaRate",e)},expression:"modal13.val.quotaRate"}}),a("span",{staticStyle:{color:"red","margin-left":"10px"}},[t._v(" ")])],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"255px","text-align":"right","margin-left":"6px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("上报格式类型:")]),a("Select",{staticStyle:{width:"130px","margin-right":"0px"},model:{value:t.modal13.val.reportType,callback:function(e){t.$set(t.modal13.val,"reportType",e)},expression:"modal13.val.reportType"}},[a("Option",{key:"WH",attrs:{value:"WH"}},[t._v("危化")]),a("Option",{key:"AGY",attrs:{value:"AGY"}},[t._v("安工院")])],1),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v(" ")])],1),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("上报IP信息")]),t._l(t.modal13.params,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 27px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"230px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("上报地址:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.reportIpVal,callback:function(a){t.$set(e,"reportIpVal",a)},expression:"d.reportIpVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"230px","text-align":"right","margin-left":"32px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("向量IV:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.cipherIvVal,callback:function(a){t.$set(e,"cipherIvVal",a)},expression:"d.cipherIvVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"230px","text-align":"right","margin-left":"30px"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("加密密钥:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.cipherCodeVal,callback:function(a){t.$set(e,"cipherCodeVal",a)},expression:"d.cipherCodeVal"}}),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v("*")])],1),0==i?a("Button",{staticStyle:{float:"left","margin-left":"10px","margin-top":"2px:"},on:{click:t.add_params}},[t._v("+")]):t._e(),i>0?a("Button",{staticStyle:{float:"left","margin-left":"10px","margin-top":"2px:"},on:{click:function(e){return t.del_params(i)}}},[t._v("-")]):t._e(),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"230px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("加密类型:")]),a("Select",{staticStyle:{width:"130px"},model:{value:e.encryptionTypeVal,callback:function(a){t.$set(e,"encryptionTypeVal",a)},expression:"d.encryptionTypeVal"}},[a("Option",{key:"AES128",attrs:{value:"AES128"}},[t._v("AES128")]),a("Option",{key:"AES256",attrs:{value:"AES256"}},[t._v("AES256")])],1),a("span",{staticStyle:{color:"red","margin-left":"5px"}},[t._v(" ")])],1)],1)}))],2)])]):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.modal13.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.okAddDrive}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"3ea8164b",null).exports,flexbtn:a("9a16").a},provide:function(){return{reload:this.reload}},data:function(){return{IsRouterAlive:!0,nodetree:!0}},methods:{reload:function(){this.IsRouterAlive=!1,this.$nextTick((function(){this.IsRouterAlive=!0}))},parentFn:function(t){this.nodetree=t}}},c=Object(l.a)(d,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{display:"flex"}},[e("reportMenu",{directives:[{name:"show",rawName:"v-show",value:this.nodetree,expression:"nodetree"}]}),e("flexbtn",{attrs:{nodetree:this.nodetree},on:{childFn:this.parentFn}}),this.IsRouterAlive?e("router-view"):this._e()],1)}),[],!1,null,"25d902a5",null);e.default=c.exports},d042:function(t,e,a){"use strict";a.r(e);var i=(a("fbf6"),a("c701")),n=Object(i.a)({name:"Sys",components:{},provide:function(){return{reload:this.reload}},data:function(){return{IsRouterAlive:!0}},methods:{reload:function(){this.IsRouterAlive=!1,this.$nextTick((function(){this.IsRouterAlive=!0}))}}},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nav"},[this.IsRouterAlive?e("router-view"):this._e()],1)}),[],!1,null,"08ee6bda",null);e.default=n.exports},d08e:function(t,e,a){"use strict";a("b86d")},d105:function(t,e,a){"use strict";a.r(e),a("e5b4");var i={name:"SysTime",components:{jk_tabs:a("25b1").a},data:function(){return{time:"",value6:null,links:[{name:"设置系统时间",to:"/sys/time"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.system.date.find.url).then((function(e){var a=t.$util.time_stamp2time_date(1e3*e.data.data);t.time=a.format("yyyy-MM-dd hh:mm:ss")})).catch((function(t){}))},update:function(){var t=this;if(null==this.value6||""==this.value6)this.$Notice.error({title:"未填写系统时间",desc:"请重新填写系统时间...",duration:3});else{var e=this.$util.time_stamp2time_date(this.value6).format("yyyy-MM-dd hh:mm:ss");this.$https.fetchPut(this.$api.system.date.update.url+"/"+e).then((function(e){200==e.data.code?(t.$Notice.success({title:"时间修改成功",desc:"正在刷新界面",duration:3}),t.reload()):t.$Notice.error({title:"时间修改失败",desc:"错误代码："+e.data.describe,duration:3})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:3})}))}}}},n=a("c701"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("系统时间")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"40px"}},[t._m(0),a("td",[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v(t._s(t.time))])])]),a("tr",{staticStyle:{height:"40px"}},[t._m(1),a("td",[a("DatePicker",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{type:"datetime",placeholder:"Select date and time"},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}})],1)])])])]),a("div",[a("Button",{staticStyle:{margin:"10px 50%"},attrs:{type:"primary"},on:{click:t.update}},[t._v("确认")])],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("系统当前时间:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("设置系统时间:")])])}],!1,null,"6482e4b0",null);e.default=s.exports},d18c:function(t,e,a){"use strict";a("89ee")},d224:function(t,e,a){},d2b1:function(t,e,a){"use strict";a("dcdf")},d388:function(t,e,a){"use strict";a("02e8")},d493:function(t,e,a){"use strict";a("bf18")},d504:function(t,e,a){"use strict";a.r(e),a("e5b4"),a("8dee");var i={data:function(){var t=this;return{timestamp:"",modal:!1,users:null,loading:!0,title:null,login:{newPassword:"",repeatPwd:""},from:{password:"",roleUuidList:[],state:"",uuid:""},find:{page:1,size:10},rule:{newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{type:"string",min:6,max:18,message:"请输入长度为6-18个密码字符",trigger:"blur"}],repeatPwd:[{required:!0,message:"请输入确认密码",trigger:"blur"},{required:!1,trigger:"blur",validator:function(e,a,i){t.login.newPassword!=a?i(new Error("新密码和确认密码不一致")):i()}}]}}},mounted:function(){this.timer=setInterval(this.getTime,1e3),this.showPermission(),"true"==this.$storage.getStorage("loginType")?this.title="伟思信安工业数据采集网闸系统-采集模块":this.title="伟思信安工业数据采集网闸系统-上报模块"},methods:{getTime:function(){this.timestamp=Date.parse(new Date),this.timestamp=this.$util.time_stamp2time_date(this.timestamp),this.timestamp=this.timestamp.format("yyyy-MM-dd hh:mm:ss")},showPermission:function(){var t=this.$storage.getStorage("users");null!=t&&(t=t.replace('"',"").replace('"',"")),this.users="usermanager"==t?"安全管理员":"logauditor"==t?"审计管理员":"系统管理员"},logout:function(){var t=this;this.$https.fetchGet(this.$api.user.logout.url).then((function(e){200==e.data.code&&(sessionStorage.removeItem("users"),sessionStorage.removeItem("userName"),sessionStorage.removeItem("loginType"),t.$Notice.info({title:"退出成功"}),t.$router.push({path:"/login"}))})).catch((function(t){}))},updataPass:function(){this.modal=!0;var t=this.$storage.getStorage("userName");t=t.replace(/"/g,""),this.from.roleUuidList=[],this.find.filters=[],this.find.filters.push({filed:"username",params:[t],type:"equal"}),this.showUser()},showUser:function(){var t=this;this.$https.fetchPost(this.$api.user.user.url+"/actions/page_search",this.find).then((function(e){t.from.uuid=e.data.data.data[0].uuid,t.from.state=e.data.data.data[0].state,t.from.roleUuidList.push(e.data.data.data[0].roleList[0].uuid)})).catch((function(t){}))},ok:function(){var t=this;this.$refs.form.validate((function(e){e&&(t.from.password=t.login.newPassword,t.$https.fetchPut(t.$api.user.user.url,t.from).then((function(e){200==e.data.code?(t.$Notice.success({title:"用户信息修改成功",desc:"请重新登录"}),t.logout()):t.$Notice.error({title:"用户信息修改失败",desc:"错误代码："+e.data.status})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})})))}))},cancel:function(){this.$refs.form.resetFields()}}},n=(a("447c"),a("c701")),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav"},[i("img",{staticClass:"nav-log",attrs:{src:a("5b62")}}),i("h3",{staticClass:"nav-title"},[t._v(t._s(t.title))]),i("Dropdown",{staticClass:"nav-dropdown",style:{float:"right",margin:"32px 30px 27px 40px"}},[i("a",{staticStyle:{"font-size":"14px"},attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.users)+"\n                "),i("Icon",{attrs:{type:"ios-arrow-down"}})],1),i("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[i("DropdownItem",[i("div",{on:{click:t.updataPass}},[t._v("修改密码")])]),i("DropdownItem",[i("div",{on:{click:t.logout}},[t._v("退出")])])],1)],1),i("div",{staticClass:"nav-log",staticStyle:{margin:"15px -100px 5px 30px",width:"250px",color:"white","font-size":"16px","line-height":"53px",float:"right"}},[t._v(t._s(t.timestamp))]),i("Modal",{attrs:{title:"修改当前用户密码",width:"200"},on:{"on-cancel":t.cancel},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[i("Form",{ref:"form",attrs:{model:t.login,rules:t.rule}},[i("FormItem",{attrs:{prop:"newPassword"}},[i("Input",{attrs:{prefix:"md-lock",type:"password",placeholder:"新密码"},model:{value:t.login.newPassword,callback:function(e){t.$set(t.login,"newPassword",e)},expression:"login.newPassword"}})],1),i("FormItem",{attrs:{prop:"repeatPwd"}},[i("Input",{attrs:{prefix:"md-lock",type:"password",placeholder:"确认密码"},model:{value:t.login.repeatPwd,callback:function(e){t.$set(t.login,"repeatPwd",e)},expression:"login.repeatPwd"}})],1)],1),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:t.cancel}},[t._v("重置")]),i("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"0ef560ee",null).exports,r=a("5e7e"),o={name:"NetworkGateway",components:{},data:function(){return{tap:{items:[{to:"/sys",title:"首页",type:"md-home"},{to:"/engineering/collectionService/info",title:"采集服务",type:"md-create"},{to:"/engineering/reportingService/info",title:"转发服务",type:"md-crop"},{to:"/engineering/engineered",title:"工程配置",type:"md-build"},{to:"/sys/count/collect",title:"业务统计",type:"md-list-box"},{to:"/logs/logCommond",title:"日志与审计",type:"md-list-box"},{to:"/user/userConfig",title:"用户配置",type:"ios-contact"}],select:0}}},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1,0==this.loginType&&(this.tap.items[0].to="/sys/info/upload"),this.showPermission()},methods:{showPermission:function(){var t=this.$storage.getStorage("users");null!=t&&(t=t.replace('"',"").replace('"',"")),"usermanager"==t?this.tap.items.splice(0,6):"logauditor"==t?(this.tap.items.splice(0,5),this.tap.items.splice(1,1)):this.tap.items.splice(5,2)},quick:function(t){this.$router.push({path:t}),r.a.$emit("demo1",t)},functionA:function(t){r.a.$emit("demo","qqq")}}},l=(a("b186"),Object(n.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav"},[a("ul",{staticClass:"nav-items"},t._l(t.tap.items,(function(e,i){return a("li",{key:i},[a("div",{on:{click:function(a){return t.quick(e.to)}}},[a("Icon",{staticStyle:{"margin-bottom":"3px","font-size":"25px"},attrs:{type:e.type}}),a("br"),a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.title))])],1)])})),0)])}),[],!1,null,"b8f570cc",null).exports),d=(a("fc02"),{name:"Nav4",data:function(){return{adminStatus:!0,logStatus:!0,userStatus:!0,value2:["sys"],value3:"info",links1:[{name:"系统状态",to:"/sys/info/collect",no:"info"},{name:"系统升级",to:"/sys/update",no:"update"},{name:"系统设置",to:"/sys/drive",no:"drive"},{name:"业务统计",to:"/sys/count/collect",no:"count"},{name:"license授权",to:"/sys/license",no:"license"}],links2:[{name:"采集服务",to:"/engineering/collectionService",no:"collectionService"},{name:"转发服务",to:"/engineering/reportingService",no:"reportingService"},{name:"工程配置",to:"/engineering/engineered",no:"engineered"}],links8:[{name:"策略管理",to:"/strategy/strategylist",no:"strategylist"},{name:"阈值告警",to:"/strategy/thresholdAlarm",no:"thresholdAlarm"},{name:"邮箱设置",to:"/strategy/mail",no:"mail"}],links6:[{name:"管理操作日志",to:"/logs/logCommond",no:"logCommond"},{name:"系统升级日志",to:"/logs/logUpgrade",no:"logUpgrade"},{name:"license注册日志",to:"/logs/logLicenseRegister",no:"logLicenseRegister"},{name:"工程导出日志",to:"/logs/logEngineeredExport",no:"logEngineeredExport"},{name:"采集通讯日志",to:"/logs/logCollectComm",no:"logCollectComm"},{name:"采集系统运行日志",to:"/logs/logCollectSys",no:"logCollectSys"},{name:"上报通讯日志",to:"/logs/logUploadComm",no:"logUploadComm"},{name:"上报系统运行日志",to:"/logs/logUploadSys",no:"logUploadSys"},{name:"上报策略告警日志",to:"/logs/logStrategyWarning",no:"logStrategyWarning"},{name:"上报邮箱告警日志",to:"/logs/logMailWarning",no:"logMailWarning"}],links7:[{name:"用户配置",to:"/user/userConfig",no:"userConfig"}],loginType:null}},watch:{openNames:function(){var t=this;this.$nextTick((function(){t.$refs.side_menu.updateOpened(),t.$refs.side_menu.updateActiveName()}))}},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1,0==this.loginType&&(this.links1[0].to="/sys/info/upload"),this.test(null);var t=this;r.a.$on("demo1",(function(e){t.test(e)})),"true"==this.$storage.getStorage("loginType")?this.links6.splice(4,4):this.links1.splice(2,1)},methods:{test:function(t){if(this.$route.path.indexOf("logs")>-1?this.logStatus=!1:this.$route.path.indexOf("user")>-1?this.userStatus=!1:this.adminStatus=!1,null==t){var e=this.$route.path.split("/");this.value2=[e[1]],this.value3=e[2],this.openNames()}else{var a=t.split("/");this.value2=[a[1]],this.value3=a[2],this.openNames()}},openNames:function(){var t=this;this.$nextTick((function(){t.$refs.side_menu.updateOpened()}))},quick:function(t){this.$router.push({path:t})}}}),c=(a("b3ff"),{name:"Index",components:{jk_nav:s,"v-nav1":l,"v-nav2":Object(n.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Menu",{ref:"side_menu",attrs:{"active-name":t.value3,theme:"dark",width:"auto",accordion:"","open-names":t.value2}},[a("Submenu",{class:{adminShow:t.adminStatus},staticStyle:{"background-color":"#293949","font-size":"12px"},attrs:{name:"sys"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-settings"}}),t._v("\n                        系统管理\n                    ")],1),t._l(t.links1,(function(e,i){return a("MenuItem",{key:i,staticStyle:{"padding-left":"35px",background:"#23313f !important","font-size":"12px"},attrs:{name:e.no},nativeOn:{click:function(a){return t.quick(e.to)}}},[a("Icon",{attrs:{type:"ios-radio-button-on"}}),t._v(t._s(e.name))],1)}))],2),a("Submenu",{class:{adminShow:t.adminStatus},staticStyle:{"background-color":"#293949","font-size":"12px"},attrs:{name:"engineering"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-keypad"}}),t._v("\n                        工程管理\n                    ")],1),t._l(t.links2,(function(e,i){return a("MenuItem",{key:i,staticStyle:{"padding-left":"35px",background:"#23313f !important","font-size":"12px"},attrs:{name:e.no},nativeOn:{click:function(a){return t.quick(e.to)}}},[a("Icon",{attrs:{type:"ios-radio-button-on"}}),t._v(t._s(e.name))],1)}))],2),this.loginType?t._e():a("Submenu",{class:{adminShow:t.adminStatus},staticStyle:{"background-color":"#293949","font-size":"12px"},attrs:{name:"strategy"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-thermometer"}}),t._v("\n                        策略管理\n                    ")],1),t._l(t.links8,(function(e,i){return a("MenuItem",{key:i,staticStyle:{"padding-left":"35px",background:"#23313f !important","font-size":"12px"},attrs:{name:e.no},nativeOn:{click:function(a){return t.quick(e.to)}}},[a("Icon",{attrs:{type:"ios-radio-button-on"}}),t._v(t._s(e.name))],1)}))],2),a("Submenu",{class:{logShow:t.logStatus},staticStyle:{"background-color":"#293949","font-size":"12px"},attrs:{name:"logs"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-analytics"}}),t._v("\n                        日志与审计\n                    ")],1),t._l(t.links6,(function(e,i){return a("MenuItem",{key:i,staticStyle:{"padding-left":"35px",background:"#23313f !important","font-size":"12px"},attrs:{name:e.no},nativeOn:{click:function(a){return t.quick(e.to)}}},[a("Icon",{attrs:{type:"ios-radio-button-on"}}),t._v(t._s(e.name))],1)}))],2),a("Submenu",{class:{userShow:t.userStatus},staticStyle:{"background-color":"#293949","font-size":"12px"},attrs:{name:"user"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-analytics"}}),t._v("\n                        系统管理\n                    ")],1),t._l(t.links7,(function(e,i){return a("MenuItem",{key:i,staticStyle:{"padding-left":"35px",background:"#23313f !important","font-size":"12px"},attrs:{name:e.no},nativeOn:{click:function(a){return t.quick(e.to)}}},[a("Icon",{attrs:{type:"ios-radio-button-on"}}),t._v(t._s(e.name))],1)}))],2)],1)],1)}),[],!1,null,"19fc6e7e",null).exports}}),p=(a("4ae3"),Object(n.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("jk_nav"),e("v-nav1"),e("div",{staticStyle:{display:"flex","flex-wrap":"nowrap",background:"#eeeeee"}},[e("v-nav2"),e("router-view")],1)],1)}),[],!1,null,"c5176284",null));e.default=p.exports},d705:function(t,e,a){},d821:function(t,e,a){},da53:function(t,e,a){"use strict";a.r(e),a("e680");var i={name:"SysDrive",components:{jk_tabs:a("25b1").a},data:function(){return{time:"",value5:!0,value6:"",data:{collectInterval:null,enable:null},links:[{name:"系统设置",to:"/sys/drive"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.system.drive.url).then((function(e){t.value6=e.data.data.collectInterval,t.value5=e.data.data.enable})).catch((function(t){}))},update:function(){var t=this;this.checkInput()||(this.data.collectInterval=Number(this.value6),this.data.enable=this.value5,this.$https.fetchPut(this.$api.system.drive.url,this.data).then((function(e){200==e.data.code?(t.$Notice.success({title:"采集间隔设置成功",desc:"正在刷新界面",duration:3}),location.reload()):t.$Notice.error({title:"采集间隔设置失败",desc:"错误代码："+e.data.describe,duration:3})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:3})})))},checkInput:function(){var t=!1;return""===this.value6?(this.$Message.error({content:"请填写刷新频率...",duration:3}),t=!0):/^([12][0-9]|30|[1-9])$/.test(this.value6)||(this.$Message.error({content:"刷新频率填写1-30的正整数...",duration:3}),t=!0),t}}},n=a("c701"),s=Object(n.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("系统参数")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"40px"}},[t._m(0),a("td",[a("i-Switch",{staticStyle:{"margin-left":"15px"},attrs:{size:"large"},model:{value:t.value5,callback:function(e){t.value5=e},expression:"value5"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)]),a("tr",{staticStyle:{height:"40px"}},[t._m(1),a("td",[a("Input",{staticStyle:{width:"200px","margin-left":"15px"},attrs:{placeholder:"填写1-30的正整数..."},model:{value:t.value6,callback:function(e){t.value6=e},expression:"value6"}})],1)])])])]),a("div",[a("Button",{staticStyle:{margin:"10px 50%"},attrs:{type:"primary"},on:{click:t.update}},[t._v("确认")])],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("首页刷新状态:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("首页刷新频率(秒):")])])}],!1,null,"7d73d1a8",null);e.default=s.exports},dcdf:function(t,e,a){},dd31:function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("c47e"),s={inject:["reload"],name:"StrategyMonitoring",components:{jk_tabs:i.a,Pies:n.a},data:function(){return{itemList:[{title:"系统名称:",content:null},{title:"当前版本:",content:null},{title:"发布时间:",content:null},{title:"版本描述:",content:null},{title:"系统名称:",content:null},{title:"当前版本:",content:null},{title:"发布时间:",content:null},{title:"版本描述:",content:null},{title:"系统名称:",content:null},{title:"当前版本:",content:null},{title:"发布时间:",content:null},{title:"版本描述:",content:null},{title:"系统名称:",content:null},{title:"当前版本:",content:null},{title:"发布时间:",content:null},{title:"版本描述:",content:null}],data:null,url:"",file:null,loading:!1,links:[{name:"监控统计",to:"/strategy/monitoring"}]}},created:function(){},mounted:function(){},methods:{showData:function(){var t=this;this.$https.fetchGet(this.$api.software.software.url).then((function(e){t.itemList[0].content=e.data.data.programName,t.itemList[1].content=e.data.data.version,t.itemList[2].content=t.$util.time_stamp2time_date(e.data.data.startUptime).format("yyyy-MM-dd hh:mm:ss"),t.itemList[3].content=e.data.data.descriptions})).catch((function(t){}))}}},r=(a("3883"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("当前版本信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},t._l(t.itemList,(function(e,i){return a("tr",{key:i,staticStyle:{height:"35px"}},[a("td",{staticStyle:{width:"25%","background-color":"#eee","margin-left":"70%"}},[a("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.title))])]),a("td",[a("span",{staticStyle:{"margin-left":"15px","font-size":"12px"}},[t._v(t._s(e.content))])])])})),0)])]),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left","margin-top":"20px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("版本升级")]),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[a("tr",{staticStyle:{height:"35px"}},[t._m(0),a("td",[a("Upload",{staticStyle:{margin:"15px 0 0 15px"},attrs:{"before-upload":t.handleUpload,action:t.url}},[a("Button",{staticStyle:{float:"left"},attrs:{icon:"ios-cloud-upload-outline"}},[t._v("点击选择文件")]),null!==t.file?a("div",{staticStyle:{float:"left",margin:"6px 0 0 20px"}},[t._v("Upload file: "+t._s(t.file.name)+"\n                                    ")]):t._e()],1)],1)])])])]),a("div",[a("Button",{staticStyle:{margin:"10px 50%"},attrs:{type:"primary",loading:t.loading},on:{click:t.upload}},[t._v("升级")])],1),a("div",{staticStyle:{display:"flex"}},[a("Pies",{staticStyle:{width:"50%",height:"300px"},attrs:{id:"1"}}),a("table",{staticStyle:{width:"50%",height:"300px"},attrs:{border:"1"}},[a("thead",[a("tr",{staticStyle:{"background-color":"#eee"}},[a("span",{staticStyle:{"margin-left":"15%","font-weight":"bold"}},[t._v("通道 C<驱动 A> 40条")]),a("CheckboxGroup",{staticStyle:{float:"right","margin-right":"15%"},model:{value:t.fruit,callback:function(e){t.fruit=e},expression:"fruit"}},[a("Checkbox",{attrs:{label:"一般"}}),a("Checkbox",{attrs:{label:"严重"}})],1)],1)]),a("tbody",t._l(t.itemList,(function(e,i){return a("tr",{key:i,staticStyle:{height:"35px"}},[a("td",{staticStyle:{"text-align":"center"}},[a("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(i+1+". ")+" "+t._s(e.title))])])])})),0)])],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("td",{staticStyle:{width:"25%","background-color":"#eee"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}},[this._v("固件升级包:")])])}],!1,null,"e6061c9a",null);e.default=o.exports},ddcb:function(t,e,a){"use strict";a("e680");var i={data:function(){return{chart:null}},props:{opt:{id:{type:String},show:{default:!1},option:{type:Object},refresh:Number}},mounted:function(){this.initChart()},methods:{initChart:function(){null==this.chart&&(this.chart=this.$echarts.init(document.getElementById(this.opt.id)),this.$emit("getChart",this.chart)),this.opt.show?(this.chart.hideLoading(),this.chart.setOption(this.opt.option)):this.chart.showLoading({text:"数据加载中"})},refresh:function(){this.opt.show?(this.chart.hideLoading(),this.chart.setOption(this.opt.option)):this.chart.showLoading({text:"数据加载中"})}},watch:{"opt.refresh":function(t,e){this.refresh()}}},n=(a("1fe7"),a("c701")),s=Object(n.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"pie",attrs:{id:this.opt.id}})}),[],!1,null,"9a60242c",null);e.a=s.exports},de33:function(t,e,a){},e19d:function(t,e,a){"use strict";a.r(e),a("a450"),a("6a61");var i=a("2e91"),n=(a("1bc78"),{name:"treeMenu",inject:["reload"],filters:{ellipsis:function(t){return t?t.length>8?t.slice(0,6)+"...":t:""}},props:{data:{type:Array},name:String,loading:Boolean},data:function(){return{folderIconList:[],loadingIconList:[],scope:{},menuName:"",uuid:null,menu:[],timer:"",newVal2:[],loginType:null}},created:function(){var t=this;this.data.forEach((function(e,a){e.children&&e.children.length&&(t.folderIconList[a]=t.scope[a]?"folder-open":"folder")}))},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!1:this.loginType=!0},watch:{data:function(t,e){var a=this;t.forEach((function(t,e){t.children&&t.children.length&&"采集服务"==t.menuName||"转发服务"==t.menuName?(a.$set(a.scope,e,!0),a.folderIconList[e]="folder-open"):t.children&&t.children.length&&(a.folderIconList[e]="folder")}))}},methods:{doTask:function(t){this.$set(this.scope,t,!this.scope[t]),this.folderIconList[t]=this.scope[t]?"folder-open":"folder"},toggle:function(t,e){var a=this;this.loadingIconList=[],t.children&&t.children.length?this.doTask(e):(this.loadingIconList[e]="loading",this.$emit("getSubMenu",t,(function(t){t&&t.length&&a.doTask(e)})))},quick:function(t){this.$storage.setStorage("getItem",t),1==t.id?this.$router.push({path:"/engineering/collectionService/info"}):2==t.id?this.$router.push({path:"/engineering/collectionService/channelConfig"}):3==t.id?this.$router.push({path:"/engineering/collectionService/driveConfig"}):10==t.id?this.$router.push({path:"/engineering/reportingService/info"}):20==t.id?this.$router.push({path:"/engineering/reportingService/channelConfig"}):30==t.id&&this.$router.push({path:"/engineering/reportingService/driveConfig"}),this.reload()},rightBtn:function(t,e){document.getElementById("msgRightMenu").style.display="none",document.getElementById("msgRightMenu1").style.display="none",document.getElementById("msgRightMenu2").style.display="none",this.menuName=t.menuName,this.menuName;var a=null;1==t.id||10==t.id?(this.$emit("getSubMenu",t,e),a=document.getElementById("msgRightMenu")):2==t.id||20==t.id?(this.$parent.$emit("getSubMenu",t,e),a=document.getElementById("msgRightMenu1")):3==t.id||30==t.id?(this.$parent.$parent.$emit("getSubMenu",t,e),a=document.getElementById("msgRightMenu2")):4==t.id.length&&this.$parent.$parent.$parent.$emit("getSubMenu",t,e);var i=i||window.event,n=i.pageX-400,s=i.pageY-110;return n>423&&(n=423),a.style.display="block",a.style.left=n+130+"px",a.style.top=s-50+"px",document.onclick=function(){a.style.display="none"},!1}}}),s=(a("c32e"),a("c701")),r=(Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"tree-menu"},t._l(t.data,(function(e,i){return a("li",{key:i},[a("div",{staticStyle:{"border-bottom":"1px solid rgb(169, 169, 169)"},on:{click:function(a){t.quick(e),t.toggle(e,i)},contextmenu:function(a){a.preventDefault(),t.loginType&&t.rightBtn(e,i)}}},[1==e.id||10==e.id?a("Icon",{staticStyle:{"margin-left":"20px"},attrs:{type:"md-paper"}}):t._e(),2==e.id||20==e.id?a("Icon",{staticStyle:{"margin-left":"30px"},attrs:{type:"md-crop"}}):t._e(),3==e.id||30==e.id?a("Icon",{staticStyle:{"margin-left":"40px"},attrs:{type:"md-desktop"}}):t._e(),t._v("\n         \n        "),a("Tooltip",{attrs:{content:e.menuName}},[a("span",[t._v(t._s(t._f("ellipsis")(e[t.name]||e.menuName)))])]),a("i",{class:["icon",e.children&&e.children.length?t.folderIconList[i]:"file-text",t.loading?t.loadingIconList[i]:""]})],1),t.scope[i]?a("tree-menu",{attrs:{data:e.children}}):t._e()],1)})),0)}),[],!1,null,"1085b36f",null).exports,a("5e7e")),o=a("25b1"),l={inject:["reload"],name:"StrategyDataSourceAdd",components:{},data:function(){return{btnloading:!1,uuidList:[],modal1:!1,theData:[],loading:!1,title:"title",platForm:{show:!1,form:{backup:"",driveList:[],sourceName:"",sourceContent:""},rules:{sourceName:{required:!0,message:"不能为空",trigger:"blur"},sourceContent:{required:!0,message:"不能为空",trigger:"blur"}}}}},computed:{},created:function(){this.showData()},mounted:function(){var t=this;r.a.$on("menuShowData",(function(e){t.showData()}))},methods:{submitdriver:function(){var t=this.$refs.tree.getCheckedNodes();for(var e in t)t[e].children&&t.splice(e,1);for(var a in t)t[a].children&&t.splice(a,1);for(var i in this.uuidList=[],t)this.uuidList.push(t[i].uuid);for(var n=[],s=0;s<t.length;s++)n[t[s].driveType]?n[t[s].driveType]=n[t[s].driveType]+","+t[s].title:n[t[s].driveType]=t[s].title;var r="";for(var o in n)r=""==r?o+"<"+n[o]+">,":r+o+"<"+n[o]+">,";this.platForm.form.sourceContent=r.slice(0,-1)},getSubMenu:function(t,e){null!=JSON.stringify(t)&&(this.item=t,this.index=e)},findChannel:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$https.fetchGet(this.$api.collect.channelInfo.url);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),findDrive:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(e){var a,i,n,s,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e,t.t0=regeneratorRuntime.keys(a[0].children);case 2:if((t.t1=t.t0()).done){t.next=11;break}return i=t.t1.value,n=a[0].children[i].driveType,t.next=7,this.$https.fetchGet(this.$api.collect.drive.url+"/"+a[0].children[i].uuid);case 7:for(r in(s=t.sent).data.data)a[0].children[i].children.push({id:"3",title:s.data.data[r].name,uuid:s.data.data[r].uuid,remark:s.data.data[r].remark,enable:s.data.data[r].enable,driveType:n});t.next=2;break;case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),showData:function(){var t=this;this.findChannel().then((function(e){var a=[{id:"1",title:"全选",menuCode:"10",expand:!0,children:[]}];for(var i in e.data.data)a[0].children.push({id:"2",title:e.data.data[i].name,uuid:e.data.data[i].uuid,driveType:e.data.data[i].driveType,children:[],remark:e.data.data[i].remark});t.findDrive(a).then((function(e){t.theData=e}))}))},showAddDrawer:function(){this.platForm.show=!0},submit:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&(t.btnloading=!0,t.platForm.form.driveList=t.uuidList,t.$https.fetchPost(t.$api.strategy.addStrategyDataSource.url,t.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"数据源对象添加成功",desc:"正在刷新界面",duration:2.5}),t.btnloading=!1,setTimeout((function(){t.reload()}),250)):(t.btnloading=!1,t.$Notice.error({title:"数据源对象添加失败",desc:"错误："+e.data.describe,duration:5}))})).catch((function(e){t.btnloading=!1,t.$Notice.error({title:"请求失败",desc:e,duration:5})})))}))},restPlatForm:function(){this.$refs.plat_form.resetFields()}}},d=(a("5d7f"),Object(s.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{attrs:{icon:"md-add-circle",type:"primary"},on:{click:t.showAddDrawer}},[t._v("\n        新增\n    ")]),a("Modal",{attrs:{title:"新增数据源对象",width:"650"},model:{value:t.platForm.show,callback:function(e){t.$set(t.platForm,"show",e)},expression:"platForm.show"}},[a("Form",{ref:"plat_form",attrs:{rules:t.platForm.rules,model:t.platForm.form,"label-width":90}},[a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"对象名",prop:"sourceName"}},[a("Input",{model:{value:t.platForm.form.sourceName,callback:function(e){t.$set(t.platForm.form,"sourceName",e)},expression:"platForm.form.sourceName"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"对象内容",prop:"sourceContent"}},[a("Poptip",{attrs:{trigger:"hover",content:t.platForm.form.sourceContent}},[a("Input",{staticStyle:{width:"426px","margin-right":"20px"},attrs:{disabled:""},model:{value:t.platForm.form.sourceContent,callback:function(e){t.$set(t.platForm.form,"sourceContent",e)},expression:"platForm.form.sourceContent"}})],1),a("Button",{on:{click:function(e){t.modal1=!0}}},[t._v("选取驱动")])],1),a("FormItem",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"备注",prop:"backup"}},[a("Input",{model:{value:t.platForm.form.backup,callback:function(e){t.$set(t.platForm.form,"backup",e)},expression:"platForm.form.backup"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.platForm.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large",loading:t.btnloading},on:{click:t.submit}},[t._v("确定")])],1)],1),a("Modal",{attrs:{title:"选择驱动",width:"350"},on:{"on-ok":t.submitdriver},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Tree",{ref:"tree",attrs:{data:t.theData,multiple:"","show-checkbox":""}})],1)],1)}),[],!1,null,"302617bc",null).exports),c={inject:["reload"],name:"StrategyDataSource",components:{jk_tabs:o.a,datasourceadd:d},data:function(){return{backup:"",extendDataIndex:0,uuidList:[],modal1:!1,theData:[],loading:!1,columns1:[{title:"序号",key:"id",align:"center",width:60,render:function(t,e){return t("span",e.index+1)}},{title:"资源名",align:"center",key:"sourceName"},{title:"对象内容",align:"center",slot:"drive"},{title:"备注",align:"center",width:150,key:"backup"},{title:"操作",slot:"action",width:100,align:"center"}],action:!1,data1:[],indeterminate:!1,checkAll:!1,checkAllGroup:[],platForm:{show:!1,form:{backup:"",driveList:[],sourceName:"",sourceContent:"",uuid:""}},userform:{show:!1,form:{username:"",sourceContent:"",text:""},rules:{sourceName:{required:!0,message:"不能为空",trigger:"blur"},sourceContent:{required:!0,message:"不能为空",trigger:"blur"}}},links:[{name:"策略管理",to:"/strategy/strategylist"},{name:"数据源对象",to:"/strategy/datasource"}]}},created:function(){this.showData(),this.getsourceinfo()},mounted:function(){var t=this;r.a.$on("menuShowData",(function(e){t.showData()}))},methods:{updateNode:function(){},edit:function(t){this.modal1=!0,this.platForm.form=this.data1[t],this.backup=this.data1[t].backup,this.theData=this.cleanData(this.theData),this.theData=this.extendData(this.theData,t)},cleanData:function(t){var e=this;return t.forEach((function(t,a){e.$set(t,"checked",!1),t.children&&t.children.length>0&&e.cleanData.call(e,t.children)})),t},extendData:function(t,e){var a=this;return this.extendDataIndex=e,t.forEach((function(t,e){for(var i in a.data1[a.extendDataIndex].driveList)t.uuid&&t.uuid==a.data1[a.extendDataIndex].driveList[i].uuid&&a.$set(t,"checked",!0);t.children&&t.children.length>0&&a.extendData.call(a,t.children,a.extendDataIndex)})),t},submitdriver:function(){var t=this.$refs.tree.getCheckedNodes();if(t.length<=0)this.$Notice.warning({title:"修改失败",desc:"请选择节点",duration:5});else{for(var e in t)t[e].children&&t.splice(e,1);for(var a in t)t[a].children&&t.splice(a,1);for(var i in this.uuidList=[],t)this.uuidList.push(t[i].uuid);for(var n=[],s=0;s<t.length;s++)n[t[s].driveType]?n[t[s].driveType]=n[t[s].driveType]+","+t[s].title:n[t[s].driveType]=t[s].title;var r="";for(var o in n)r=""==r?o+"<"+n[o]+">,":r+o+"<"+n[o]+">,";this.platForm.form.sourceContent=r.slice(0,-1),this.submit()}},getsourceinfo:function(){var t=this;this.$https.fetchGet(this.$api.strategy.findStrategyDataSourceAll.url).then((function(e){200==e.data.code?t.data1=e.data.data:t.$Notice.error({title:"数据源对象添加失败",desc:"错误："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})}))},showAddDrawer:function(){this.platForm.show=!0},submit:function(){var t=this;this.platForm.form.backup=this.backup,this.platForm.form.driveList=this.uuidList,this.$https.fetchPost(this.$api.strategy.updateStrategyDataSource.url,this.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"数据源对象修改成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.reload()}),250)):t.$Notice.error({title:"数据源对象修改失败",desc:"错误："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})}))},getSubMenu:function(t,e){null!=JSON.stringify(t)&&(this.item=t,this.index=e)},findChannel:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$https.fetchGet(this.$api.collect.channelInfo.url);case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),findDrive:function(){var t=Object(i.a)(regeneratorRuntime.mark((function t(e){var a,i,n,s,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e,t.t0=regeneratorRuntime.keys(a[0].children);case 2:if((t.t1=t.t0()).done){t.next=11;break}return i=t.t1.value,n=a[0].children[i].driveType,t.next=7,this.$https.fetchGet(this.$api.collect.drive.url+"/"+a[0].children[i].uuid);case 7:for(r in(s=t.sent).data.data)a[0].children[i].children.push({id:"3",title:s.data.data[r].name,uuid:s.data.data[r].uuid,remark:s.data.data[r].remark,enable:s.data.data[r].enable,driveType:n});t.next=2;break;case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),showData:function(){var t=this;this.findChannel().then((function(e){var a=[{id:"1",title:"采集服务",menuCode:"10",expand:!0,children:[]}];for(var i in e.data.data)a[0].children.push({id:"2",title:e.data.data[i].name,uuid:e.data.data[i].uuid,driveType:e.data.data[i].driveType,children:[],remark:e.data.data[i].remark});t.findDrive(a).then((function(e){t.theData=e}))}))},addPlatForm:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&t.$https.fetchPost(t.$api.mail.updateMailUser.url,t.userform.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"邮件账号修改成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.reload()}),250)):t.$Notice.error({title:"邮件账号修改失败",desc:"错误："+e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})}))}))},restPlatForm:function(){this.$refs.plat_form.resetFields()},deleteSource:function(t,e){var a=this;this.$Modal.confirm({title:"删除数据源对象",content:"<p>当前操作将会导致该配置被删除，请确认删除</p>",onOk:function(){a.$https.fetchPost(a.$api.strategy.deleteStrategyDataSource.url+"/"+t).then((function(t){200==t.data.code?(a.$Notice.success({title:"数据源对象删除成功",desc:"正在刷新页面",duration:2.5}),setTimeout((function(){a.reload(),a.$Modal.remove()}),250)):(a.$Modal.remove(),a.$Notice.error({title:"数据源对象删除失败",desc:"错误："+t.data.describe,duration:5}))})).catch((function(t){a.$Notice.error({title:"请求失败",desc:t,duration:5})}))}})},getinfo:function(){var t=this;this.$https.fetchGet(this.$api.mail.getMailServerMessage.url).then((function(e){200==e.data.code?(t.platForm.form=e.data.data,e.data.data.users&&(t.data1=e.data.data.users),0==t.platForm.form.action?t.action=!0:t.action=!1):t.$Notice.error({title:"获取数据失败",desc:e.data.describe,duration:5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:5})}))}}},p=Object(s.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row box margin-x clear-margin padding-x"},[i("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9","padding-bottom":"5px"}},[i("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[i("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1),i("datasourceadd",{staticStyle:{float:"right"}})],1),i("div",{staticClass:"modal-body"},[i("div",{staticStyle:{width:"100%",position:"relative",float:"left",margin:"20px 0"}},[i("div",[i("Table",{attrs:{border:"",size:"small",columns:t.columns1,data:t.data1},scopedSlots:t._u([{key:"drive",fn:function(e){var a=e.row,n=e.index;return[i("div",[i("span",[t._v(t._s(a.sourceContent))]),i("Icon",{staticStyle:{float:"right","font-size":"18px",cursor:"pointer"},attrs:{type:"ios-arrow-dropdown-circle"},on:{click:function(e){return t.edit(n)}}})],1)]}},{key:"action",fn:function(e){var n=e.row,s=e.index;return[i("Tooltip",{attrs:{placement:"top",content:"删除"}},[i("div",{staticStyle:{margin:"0 2px",cursor:"pointer"},on:{click:function(e){return t.deleteSource(n.uuid,s)}}},[i("img",{attrs:{src:a("cd32"),width:"21px",height:"18.5px",alt:""}})])]),i("Tooltip",{attrs:{placement:"top",content:"修改"}},[i("div",{staticStyle:{margin:"0 2px",cursor:"pointer","margin-left":"4px"},on:{click:function(e){return t.edit(s)}}},[i("img",{attrs:{src:a("6bb7"),width:"21px",height:"18.5px",alt:""}})])])]}}])})],1)])])]),i("Modal",{attrs:{title:"修改驱动",width:"400"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[i("div",{staticStyle:{"margin-bottom":"12px"}},[t._v("备注 :"),i("Input",{staticStyle:{width:"80%","margin-left":"10px"},model:{value:t.backup,callback:function(e){t.backup=e},expression:"backup"}})],1),i("Tree",{ref:"tree",attrs:{data:t.theData,multiple:"","show-checkbox":""}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.modal1=!1}}},[t._v("取消")]),i("Button",{attrs:{type:"primary",size:"large"},on:{click:t.submitdriver}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"45e98bb0",null);e.default=p.exports},e1b3:function(t,e,a){},e240:function(t,e,a){},e354:function(t,e,a){"use strict";a.r(e),a("1bc78"),a("32ea"),a("a450");var i=a("25b1"),n=a("5f3f"),s={name:"ReportDriveConfig",inject:["reload"],components:{jk_tabs:i.a,contentTabs:n.default},data:function(){return{driveUUID:null,loading:!1,driverInfo:[],item:{},url:null,updateurl:null,driveType:null,channel:{form:{uuid:null,name:null,remark:null,manufacturer:null,driveType:null}},drive:{form:{},val:{nameSpaceIndex:null,alarmRate:null,quotaRate:null,reportType:null},params:[],nodes_list:[],users_list:[]},uaServer:{params:[],nodes_list:[],users_list:[]},loginType:null,add_users_disabled:!1,add_nodes_disabled:!1,add_mqtt_disabled:!1,links:[{name:"驱动配置",to:"/engineering/reportingService/driveConfig"},{name:"节点配置",to:"/engineering/reportingService/nodeConfig"}]}},created:function(){},mounted:function(){"true"==this.$storage.getStorage("loginType")?this.loginType=!0:this.loginType=!1,this.showData(),this.loginType?this.channelType():this.links.push({name:"业务数据",to:"/engineering/reportingService/busData"})},methods:{channelType:function(){var t=this;this.$https.fetchGet(this.$api.globalChannel.url).then((function(e){200==e.data.code&&e.data.data&&t.links.push({name:"业务数据",to:"/engineering/reportingService/busData"})})).catch((function(t){}))},showData:function(){var t=this;this.item=JSON.parse(this.$storage.getStorage("getItem")),this.channel.form.driveType=this.item.driveType,1==this.loginType?(this.driverInfo=[{title:"基本信息",data:"base",child:[{name:"驱动名称",input:!0,data:"name"},{name:"描述",input:!0,data:"remark"},{name:"状态",swith:!0,data:"enable"}]}],"OPC_UA_SERVER"!=this.item.driveType&&"MQTT_CLIENT"!=this.item.driveType&&"OPC_DA_UPLOAD"!=this.item.driveType&&"OPC_UA_UPLOAD"!=this.item.driveType&&"SQL"!=this.item.driveType||this.driverInfo.push({title:"配置信息",data:"loopUpload",child:[{name:"上报间隔",input:!0,data:"uploadInterval"}]}),this.drive.form={base:{uuid:null,enable:!1,name:null,remark:null},driveType:null,loopUpload:{uploadInterval:5}},"OPC_UA_SERVER"==this.channel.form.driveType?this.url=this.$api.upload.drive.uaServer.url:"OPC_UA_UPLOAD"==this.channel.form.driveType?(this.url=this.$api.upload.drive.uaUpload.url,this.driverInfo.push({title:"OPC UA连接信息",data:"params",child:[{name:"用户名",input:!0,data:"user"},{name:"密码",pwd:!0,data:"password"},{name:"url",input:!0,data:"url"},{name:"安全模式",select:!0,data:"securitypolicy",cityList:[{name:"basic128rsa15",val:"basic128rsa15"},{name:"basic256",val:"basic256"},{name:"basic256sha256",val:"basic256sha256"},{name:"aes128_sha256_rsaOaep",val:"aes128_sha256_rsaOaep"},{name:"aes256_sha256_rsapss",val:"aes256_sha256_rsapss"},{name:"none",val:"none"}]}]}),this.drive.form.params={password:null,securitypolicy:null,url:null,user:null}):"OPC_DA_UPLOAD"==this.channel.form.driveType?(this.url=this.$api.upload.drive.daUpload.url,this.driverInfo.push({title:"OPC DA连接信息",data:"params",child:[{name:"连接类型",select:!0,data:"conntype",val:2,cityList:[{name:"服务名称",val:2},{name:"CLSID",val:1}]},{name:"服务器名称",input:!0,sign:!1,data:"progid",val:""},{name:"服务器IP地址",input:!0,sign:!0,data:"host",val:""},{name:"服务器用户名",input:!0,sign:!1,data:"user",val:""},{name:"服务器密码",pwd:!0,sign:!1,data:"password",val:""},{name:"超时时间(毫秒)",input:!0,sign:!0,data:"timeout",val:""}]}),this.drive.form.params={password:null,progid:null,host:null,user:null,timeout:null,conntype:null}):"SOCKET_CLIENT"==this.channel.form.driveType?(this.url=this.$api.upload.drive.socket.url,this.driverInfo.push({title:"SOCKET基本配置",data:"config",child:[{name:"APP ID",input:!0,data:"appId"},{name:"SERVICE ID",input:!0,data:"serviceId"},{name:"网关ID",input:!0,data:"gatewayId"},{name:"企业编码",input:!0,data:"enterpriseId"}]}),this.drive.form.config={appId:null,enterpriseId:null,gatewayId:null,serviceId:null}):"MQTT_CLIENT"==this.channel.form.driveType?(this.url=this.$api.upload.drive.mqtt.url,this.driverInfo.push({title:"MQTT连接信息",data:"params",child:[{name:"上报IP地址",input:!0,data:"host"},{name:"端口",input:!0,data:"port"},{name:"用户名",input:!0,data:"userName"},{name:"密码",pwd:!0,data:"password"},{name:"客户端ID",input:!0,data:"clientId"}]}),this.drive.form.params={clientId:null,host:null,password:null,port:null,userName:null}):"SQL"==this.channel.form.driveType&&(this.url=this.$api.upload.drive.sql.url,this.driverInfo.push({title:"SQL连接信息",data:"params",child:[{name:"数据库名",input:!0,data:"dbName"},{name:"IP",input:!0,data:"host"},{name:"端口",input:!0,data:"port"},{name:"用户名",input:!0,data:"username"},{name:"密码",pwd:!0,data:"password"},{name:"SQL驱动类型",select:!0,data:"type",cityList:[{name:"MySQL",val:"MySQL"},{name:"SQLSERVER",val:"SQLSERVER"},{name:"ORACLE",val:"ORACLE"}]}]}),this.drive.form.params={dbName:null,host:null,password:null,port:null,type:null,username:null})):0==this.loginType&&(this.driverInfo=[{title:"基本信息",data:"base",child:[{name:"名称",input:!0,disabled:!0,data:"name"},{name:"描述",input:!0,disabled:!0,data:"remark"},{name:"状态",swith:!0,disabled:!0,data:"enable"}]}],"OPC_UA_SERVER"!=this.item.driveType&&"MQTT_CLIENT"!=this.item.driveType&&"OPC_UA_UPLOAD"!=this.item.driveType&&"OPC_DA_UPLOAD"!=this.item.driveType&&"SQL"!=this.item.driveType||this.driverInfo.push({title:"配置信息",data:"loopUpload",child:[{name:"上报间隔",input:!0,disabled:!0,data:"uploadInterval"}]}),this.drive.form={base:{uuid:null,enable:!1,name:null,remark:null},driveType:null,loopUpload:{uploadInterval:5}},"OPC_UA_SERVER"==this.channel.form.driveType?this.url=this.$api.upload.drive.uaServer.url:"OPC_UA_UPLOAD"==this.channel.form.driveType?(this.url=this.$api.upload.drive.uaUpload.url,this.driverInfo.push({title:"OPC UA连接信息",data:"params",child:[{name:"用户名",input:!0,disabled:!0,data:"user"},{name:"密码",pwd:!0,disabled:!0,data:"password"},{name:"url",input:!0,disabled:!0,data:"url"},{name:"安全模式",select:!0,disabled:!0,data:"securitypolicy",cityList:[{name:"basic128rsa15",val:"basic128rsa15"},{name:"basic256",val:"basic256"},{name:"basic256sha256",val:"basic256sha256"},{name:"aes128_sha256_rsaOaep",val:"aes128_sha256_rsaOaep"},{name:"aes256_sha256_rsapss",val:"aes256_sha256_rsapss"},{name:"none",val:"none"}]}]}),this.drive.form.params={password:null,securitypolicy:null,url:null,user:null}):"SOCKET_CLIENT"==this.channel.form.driveType?(this.url=this.$api.upload.drive.socket.url,this.driverInfo.push({title:"SOCKET基本配置",data:"config",child:[{name:"APP ID",input:!0,disabled:!0,data:"appId"},{name:"SERVICE ID",input:!0,disabled:!0,data:"serviceId"},{name:"网关ID",input:!0,disabled:!0,data:"gatewayId"},{name:"企业编码",input:!0,disabled:!0,data:"enterpriseId"}]}),this.drive.form.config={appId:null,enterpriseId:null,gatewayId:null,serviceId:null}):"OPC_DA_UPLOAD"==this.channel.form.driveType?(this.url=this.$api.upload.drive.daUpload.url,this.driverInfo.push({title:"OPC DA连接信息",data:"params",child:[{name:"连接类型",select:!0,disabled:!0,data:"conntype",val:2,cityList:[{name:"服务名称",val:2},{name:"CLSID",val:1}]},{name:"服务器名称",input:!0,sign:!1,disabled:!0,data:"progid",val:""},{name:"服务器IP地址",input:!0,sign:!0,disabled:!0,data:"host",val:""},{name:"服务器用户名",input:!0,sign:!1,disabled:!0,data:"user",val:""},{name:"服务器密码",pwd:!0,sign:!1,disabled:!0,data:"password",val:""},{name:"超时时间(毫秒)",input:!0,sign:!0,disabled:!0,data:"timeout",val:""}]}),this.drive.form.params={password:null,progid:null,host:null,user:null,timeout:null,conntype:null}):"MQTT_CLIENT"==this.channel.form.driveType?(this.url=this.$api.upload.drive.mqtt.url,this.driverInfo.push({title:"MQTT连接信息",data:"params",child:[{name:"上报IP地址",input:!0,disabled:!0,data:"host"},{name:"端口",input:!0,disabled:!0,data:"port"},{name:"用户名",input:!0,disabled:!0,data:"userName"},{name:"密码",pwd:!0,disabled:!0,data:"password"},{name:"客户端ID",input:!0,disabled:!0,data:"clientId"}]}),this.drive.form.params={clientId:null,host:null,password:null,port:null,userName:null}):"SQL"==this.channel.form.driveType&&(this.url=this.$api.upload.drive.sql.url,this.driverInfo.push({title:"SQL连接信息",data:"params",child:[{name:"数据库名",input:!0,disabled:!0,data:"dbName"},{name:"IP",input:!0,disabled:!0,data:"host"},{name:"端口",input:!0,disabled:!0,data:"port"},{name:"用户名",input:!0,disabled:!0,data:"username"},{name:"密码",pwd:!0,disabled:!0,data:"password"},{name:"SQL驱动类型",select:!0,disabled:!0,data:"type",cityList:[{name:"MySQL",val:"MySQL"},{name:"SQLSERVER",val:"SQLSERVER"},{name:"ORACLE",val:"ORACLE"}]}]}),this.drive.form.params={dbName:null,host:null,password:null,port:null,type:null,username:null})),this.$https.fetchGet(this.url+"/drive/"+this.item.uuid).then((function(e){for(var a in t.driverInfo){var i=t.driverInfo[a].data;for(var n in t.driverInfo[a].child){var s=t.driverInfo[a].child[n].data;t.$set(t.driverInfo[a].child[n],"val",e.data.data[i][s])}}if("OPC_UA_SERVER"==t.channel.form.driveType){for(var r in t.uaServer.params.push({name:"服务浏览路径",local:"discovery",val:e.data.data.params.discovery},{name:"HTTP端口",local:"httpPort",val:e.data.data.params.httpPort},{name:"服务路径",local:"path",val:e.data.data.params.path},{name:"根节点",local:"rootNode",val:e.data.data.params.rootNode},{name:"TCP端口",local:"tcpPort",val:e.data.data.params.tcpPort}),e.data.data.params.nodes)t.uaServer.nodes_list.push({nameVal:e.data.data.params.nodes[r].name,sqlStrVal:e.data.data.params.nodes[r].sqlStr});for(var o in e.data.data.params.users)t.uaServer.users_list.push({nameVal:e.data.data.params.users[o].name,passwordVal:e.data.data.params.users[o].password})}if("OPC_UA_UPLOAD"==t.channel.form.driveType&&(t.drive.val.nameSpaceIndex=e.data.data.nameSpaceIndex),"SOCKET_CLIENT"==t.channel.form.driveType)for(var l in t.drive.val.alarmRate=e.data.data.alarmRate,t.drive.val.quotaRate=e.data.data.quotaRate,t.drive.val.reportType=e.data.data.reportType,e.data.data.ipMap)t.drive.params.push({cipherCodeVal:e.data.data.ipMap[l].cipherCode,cipherIvVal:e.data.data.ipMap[l].cipherIv,encryptionTypeVal:e.data.data.ipMap[l].encryptionType,reportIpVal:e.data.data.ipMap[l].reportIp});if("MQTT_CLIENT"==t.channel.form.driveType)for(var d in e.data.data.topics)t.drive.params.push({nameVal:e.data.data.topics[d].name,qosVal:e.data.data.topics[d].qos,topicVal:e.data.data.topics[d].topic,topicIdVal:e.data.data.topics[d].topicId})})).catch((function(t){}))},updateDrive:function(){var t=this;for(var e in this.driverInfo){var a=this.driverInfo[e].data;for(var i in this.driverInfo[e].child){var n=this.driverInfo[e].child[i].data;this.drive.form[a][n]=this.driverInfo[e].child[i].val}}this.drive.form.base.uuid=this.item.uuid,this.drive.form.driveType=this.item.driveType;var s=this.checkDrive(),r=null;if("OPC_UA_SERVER"==this.channel.form.driveType){var o={},l={};for(var d in this.uaServer.nodes_list)o[d]={name:null,sqlStr:null};for(var c in this.uaServer.users_list)l[c]={name:null,password:null};for(var p in this.drive.form.params={discovery:null,httpPort:null,path:null,rootNode:null,tcpPort:null,nodes:o,users:l},this.uaServer.params){var u=this.uaServer.params[p].local;this.drive.form.params[u]=this.uaServer.params[p].val}for(var m in this.uaServer.nodes_list)this.drive.form.params.nodes[m].name=this.uaServer.nodes_list[m].nameVal,this.drive.form.params.nodes[m].sqlStr=this.uaServer.nodes_list[m].sqlStrVal;var h={};for(var f in this.uaServer.users_list)for(var v=this.uaServer.users_list.length-1;v>f;v--)if(this.uaServer.users_list[f].nameVal==this.uaServer.users_list[v].nameVal)return this.$Message.error({content:"用户名存在同名",duration:3}),void(r=!0);for(var g in this.uaServer.users_list)this.drive.form.params.users[g].name=this.uaServer.users_list[g].nameVal,this.drive.form.params.users[g].password=this.uaServer.users_list[g].passwordVal,h[this.drive.form.params.users[g].name]=this.drive.form.params.users[g];this.drive.form.params.users=h,r=this.checkServerDrive()}else if("OPC_UA_UPLOAD"==this.channel.form.driveType)this.drive.form.nameSpaceIndex=this.drive.val.nameSpaceIndex,r=this.checkUploadDrive();else if("OPC_DA_UPLOAD"==this.channel.form.driveType)r=this.checkUAUploadDrive();else if("SOCKET_CLIENT"==this.channel.form.driveType){var y={};for(var x in this.drive.params)y[x]={cipherCode:null,cipherIv:null,encryptionType:null,reportIp:null};for(var b in this.drive.form.alarmRate=this.drive.val.alarmRate,this.drive.form.ipMap=y,this.drive.form.quotaRate=this.drive.val.quotaRate,this.drive.form.reportType=this.drive.val.reportType,this.drive.params)this.drive.form.ipMap[b].cipherCode=this.drive.params[b].cipherCodeVal,this.drive.form.ipMap[b].cipherIv=this.drive.params[b].cipherIvVal,this.drive.form.ipMap[b].encryptionType=this.drive.params[b].encryptionTypeVal,this.drive.form.ipMap[b].reportIp=this.drive.params[b].reportIpVal;r=this.checkSocketDrive()}else if("MQTT_CLIENT"==this.channel.form.driveType){var S={};for(var w in this.drive.params)S[w]={name:null,qos:null,topic:null,topicId:null};for(var _ in this.drive.form.topics=S,this.drive.params)this.drive.form.topics[_].name=this.drive.params[_].nameVal,this.drive.form.topics[_].qos=this.drive.params[_].qosVal,this.drive.form.topics[_].topic=this.drive.params[_].topicVal,this.drive.form.topics[_].topicId=this.drive.params[_].topicIdVal;r=this.checkMqttDrive()}else"SQL"==this.channel.form.driveType&&(r=this.checkSQLDrive());0==s&&0==r&&this.$https.fetchPost(this.url+"/updateDrive",this.drive.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"驱动配置成功",desc:"正在刷新界面",duration:2.5}),t.reload()):t.$Notice.error({title:"驱动配置失败",desc:e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",duration:2.5})}))},is_Connect:function(t){var e=this;this.loading=!0;var a=null;"OPC_UA_UPLOAD"==this.channel.form.driveType?a={password:this.driverInfo[2].child[1].val,securitypolicy:this.driverInfo[2].child[3].val,url:this.driverInfo[2].child[2].val,user:this.driverInfo[2].child[0].val}:"OPC_DA_UPLOAD"==this.channel.form.driveType?a={password:this.driverInfo[2].child[4].val,timeout:this.driverInfo[2].child[5].val,host:this.driverInfo[2].child[2].val,user:this.driverInfo[2].child[3].val,progid:this.driverInfo[2].child[1].val,conntype:this.driverInfo[2].child[0].val}:"SOCKET_CLIENT"==this.channel.form.driveType?a={ipPort:this.drive.params[t].reportIpVal}:"MQTT_CLIENT"==this.channel.form.driveType?a={clientId:this.driverInfo[2].child[4].val,host:this.driverInfo[2].child[0].val,password:this.driverInfo[2].child[3].val,port:this.driverInfo[2].child[1].val,userName:this.driverInfo[2].child[2].val}:"SQL"==this.channel.form.driveType&&(a={dbName:this.driverInfo[2].child[0].val,host:this.driverInfo[2].child[1].val,password:this.driverInfo[2].child[4].val,port:this.driverInfo[2].child[2].val,type:this.driverInfo[2].child[5].val,username:this.driverInfo[2].child[3].val}),this.$https.fetchPost(this.url+"/isConnect",a).then((function(t){t.data.data?(e.$Notice.success({title:"连接成功",desc:"请进行下一步...",duration:2.5}),e.loading=!1):e.$Notice.error({title:"连接失败",desc:"请重新填写...",duration:2.5}),e.loading=!1})).catch((function(t){e.$Notice.error({title:"请求失败",duration:2.5}),e.loading=!1}))},add_nodes:function(){this.uaServer.nodes_list.length>=5?this.add_nodes_disabled=!0:this.uaServer.nodes_list.push({})},del_nodes:function(t){this.add_nodes_disabled=!1,this.uaServer.nodes_list.splice(t,1)},add_users:function(){this.uaServer.users_list.length>=3?this.add_users_disabled=!0:this.uaServer.users_list.push({})},del_users:function(t){this.add_users_disabled=!1,this.uaServer.users_list.splice(t,1)},add_params:function(){this.drive.params.length>=10?this.add_mqtt_disabled=!0:this.drive.params.push({})},del_params:function(t){this.add_mqtt_disabled=!1,this.drive.params.splice(t,1)},checkDrive:function(){var t=!1;return""===this.drive.form.base.name||""===this.drive.form.loopUpload.uploadInterval?(this.$Message.error({content:"请填写驱动名称或者间隔时间...",duration:3}),t=!0):/^[1-9]\d{0,2}$/.test(this.drive.form.loopUpload.uploadInterval)?/^[\u4E00-\u9FA5A-Za-z0-9]+$/.test(this.drive.form.base.name)||(this.$Message.error({content:"驱动名称不允许特殊符号...",duration:3}),t=!0):(this.$Message.error({content:"间隔时间填写1-999之间的数字...",duration:3}),t=!0),t},checkUploadDrive:function(){var t=!1;return""===this.drive.form.params.password||""===this.drive.form.params.user||""===this.drive.form.params.url||""===this.drive.form.nameSpaceIndex?(this.$Message.error({content:"请填写用户名、密码、URL、名称空间编号...",duration:3}),t=!0):/^[\da-zA-Z\u4e00-\u9fa5_]{0,30}$/.test(this.drive.form.params.user)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.drive.form.params.password)||(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字或中文...",duration:3}),t=!0),t},checkUAUploadDrive:function(){var t=!1;return/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.drive.form.params.host)?/^[1-9]\d{0,7}$/.test(this.drive.form.params.timeout)||(this.$Message.error({content:"超时时间填写1-99999999之间的数字...",duration:3}),t=!0):(this.$Message.error({content:"服务器IP地址请填写正确的IP格式...",duration:3}),t=!0),t},checkServerDrive:function(){var t=!1;for(var e in""===this.drive.form.params.discovery||""===this.drive.form.params.httpPort||""===this.drive.form.params.path||""===this.drive.form.params.rootNode||""===this.drive.form.params.tcpPort?(this.$Message.error({content:"请填写HTTP端口、TCP端口、服务路径、服务浏览路径、根节点...",duration:3}),t=!0):/^[1-9]\d{0,5}$/.test(this.drive.form.params.httpPort)&&/^[1-9]\d{0,5}$/.test(this.drive.form.params.tcpPort)?/^[A-Za-z1-9]{0,18}$/.test(this.drive.form.params.path)&&/^[A-Za-z1-9]{0,18}$/.test(this.drive.form.params.rootNode)?/^[A-Za-z1-9/]{0,24}$/.test(this.drive.form.params.discovery)||(this.$Message.error({content:"服务浏览路径填写24位以内的数字与英文,不能为0...",duration:3}),t=!0):(this.$Message.error({content:"服务路径、根路径填写18位以内的数字与英文,不能为0...",duration:3}),t=!0):(this.$Message.error({content:"HTTP端口、TCP端口填写5位以内的数字,不能为0...",duration:3}),t=!0),this.drive.form.params.nodes)""===this.drive.form.params.nodes[e].name||""===this.drive.form.params.nodes[e].sqlStr?(this.$Message.error({content:"请填写NODE名称、发布标识...",duration:3}),t=!0):/^[1-9a-zA-Z]{0,18}$/.test(this.drive.form.params.nodes[e].name)&&/^[1-9a-zA-Z]{0,18}$/.test(this.drive.form.params.nodes[e].sqlStr)||(this.$Message.error({content:"NODE名称、发布标识填写18位以内英文、数字,不能为0...",duration:3}),t=!0);var a=Object.keys(this.drive.form.params.nodes);for(var i in this.drive.form.params.nodes)for(var n=a.length-1;n>i;n--)this.drive.form.params.nodes[i].name!=this.drive.form.params.nodes[n].name&&this.drive.form.params.nodes[i].sqlStr!=this.drive.form.params.nodes[n].sqlStr||(this.$Message.error({content:"NODE名称、发布标识存在同名",duration:3}),t=!0);for(var s in this.drive.form.params.users)""===this.drive.form.params.users[s].name||""===this.drive.form.params.users[s].password?(this.$Message.error({content:"请填写用户名、密码...",duration:3}),t=!0):/^[\da-zA-Z_]{0,30}$/.test(this.drive.form.params.users[s].name)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.drive.form.params.password)||(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字...",duration:3}),t=!0);return t},checkSocketDrive:function(){var t=!1;for(var e in""===this.drive.form.config.appId||""===this.drive.form.config.enterpriseId||""===this.drive.form.config.gatewayId||""===this.drive.form.config.serviceId||""===this.drive.form.alarmRate||""===this.drive.form.quotaRate?(this.$Message.error({content:"请填写APP ID、企业编码、网关ID、SERVICE ID、告警频率、指标频率...",duration:3}),t=!0):/^[1-9]\d{0,3}$/.test(this.drive.form.alarmRate)&&/^[1-9]\d{0,3}$/.test(this.drive.form.quotaRate)||(this.$Message.error({content:"告警频率、指标频率填写3位以内的数字,不能为0...",duration:3}),t=!0),this.drive.form.ipMap)""===this.drive.form.ipMap[e].cipherCode||""===this.drive.form.ipMap[e].cipherIv||""===this.drive.form.ipMap[e].encryptionType||""===this.drive.form.ipMap[e].reportIp?(this.$Message.error({content:"请填写加密密钥、向量IV、加密类型、上报地址...",duration:3}),t=!0):/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5]):([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.drive.form.ipMap[e].reportIp)||(this.$Message.error({content:"上报地址请填写正确的 IP:端口 格式...",duration:3}),t=!0);return t},checkMqttDrive:function(){var t=!1;for(var e in""===this.drive.form.params.clientId||""===this.drive.form.params.host||""===this.drive.form.params.password||""===this.drive.form.params.userName||""===this.drive.form.params.port?(this.$Message.error({content:"请填写客户端ID、上报IP地址、用户名、密码、端口...",duration:3}),t=!0):/^[\da-zA-Z_]{0,30}$/.test(this.drive.form.params.userName)&&/^[\da-zA-Z_]{0,30}$/.test(this.drive.form.params.clientId)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.drive.form.params.password)?/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.drive.form.params.port)?/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.drive.form.params.host)||(this.$Message.error({content:"请填写正确的IP格式...",duration:3}),t=!0):(this.$Message.error({content:"请正确填写端口号(1-65535)...",duration:3}),t=!0):(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"客户端ID、用户名填写30位以内英文、数字...",duration:3}),t=!0),this.drive.form.topics)""===this.drive.form.topics[e].name||""===this.drive.form.topics[e].topic||""===this.drive.form.topics[e].topicId?(this.$Message.error({content:"请填写名称、发布标题、ID...",duration:3}),t=!0):/^[\da-zA-Z]{0,30}$/.test(this.drive.form.topics[e].name)&&/^[\da-zA-Z]{0,30}$/.test(this.drive.form.topics[e].topicId)||(this.$Message.error({content:"名称、ID填写30位以内英文、数字...",duration:3}),t=!0);return t},checkSQLDrive:function(){var t=!1;return""===this.drive.form.params.dbName||""===this.drive.form.params.host||""===this.drive.form.params.password||""===this.drive.form.params.username||""===this.drive.form.params.port?(this.$Message.error({content:"请填写数据库名、IP、密码、端口、用户名...",duration:3}),t=!0):/^[\da-zA-Z_./!@#$%^&*[`~!@#$%^&*()_\-+=<>?:"{}|,.\/;'\\[\]·~！@#￥%……&*（）——\-+={}|《》？：“”【】、；‘]{0,30}$/.test(this.drive.form.params.username)?/^[\da-zA-Z!@#$%^&*]{0,30}$/.test(this.drive.form.params.password)?/^([1-9][0-9]{0,3}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]{1}|6553[0-5])$/.test(this.drive.form.params.port)?/^((\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(this.drive.form.params.host)||(this.$Message.error({content:"请填写正确的IP格式...",duration:3}),t=!0):(this.$Message.error({content:"请正确填写端口号(1-65535)...",duration:3}),t=!0):(this.$Message.error({content:"密码填写30位以内英文、数字或特殊字符...",duration:3}),t=!0):(this.$Message.error({content:"用户名填写30位以内英文、数字或特殊字符...",duration:3}),t=!0),t}}},r=(a("5d9c"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",staticStyle:{float:"left",width:"100%"}},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header",class:t.loginType?"pad5":"",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),t.loginType?a("Button",{staticStyle:{float:"right","padding-bottom":"5px"},attrs:{type:"primary"},on:{click:t.updateDrive}},[t._v("保存")]):t._e()],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"715px",overflow:"auto"}},[a("contentTabs",{attrs:{links:t.driverInfo}}),t.loginType?a("div",["OPC_UA_SERVER"==t.channel.form.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("OPC UA连接信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[t._l(t.uaServer.params,(function(e,i){return a("div",{key:i,staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.name)+":")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"d.val"}})],1)})),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("NODE节点")]),t._l(t.uaServer.nodes_list,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 10px",float:"left",width:"60%"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("NODE名称:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.nameVal,callback:function(a){t.$set(e,"nameVal",a)},expression:"d.nameVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("NODE标识:")]),a("Input",{staticStyle:{width:"130px","margin-right":"10px"},model:{value:e.sqlStrVal,callback:function(a){t.$set(e,"sqlStrVal",a)},expression:"d.sqlStrVal"}})],1),0==i?a("Button",{attrs:{size:"small",disabled:t.add_nodes_disabled},on:{click:t.add_nodes}},[t._v("+")]):t._e(),i>0?a("Button",{attrs:{size:"small"},on:{click:function(e){return t.del_nodes(i)}}},[t._v("-")]):t._e()],1)}))],2),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("用户")]),t._l(t.uaServer.users_list,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 10px",float:"left",width:"60%"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("用户名:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.nameVal,callback:function(a){t.$set(e,"nameVal",a)},expression:"d.nameVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("密码:")]),a("Input",{staticStyle:{width:"130px","margin-right":"10px"},attrs:{type:"password"},model:{value:e.passwordVal,callback:function(a){t.$set(e,"passwordVal",a)},expression:"d.passwordVal"}})],1),0==i?a("Button",{attrs:{size:"small",disabled:t.add_users_disabled},on:{click:t.add_users}},[t._v("+")]):t._e(),i>0?a("Button",{attrs:{size:"small"},on:{click:function(e){return t.del_users(i)}}},[t._v("-")]):t._e()],1)}))],2)],2)]):t._e(),"MQTT_CLIENT"==t.channel.form.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("发布信息配置")]),t._l(t.drive.params,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 10px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("发布名称:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.nameVal,callback:function(a){t.$set(e,"nameVal",a)},expression:"d.nameVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("发布ID:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.topicIdVal,callback:function(a){t.$set(e,"topicIdVal",a)},expression:"d.topicIdVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("发布标题:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.topicVal,callback:function(a){t.$set(e,"topicVal",a)},expression:"d.topicVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("消息质量:")]),a("Select",{staticStyle:{width:"130px","text-align":"left"},model:{value:e.qosVal,callback:function(a){t.$set(e,"qosVal",a)},expression:"d.qosVal"}},[a("Option",{attrs:{value:parseInt("0")}},[t._v("最多一次,有可能重复或丢失")]),a("Option",{attrs:{value:parseInt("1")}},[t._v("至少一次,有可能重复")]),a("Option",{attrs:{value:parseInt("2")}},[t._v("只有一次,确保消息只到达一次")])],1)],1),0==i?a("Button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small",disabled:t.add_mqtt_disabled},on:{click:t.add_params}},[t._v("+")]):t._e(),i>0?a("Button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{size:"small"},on:{click:function(e){return t.del_params(i)}}},[t._v("-")]):t._e()],1)}))],2):t._e(),"OPC_UA_UPLOAD"==t.channel.form.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("名称空间编号")]),a("div",{staticStyle:{margin:"15px 0 0 10px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:t.drive.val.nameSpaceIndex,callback:function(e){t.$set(t.drive.val,"nameSpaceIndex",e)},expression:"drive.val.nameSpaceIndex"}})],1)])]):t._e(),"SOCKET_CLIENT"==t.channel.form.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0",display:"flex"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("SOCKET驱动信息")]),a("div",{staticStyle:{margin:"15px 7px"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","padding-right":"5px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("告警上报频率/秒:")]),a("Input",{staticStyle:{width:"130px","margin-right":"0px"},model:{value:t.drive.val.alarmRate,callback:function(e){t.$set(t.drive.val,"alarmRate",e)},expression:"drive.val.alarmRate"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","padding-right":"5px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("指标上报频率/秒:")]),a("Input",{staticStyle:{width:"130px","margin-right":"0px"},model:{value:t.drive.val.quotaRate,callback:function(e){t.$set(t.drive.val,"quotaRate",e)},expression:"drive.val.quotaRate"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","padding-right":"5px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("上报格式类型:")]),a("Select",{staticStyle:{width:"130px","margin-right":"0px","text-align":"left"},model:{value:t.drive.val.reportType,callback:function(e){t.$set(t.drive.val,"reportType",e)},expression:"drive.val.reportType"}},[a("Option",{key:"WH",attrs:{value:"WH"}},[t._v("危化")]),a("Option",{key:"AGY",attrs:{value:"AGY"}},[t._v("安工院")])],1)],1),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("上报IP信息")]),t._l(t.drive.params,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 -5px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("上报地址:")]),a("Input",{staticStyle:{width:"130px"},model:{value:e.reportIpVal,callback:function(a){t.$set(e,"reportIpVal",a)},expression:"d.reportIpVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("向量IV:")]),a("Input",{staticStyle:{width:"130px","margin-right":"-2px"},model:{value:e.cipherIvVal,callback:function(a){t.$set(e,"cipherIvVal",a)},expression:"d.cipherIvVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"255px","padding-right":"5px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("加密密钥:")]),a("Input",{staticStyle:{width:"130px","margin-right":"-7px"},model:{value:e.cipherCodeVal,callback:function(a){t.$set(e,"cipherCodeVal",a)},expression:"d.cipherCodeVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("加密类型:")]),a("Select",{staticStyle:{width:"130px","text-align":"left"},model:{value:e.encryptionTypeVal,callback:function(a){t.$set(e,"encryptionTypeVal",a)},expression:"d.encryptionTypeVal"}},[a("Option",{key:"AES128",attrs:{value:"AES128"}},[t._v("AES128")]),a("Option",{key:"AES256",attrs:{value:"AES256"}},[t._v("AES256")])],1)],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","text-align":"right"}},[0==i?a("Button",{staticStyle:{float:"left","margin-left":"80px"},on:{click:t.add_params}},[t._v("+")]):t._e(),i>0?a("Button",{staticStyle:{float:"left","margin-left":"80px"},on:{click:function(e){return t.del_params(i)}}},[t._v("-")]):t._e(),t.loginType?t._e():a("Button",{staticStyle:{float:"left","margin-left":"10px"},attrs:{type:"warning",loading:t.loading},on:{click:function(e){return t.is_Connect(i)}}},[t._v("连接测试")])],1)])}))],2)])]):t._e(),!t.loginType&&"OPC_UA_UPLOAD"==t.channel.form.driveType||!t.loginType&&"OPC_DA_UPLOAD"==t.channel.form.driveType||!t.loginType&&"MQTT_CLIENT"==t.channel.form.driveType||!t.loginType&&"SQL"==t.channel.form.driveType?a("Button",{staticStyle:{float:"left","margin-bottom":"20px"},attrs:{size:"small",type:"warning",loading:t.loading},on:{click:t.is_Connect}},[t._v("连接测试")]):t._e()],1):t._e(),t.loginType?t._e():a("div",["OPC_UA_SERVER"==t.channel.form.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("OPC UA连接信息")]),a("div",{staticStyle:{margin:"15px 10px"}},[t._l(t.uaServer.params,(function(e,i){return a("div",{key:i,staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v(t._s(e.name)+":")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:e.val,callback:function(a){t.$set(e,"val",a)},expression:"d.val"}})],1)})),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("NODE节点")]),t._l(t.uaServer.nodes_list,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 10px",float:"left",width:"60%"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("NODE名称:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:e.nameVal,callback:function(a){t.$set(e,"nameVal",a)},expression:"d.nameVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("NODE标识:")]),a("Input",{staticStyle:{width:"130px","margin-right":"10px"},attrs:{disabled:""},model:{value:e.sqlStrVal,callback:function(a){t.$set(e,"sqlStrVal",a)},expression:"d.sqlStrVal"}})],1)])}))],2),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("用户")]),t._l(t.uaServer.users_list,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 10px",float:"left",width:"60%"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("用户名:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:e.nameVal,callback:function(a){t.$set(e,"nameVal",a)},expression:"d.nameVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("密码:")]),a("Input",{staticStyle:{width:"130px","margin-right":"10px"},attrs:{disabled:"",type:"password"},model:{value:e.passwordVal,callback:function(a){t.$set(e,"passwordVal",a)},expression:"d.passwordVal"}})],1)])}))],2)],2)]):t._e(),"MQTT_CLIENT"==t.channel.form.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("发布信息配置")]),t._l(t.drive.params,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 10px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("发布名称:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:e.nameVal,callback:function(a){t.$set(e,"nameVal",a)},expression:"d.nameVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("发布ID:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:e.topicIdVal,callback:function(a){t.$set(e,"topicIdVal",a)},expression:"d.topicIdVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("发布标题:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:e.topicVal,callback:function(a){t.$set(e,"topicVal",a)},expression:"d.topicVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"265px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("消息质量:")]),a("Select",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:e.qosVal,callback:function(a){t.$set(e,"qosVal",a)},expression:"d.qosVal"}},[a("Option",{attrs:{value:parseInt("0")}},[t._v("最多一次,有可能重复或丢失")]),a("Option",{attrs:{value:parseInt("1")}},[t._v("至少一次,有可能重复")]),a("Option",{attrs:{value:parseInt("2")}},[t._v("只有一次,确保消息只到达一次")])],1)],1)])}))],2):t._e(),"OPC_UA_UPLOAD"==t.channel.form.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("名称空间编号")]),a("div",{staticStyle:{margin:"15px 0 0 10px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"250px","text-align":"right"}},[a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:t.drive.val.nameSpaceIndex,callback:function(e){t.$set(t.drive.val,"nameSpaceIndex",e)},expression:"drive.val.nameSpaceIndex"}})],1)])]):t._e(),"SOCKET_CLIENT"==t.channel.form.driveType?a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0",display:"flex"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("SOCKET驱动信息")]),a("div",{staticStyle:{margin:"15px 7px"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","padding-right":"5px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("告警上报频率/秒:")]),a("Input",{staticStyle:{width:"130px","margin-right":"0px"},attrs:{disabled:""},model:{value:t.drive.val.alarmRate,callback:function(e){t.$set(t.drive.val,"alarmRate",e)},expression:"drive.val.alarmRate"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","padding-right":"5px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("指标上报频率/秒:")]),a("Input",{staticStyle:{width:"130px","margin-right":"0px"},attrs:{disabled:""},model:{value:t.drive.val.quotaRate,callback:function(e){t.$set(t.drive.val,"quotaRate",e)},expression:"drive.val.quotaRate"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","padding-right":"5px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("上报格式类型:")]),a("Select",{staticStyle:{width:"130px","margin-right":"0px","text-align":"left"},attrs:{disabled:""},model:{value:t.drive.val.reportType,callback:function(e){t.$set(t.drive.val,"reportType",e)},expression:"drive.val.reportType"}},[a("Option",{key:"WH",attrs:{value:"WH"}},[t._v("危化")]),a("Option",{key:"AGY",attrs:{value:"AGY"}},[t._v("安工院")])],1)],1),a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative",float:"left",margin:"20px 0"}},[a("span",{staticStyle:{background:"#fff",display:"block",height:"20px",width:"120px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("上报IP信息")]),t._l(t.drive.params,(function(e,i){return a("div",{key:i,staticStyle:{margin:"15px 0 0 -5px",float:"left"}},[a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("上报地址:")]),a("Input",{staticStyle:{width:"130px"},attrs:{disabled:""},model:{value:e.reportIpVal,callback:function(a){t.$set(e,"reportIpVal",a)},expression:"d.reportIpVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("向量IV:")]),a("Input",{staticStyle:{width:"130px","margin-right":"-2px"},attrs:{disabled:""},model:{value:e.cipherIvVal,callback:function(a){t.$set(e,"cipherIvVal",a)},expression:"d.cipherIvVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"255px","padding-right":"5px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("加密密钥:")]),a("Input",{staticStyle:{width:"130px","margin-right":"-7px"},attrs:{disabled:""},model:{value:e.cipherCodeVal,callback:function(a){t.$set(e,"cipherCodeVal",a)},expression:"d.cipherCodeVal"}})],1),a("div",{staticStyle:{float:"left","margin-bottom":"10px",width:"260px","text-align":"right"}},[a("span",{staticStyle:{"margin-right":"15px","font-size":"12px"}},[t._v("加密类型:")]),a("Select",{staticStyle:{width:"130px","text-align":"left"},attrs:{disabled:""},model:{value:e.encryptionTypeVal,callback:function(a){t.$set(e,"encryptionTypeVal",a)},expression:"d.encryptionTypeVal"}},[a("Option",{key:"AES128",attrs:{value:"AES128"}},[t._v("AES128")]),a("Option",{key:"AES256",attrs:{value:"AES256"}},[t._v("AES256")])],1)],1)])}))],2)])]):t._e(),!t.loginType&&"OPC_UA_UPLOAD"==t.channel.form.driveType||!t.loginType&&"OPC_DA_UPLOAD"==t.channel.form.driveType||!t.loginType&&"MQTT_CLIENT"==t.channel.form.driveType||!t.loginType&&"SQL"==t.channel.form.driveType?a("Button",{staticStyle:{float:"left","margin-bottom":"20px"},attrs:{size:"small",type:"warning",loading:t.loading},on:{click:t.is_Connect}},[t._v("连接测试")]):t._e()],1)],1)])])}),[],!1,null,"7155a090",null);e.default=o.exports},e52e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB4klEQVRYR+2WMUjDUBCGL4F2UujkpODg4txJB7Gjo1sdXYuU9zp0tU4diuVeujgouOng4Ka42EEFQZ11EAQRB0cHIdCcXE2ltknzQl4oQt+SIZd3X/7737uzYMzLGnN+mAD8UUAIsZpmSRCxPbh/EMBlShA7iFiLAzBEmwCMlY0HgIhGDCqE4L/e/r8AvjFj+aJfvcQKjB0ggfG6n5pSgE0UtdjlQyfHFICOBwppAujckO00AQLlH0xYrVanXdfN53K5m1qt5pr0QFAJfiUXQiwBwC4A8JPXFwBcEFFdKXU7yjyhvaB3lkccwy5An8mC8rAK9aAe0AuOBBhFL6UsEtERxxDRHhHtO45zz4oQUdmyrKL//SYiHgbtlRTgmoiWw+55KWWLiLaI6FEptWgUoFQqTWWz2U8AeEPE2aDNy+Vy3rbtO36XyWQWGo3Gs3Y7juqGfd7g41cIK5UQgvx3eUR8MAYQV4FOpzPTarU+jAHwRlJKXQ+cK6XWjHrAB9A6BZ7nbTiOcxwLAAAiRzKuvRCCG9XQrDeQ7MW27ZVms/mqXYKo1seAPfMF3IR8L1xZlnXgj2PzAHCKiOs6ABq5f0LCegEAPCHiO8dUKpU5z/POAOAkcirWzmww0Mjkm4RnAvANSPBnMN26wT8AAAAASUVORK5CYII="},e570:function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("84df"),s={name:"LogCollectComm",components:{jk_tabs:i.a},data:function(){var t=this;return{columns:[{title:"序号",width:70,align:"center",render:function(t,e){return t("span",e.index+1)}},{title:"设备运行信息",align:"center",render:function(t,e){return t("div",[t("span",{style:{display:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:e.row.devJson}},e.row.devJson)])}},{title:"运行时间",sortable:!0,align:"center",width:200,render:function(e,a){return e("p",t.$util.time_stamp2time_date(a.row.timestamp).format("yyyy-MM-dd hh:mm:ss"))}}],timeVal:null,loading:!1,data:[],total:0,page:{form:{page:1,size:10,sorts:[{filed:"timestamp",order:!0}]}},links:[{name:"采集系统运行日志",to:"/logs/logCollectSys"}]}},mounted:function(){this.showData()},methods:{showData:function(){var t=this;this.$https.fetchPost(this.$api.log.collect.sys.url,this.page.form).then((function(e){t.data=e.data.data.data,t.total=e.data.data.count})).catch((function(t){}))},pageChange:function(t){this.page.form.page=t,this.showData()},formatDate:function(t){var e=new Date(t);return Object(n.a)(e,"yyyy-MM-dd hh:mm")},query:function(){if(this.page.form.filters=[],""!=this.timeVal[0]&&""!=this.timeVal[1]){var t=new Date(this.$util.time_stamp2time_date(this.timeVal[0]).format("yyyy-MM-dd hh:mm:ss")).getTime(),e=new Date(this.$util.time_stamp2time_date(this.timeVal[1]).format("yyyy-MM-dd hh:mm:ss")).getTime();this.page.form.filters.push({filed:"timestamp",params:[t,e],type:"between"})}this.showData()}}},r=(a("45fb"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{border:"1px solid #666",width:"100%",position:"relative","margin-top":"20px",height:"60px"}},[a("span",{staticStyle:{background:"#faf8f7",display:"block",height:"20px",width:"90px",position:"absolute",left:"10px",top:"-10px","text-align":"center","font-size":"12px"}},[t._v("查询条件")]),a("div",{staticStyle:{margin:"15px 10px",height:"70px"}},[a("div",{staticStyle:{width:"400px",float:"left","font-size":"12px"}},[t._v("\n                        时间范围：\n                        "),a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"datetimerange"},model:{value:t.timeVal,callback:function(e){t.timeVal=e},expression:"timeVal"}})],1),a("div",{staticStyle:{float:"left","margin-top":"3px"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:t.query}},[t._v("查询")])],1)])]),a("Table",{staticStyle:{"margin-top":"30px"},attrs:{size:"small",border:"",loading:t.loading,columns:t.columns,data:t.data}}),a("div",{staticClass:"foot"},[a("span",{staticClass:"desc",staticStyle:{"font-size":"13px"}},[t._v("查询"+t._s(t.total)+"条，当前第"+t._s(t.page.form.page)+"页")]),a("Page",{staticClass:"btn",attrs:{current:t.page.form.page,total:t.total,"page-size":t.page.form.size,simple:""},on:{"on-change":t.pageChange}})],1)],1)])])}),[],!1,null,"c3dfe4d4",null);e.default=o.exports},e686:function(t,e,a){"use strict";a("26b4")},e97a:function(t,e,a){"use strict";a.r(e),a("a450"),a("1bc78");var i=a("25b1"),n={name:"NetworkInterfaceAdd",components:{},data:function(){var t=this,e=function(e,a){return function(i,n,s){var r=t.platForm.form.ipVersion,o="IPV6"==r?a:e;("IPV6"==r?/^(([\da-fA-F]{1,4}):){8}$/:/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/).test(n+="IPV6"==r?":":".")?s():s(new Error(o))}};return{platForm:{show:!1,state:"禁用",form:{ipVersion:"IPV4",destination:"",gateway:"",genmask:"",iface:"",state:""},ruleInline:{ipVersion:{required:!0,trigger:"change",message:"请选择网络版本"},destination:{required:!0,trigger:"change",validator:e("请输入合法的ipv4地址","请输入合法的ipv6地址")},genmask:{required:!0,trigger:"change",validator:function(e,a,i){"IPV4"==t.platForm.form.ipVersion?/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/.test(a+".")?i():i(new Error("请输入合法的ipv4子网掩码")):/^[0-9]*$/.test(a)&&a>0&&a<129?i():i(new Error("请输入合法的ipv6前缀，0~129之间的数字"))}},gateway:{required:!0,trigger:"change",validator:e("请输入合法的ipv4网关","请输入合法的ipv6网关")},iface:{required:!0,message:"请选择要设置网络接口",trigger:"change"}}},netInfs:[]}},computed:{},mounted:function(){},methods:{showNetInfterace:function(){var t=this;this.$https.fetchGet(this.$api.system.inf.showNetInterface.url).then((function(e){e.data.data.forEach((function(e){t.netInfs.push(e.name)}))})).catch((function(t){}))},showAddDrawer:function(){this.showNetInfterace(),this.platForm.show=!0},addPlatForm:function(){var t=this;this.$refs.plat_form.validate((function(e){e&&("禁用"==t.platForm.state?t.platForm.form.state=!1:t.platForm.form.state=!0,t.$https.fetchPost(t.$api.system.inf.route.url,t.platForm.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"路由添加成功",desc:"正在刷新界面",duration:2.5}),location.reload()):t.$Notice.error({title:"路由添加失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})})))}))},restPlatForm:function(){this.$refs.plat_form.resetFields()}}},s=(a("a1cc"),a("c701")),r=Object(s.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Button",{attrs:{type:"primary"},on:{click:t.showAddDrawer}},[t._v("\n            新增\n        ")]),a("Modal",{attrs:{title:"静态路由",width:"600",styles:{top:"25%"}},model:{value:t.platForm.show,callback:function(e){t.$set(t.platForm,"show",e)},expression:"platForm.show"}},[a("Form",{ref:"plat_form",attrs:{rules:t.platForm.ruleInline,model:t.platForm.form,"label-width":150}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"状态",prop:"state"}},[a("RadioGroup",{model:{value:t.platForm.state,callback:function(e){t.$set(t.platForm,"state",e)},expression:"platForm.state"}},[a("Radio",{attrs:{label:"禁用"}}),a("Radio",{attrs:{label:"启用"}})],1)],1),a("FormItem",{attrs:{prop:"ipVersion",label:"网络版本"}},[a("RadioGroup",{model:{value:t.platForm.form.ipVersion,callback:function(e){t.$set(t.platForm.form,"ipVersion",e)},expression:"platForm.form.ipVersion"}},[a("Radio",{attrs:{label:"IPV4"}},[t._v("IPV4")])],1)],1),a("FormItem",{attrs:{prop:"destination",label:"ip地址"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.1"},model:{value:t.platForm.form.destination,callback:function(e){t.$set(t.platForm.form,"destination",e)},expression:"platForm.form.destination"}})],1),a("FormItem",{attrs:{prop:"genmask",label:"掩码/前缀"}},[a("Input",{attrs:{type:"text",placeholder:"255.255.255.0"},model:{value:t.platForm.form.genmask,callback:function(e){t.$set(t.platForm.form,"genmask",e)},expression:"platForm.form.genmask"}})],1),a("FormItem",{attrs:{prop:"gateway",label:"网关"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.254"},model:{value:t.platForm.form.gateway,callback:function(e){t.$set(t.platForm.form,"gateway",e)},expression:"platForm.form.gateway"}})],1),a("FormItem",{attrs:{prop:"iface",label:"网络接口"}},[a("Select",{model:{value:t.platForm.form.iface,callback:function(e){t.$set(t.platForm.form,"iface",e)},expression:"platForm.form.iface"}},t._l(t.netInfs,(function(e,i){return a("Option",{key:i,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.platForm.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.addPlatForm}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"19c2d36a",null).exports,o={name:"NetworkRoute",components:{jk_tabs:i.a,route_add:r},data:function(){var t=this,e=function(e,a){return function(i,n,s){var r=t.modal.form.ipVersion,o="IPV6"==r?a:e;("IPV6"==r?/^(([\da-fA-F]{1,4}):){8}$/:/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/).test(n+="IPV6"==r?":":".")?s():s(new Error(o))}};return{columns1:[{title:"序号",width:70,type:"index",align:"center"},{title:"运行状态",key:"state",align:"center",width:100,render:function(t,e){var a=e.row.state,i=e.row.state?"success":"error",n=e.row.desc;return a?t("Tag",{props:{type:"dot",color:i}}):t("Tooltip",{props:{content:n,maxWidth:"200"}},[t("Tag",{props:{type:"dot",color:i}})])}},{title:"所属网卡",key:"iface",align:"center",sortable:!0,width:150},{title:"版本",width:70,key:"ipVersion",align:"center"},{title:"目标",key:"destination",align:"center"},{title:"掩码/前缀",key:"genmask",align:"center"},{title:"网关",key:"gateway",align:"center"},{title:"管理类型",key:"mgType",align:"center",width:100,render:function(t,e){var a=e.row.mgType,i={0:["默认","default","该类型地址不属于本软件系统管理,为操作系统上的IP"],1:["受管","primary","该类型属于软件系统管理IP,软件将会同步操作系统保证有该IP地址"],2:["禁用","error","该类型当前系统不能添加,修改,删除"]},n=i.hasOwnProperty(a)?i[a][0]:"未知",s=i.hasOwnProperty(a)?i[a][1]:"warning";return t("Tooltip",{props:{placement:"right",content:i.hasOwnProperty(a)?i[a][2]:"未知类型,存在请联系管理员",maxWidth:"600"}},[t("Tag",{props:{color:s}},n)])}},{title:"操作",slot:"action",width:150,align:"center"}],data1:[],modal:{show:!1,state:"",form:{ipVersion:"IPV4",destination:"",gateway:"",genmask:"",iface:"",state:""},ruleInline:{ipVersion:{required:!0,trigger:"change",message:"请选择网络版本"},destination:{required:!0,trigger:"change",validator:e("请输入合法的ipv4地址","请输入合法的ipv6地址")},genmask:{required:!0,trigger:"change",validator:function(e,a,i){"ipv4"==t.modal.form.ipVersion.toLowerCase()?/^((\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.){4}$/.test(a+".")?i():i(new Error("请输入合法的ipv4子网掩码")):/^[0-9]*$/.test(a)&&a>0&&a<129?i():i(new Error("请输入合法的ipv6前缀，0~129之间的数字"))}},gateway:{required:!0,trigger:"change",validator:e("请输入合法的ipv4网关","请输入合法的ipv6网关")},iface:{required:!0,message:"请选择要设置网络接口",trigger:"change"}}},netInfs:[],row:null,links:[{name:"IP管理",to:"/sys/interface"},{name:"路由管理",to:"/sys/route"}]}},mounted:function(){this.showNetInterface()},methods:{showNetInterface:function(){var t=this;this.$https.fetchGet(this.$api.system.inf.route.url,{ipVersion:"All"}).then((function(e){t.data1=e.data.data}))},deleteRoute:function(t){var e=this;this.$Modal.confirm({title:"删除路由",content:"<p>当前操作将会导致该静态路由被删除，请确认删除</p>",loading:!0,onOk:function(){e.$https.fetchDelete(e.$api.system.inf.route.url,e.data1[t]).then((function(t){200==t.data.code?location.reload():(e.$Modal.remove(),e.$Message.info("路由配置删除失败"))})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:2.5})}))}})},updateRoute:function(t){var e=this;this.modal.show=!0,this.$https.fetchGet(this.$api.system.inf.showNetInterface.url).then((function(t){var a=t.data.data;e.netInfs=[],a.forEach((function(t){e.netInfs.push(t.name)}))})).catch((function(t){})),this.modal.form.ipVersion=this.data1[t].ipVersion,this.modal.form.destination=this.data1[t].destination,this.modal.form.gateway=this.data1[t].gateway,this.modal.form.genmask=this.data1[t].genmask,this.modal.form.iface=this.data1[t].iface,this.data1[t].state?this.modal.state="启用":this.modal.state="禁用",this.row=this.data1[t]},restForm:function(){this.$refs.info_form.resetFields()},addForm:function(){var t=this;this.$refs.info_form.validate((function(e){if(e){"禁用"==t.modal.state?t.modal.form.state=!1:t.modal.form.state=!0;var a={oldRoute:t.row,route:t.modal.form};t.$https.fetchPut(t.$api.system.inf.route.url,a).then((function(e){200==e.data.code?(t.$Notice.success({title:"路由配置修改成功",desc:"正在刷新界面",duration:2.5}),location.reload()):t.$Notice.error({title:"路由配置修改失败",desc:"错误代码："+e.data.describe,duration:2.5})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:2.5})}))}}))}}},l=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),a("route_add",{staticStyle:{float:"right"}})],1)]),a("div",{staticClass:"modal-body",staticStyle:{height:"800px",overflow:"auto"}},[a("Table",{attrs:{size:"small",border:"",columns:t.columns1,data:t.data1},scopedSlots:t._u([{key:"state",fn:function(e){var i=e.row,n=e.index;return[a("Button",{staticStyle:{margin:"auto"},attrs:{icon:t.data1[n].iconName,size:"small"},on:{click:function(e){return t.updateState(n)}}},[a("span",{style:{color:t.data1[n].color}},[t._v("\n                                    "+t._s(i.state)+"\n                                ")])])]}},{key:"action",fn:function(e){var i=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updateRoute(i)}}},[t._v("修改")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.deleteRoute(i)}}},[t._v("删除")])]}}])})],1)]),a("Modal",{attrs:{title:"静态路由",width:"600",styles:{top:"25%"}},model:{value:t.modal.show,callback:function(e){t.$set(t.modal,"show",e)},expression:"modal.show"}},[a("Form",{ref:"info_form",attrs:{rules:t.modal.ruleInline,model:t.modal.form,"label-width":150}},[a("FormItem",{staticStyle:{"margin-bottom":"0px"},attrs:{label:"状态",prop:"state"}},[a("RadioGroup",{model:{value:t.modal.state,callback:function(e){t.$set(t.modal,"state",e)},expression:"modal.state"}},[a("Radio",{attrs:{label:"禁用"}}),a("Radio",{attrs:{label:"启用"}})],1)],1),a("FormItem",{attrs:{prop:"ipVersion",label:"网络版本"}},[a("RadioGroup",{model:{value:t.modal.form.ipVersion,callback:function(e){t.$set(t.modal.form,"ipVersion",e)},expression:"modal.form.ipVersion"}},[a("Radio",{attrs:{label:"IPV4"}},[t._v("IPV4")])],1)],1),a("FormItem",{attrs:{prop:"destination",label:"ip地址"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.1"},model:{value:t.modal.form.destination,callback:function(e){t.$set(t.modal.form,"destination",e)},expression:"modal.form.destination"}})],1),a("FormItem",{attrs:{prop:"genmask",label:"掩码/前缀"}},[a("Input",{attrs:{type:"text",placeholder:"255.255.255.0"},model:{value:t.modal.form.genmask,callback:function(e){t.$set(t.modal.form,"genmask",e)},expression:"modal.form.genmask"}})],1),a("FormItem",{attrs:{prop:"gateway",label:"网关"}},[a("Input",{attrs:{type:"text",placeholder:"192.168.1.254"},model:{value:t.modal.form.gateway,callback:function(e){t.$set(t.modal.form,"gateway",e)},expression:"modal.form.gateway"}})],1),a("FormItem",{attrs:{prop:"iface",label:"网络接口"}},[a("Select",{model:{value:t.modal.form.iface,callback:function(e){t.$set(t.modal.form,"iface",e)},expression:"modal.form.iface"}},t._l(t.netInfs,(function(e,i){return a("Option",{key:i,attrs:{value:e}},[t._v(t._s(e))])})),1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"text",size:"large"},on:{click:function(e){t.modal.show=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",size:"large"},on:{click:t.addForm}},[t._v("确定")])],1)],1)],1)}),[],!1,null,"37f309d0",null);e.default=l.exports},edd8:function(t,e,a){"use strict";a("1e52")},f2b0:function(t,e,a){},f3bf:function(t,e,a){"use strict";a.r(e);var i,n=a("28f8"),s=(a("e680"),a("32ea"),a("1bc78"),a("3e83")),r={inject:["reload"],name:"StrategyThresholdAlarm",components:{jk_tabs:a("25b1").a},data:function(){return{data:null,url:"",file:null,loading:!1,links:[{name:"阈值告警",to:"/strategy/thresholdAlarm"},{name:"采集阈值",to:"/strategy/collectThresholdAlarm"},{name:"上报阈值",to:"/strategy/uploadThresholdAlarm"}],form:{collectRiskCpu:0,collectRiskDisk:0,collectRiskDownFlow:0,collectRiskMem:0,collectRiskUpFlow:0,collectWarnCpu:0,collectWarnDisk:0,collectWarnDownFlow:0,collectWarnMem:0,collectWarnUpFlow:0,status:!0,uploadRiskCpu:0,uploadRiskDisk:0,uploadRiskDownFlow:0,uploadRiskMem:0,uploadRiskUpFlow:0,uploadWarnCpu:0,uploadWarnDisk:0,uploadWarnDownFlow:0,uploadWarnMem:0,uploadWarnUpFlow:0,freezeWarnTime:60,freezeRiskTime:300}}},created:function(){},mounted:function(){this.getinfo()},methods:(i={checkstatus:function(){},isRealNum:function(t){return""!==t&&null!=t&&!isNaN(t)},clearParams:function(t){if("object"==Object(s.a)(t))return Object.keys(t).forEach((function(e,a,i){t[e]=""})),t}},Object(n.a)(i,"clearParams",(function(t){var e=this;"object"==Object(s.a)(t)&&Object.keys(t).forEach((function(a,i,n){isNaN(t[a])||e.$Notice.error({title:"修改失败",desc:"请填写数字",duration:2.5})}))})),Object(n.a)(i,"reset",(function(){this.$Notice.success({title:"重置成功",duration:2.5}),this.form={collectRiskCpu:90,collectRiskDisk:90,collectRiskDownFlow:5500,collectRiskMem:90,collectRiskUpFlow:5500,collectWarnCpu:80,collectWarnDisk:80,collectWarnDownFlow:4500,collectWarnMem:80,collectWarnUpFlow:4500,status:!0,uploadRiskCpu:90,uploadRiskDisk:90,uploadRiskDownFlow:5500,uploadRiskMem:90,uploadRiskUpFlow:5500,uploadWarnCpu:80,uploadWarnDisk:80,uploadWarnDownFlow:4500,uploadWarnMem:80,uploadWarnUpFlow:4500,freezeWarnTime:60,freezeRiskTime:300}})),Object(n.a)(i,"checkaction",(function(){})),Object(n.a)(i,"getinfo",(function(){var t=this;this.$https.fetchGet(this.$api.strategy.thresholdInfo.url).then((function(e){t.form=e.data.data})).catch((function(t){}))})),Object(n.a)(i,"submit",(function(){var t=this,e=this.form;if("object"==Object(s.a)(e)){var a=!1;try{Object.keys(e).forEach((function(i,n,s){if(!(a=t.isRealNum(e[i])))throw t.$Notice.error({title:"修改失败",desc:"所有数值请填写数字",duration:10}),new Error("EndIterative")}))}catch(t){if("EndIterative"!=t.message)throw t}a&&(Number(this.form.collectRiskCpu)<=Number(this.form.collectWarnCpu)?this.$Notice.error({title:"修改失败",desc:"采集系统CPU利用率风险值必须大于预警值",duration:10}):Number(this.form.collectRiskDisk)<=Number(this.form.collectWarnDisk)?this.$Notice.error({title:"修改失败",desc:"采集系统磁盘利用率风险值必须大于预警值",duration:10}):Number(this.form.collectRiskDownFlow)<=Number(this.form.collectWarnDownFlow)?this.$Notice.error({title:"修改失败",desc:"采集系统接口下行流量风险值必须大于预警值",duration:10}):Number(this.form.collectRiskMem)<=Number(this.form.collectWarnMem)?this.$Notice.error({title:"修改失败",desc:"采集系统内存利用率风险值必须大于预警值",duration:10}):Number(this.form.collectRiskUpFlow)<=Number(this.form.collectWarnUpFlow)?this.$Notice.error({title:"修改失败",desc:"采集系统接口上行流量率风险值必须大于预警值",duration:10}):Number(this.form.uploadRiskCpu)<=Number(this.form.uploadWarnCpu)?this.$Notice.error({title:"修改失败",desc:"上报系统CPU利用率风险值必须大于预警值",duration:10}):Number(this.form.uploadRiskDisk)<=Number(this.form.uploadWarnDisk)?this.$Notice.error({title:"修改失败",desc:"上报系统磁盘利用率风险值必须大于预警值",duration:10}):Number(this.form.uploadRiskDownFlow)<=Number(this.form.uploadWarnDownFlow)?this.$Notice.error({title:"修改失败",desc:"上报系统接口下行流量风险值必须大于预警值",duration:10}):Number(this.form.uploadRiskMem)<=Number(this.form.uploadWarnMem)?this.$Notice.error({title:"修改失败",desc:"上报系统内存利用率风险值必须大于预警值",duration:10}):Number(this.form.uploadRiskUpFlow)<=Number(this.form.uploadWarnUpFlow)?this.$Notice.error({title:"修改失败",desc:"上报系统接口上行流量率风险值必须大于预警值",duration:10}):Number(this.form.freezeRiskTime)<=Number(this.form.freezeWarnTime)?this.$Notice.error({title:"修改失败",desc:"数据冻结时长风险值必须大于预警值",duration:10}):0>Number(this.form.collectRiskCpu)||Number(this.form.collectRiskCpu)>100?this.$Notice.error({title:"修改失败",desc:"采集系统风险CPU利用率取值范围为0~100%",duration:10}):0>Number(this.form.collectRiskDisk)||Number(this.form.collectRiskDisk)>100?this.$Notice.error({title:"修改失败",desc:"采集系统风险磁盘利用率取值范围为0~100%",duration:10}):0>Number(this.form.collectRiskMem)||Number(this.form.collectRiskMem)>100?this.$Notice.error({title:"修改失败",desc:"采集系统风险内存利用率取值范围为0~100%",duration:10}):0>Number(this.form.collectWarnCpu)||Number(this.form.collectWarnCpu)>100?this.$Notice.error({title:"修改失败",desc:"采集系统预警CPU利用率取值范围为0~100%",duration:10}):0>Number(this.form.collectWarnDisk)||Number(this.form.collectWarnDisk)>100?this.$Notice.error({title:"修改失败",desc:"采集系统预警磁盘利用率取值范围为0~100%",duration:10}):0>Number(this.form.collectWarnMem)||Number(this.form.collectWarnMem)>100?this.$Notice.error({title:"修改失败",desc:"采集系统预警内存利用率取值范围为0~100%",duration:10}):0>Number(this.form.uploadRiskCpu)||Number(this.form.uploadRiskCpu)>100?this.$Notice.error({title:"修改失败",desc:"上报系统风险CPU利用率取值范围为0~100%",duration:10}):0>Number(this.form.uploadRiskDisk)||Number(this.form.uploadRiskDisk)>100?this.$Notice.error({title:"修改失败",desc:"上报系统风险磁盘利用率取值范围为0~100%",duration:10}):0>Number(this.form.uploadRiskMem)||Number(this.form.uploadRiskMem)>100?this.$Notice.error({title:"修改失败",desc:"上报系统风险内存利用率取值范围为0~100%",duration:10}):0>Number(this.form.uploadWarnCpu)||Number(this.form.uploadWarnCpu)>100?this.$Notice.error({title:"修改失败",desc:"上报系统预警CPU利用率取值范围为0~100%",duration:10}):0>Number(this.form.uploadWarnDisk)||Number(this.form.uploadWarnDisk)>100?this.$Notice.error({title:"修改失败",desc:"上报系统预警磁盘利用率取值范围为0~100%",duration:10}):0>Number(this.form.uploadWarnMem)||Number(this.form.uploadWarnMem)>100?this.$Notice.error({title:"修改失败",desc:"上报系统预警内存利用率取值范围为0~100%",duration:10}):0>Number(this.form.collectWarnUpFlow)||Number(this.form.collectWarnUpFlow)>10240?this.$Notice.error({title:"修改失败",desc:"采集系统预警接口上行流量取值范围为0~10240KB",duration:10}):0>Number(this.form.uploadWarnUpFlow)||Number(this.form.uploadWarnUpFlow)>10240?this.$Notice.error({title:"修改失败",desc:"上报系统预警接口上行流量取值范围为0~10240KB",duration:10}):0>Number(this.form.uploadRiskUpFlow)||Number(this.form.uploadRiskUpFlow)>10240?this.$Notice.error({title:"修改失败",desc:"上报系统风险接口上行流量取值范围为0~10240KB",duration:10}):0>Number(this.form.collectRiskUpFlow)||Number(this.form.collectRiskUpFlow)>10240?this.$Notice.error({title:"修改失败",desc:"采集系统风险接口上行流量取值范围为0~10240KB",duration:10}):0>Number(this.form.collectWarnDownFlow)||Number(this.form.collectWarnDownFlow)>10240?this.$Notice.error({title:"修改失败",desc:"采集系统预警接口下行流量取值范围为0~10240KB",duration:10}):0>Number(this.form.collectRiskDownFlow)||Number(this.form.collectRiskDownFlow)>10240?this.$Notice.error({title:"修改失败",desc:"采集系统风险接口下行流量取值范围为0~10240KB",duration:10}):0>Number(this.form.uploadWarnDownFlow)||Number(this.form.uploadWarnDownFlow)>10240?this.$Notice.error({title:"修改失败",desc:"上报系统预警接口下行流量取值范围为0~10240KB",duration:10}):0>Number(this.form.uploadRiskDownFlow)||Number(this.form.uploadRiskDownFlow)>10240?this.$Notice.error({title:"修改失败",desc:"采集系统风险接口下行流量取值范围为0~10240KB",duration:10}):0>Number(this.form.freezeWarnTime)||Number(this.form.freezeWarnTime)>10240?this.$Notice.error({title:"修改失败",desc:"数据冻结时长预警值取值范围为正整数",duration:10}):0>Number(this.form.freezeRiskTime)||Number(this.form.freezeRiskTime)>10240?this.$Notice.error({title:"修改失败",desc:"数据冻结时长风险值取值范围为正整数",duration:10}):this.$https.fetchPost(this.$api.strategy.updateThresholdInfo.url,this.form).then((function(e){200==e.data.code?(t.$Notice.success({title:"阈值告警修改成功",desc:"正在刷新界面",duration:2.5}),setTimeout((function(){t.reload()}),250)):t.$Notice.error({title:e.data.title,desc:"错误："+e.data.describe,duration:10})})).catch((function(e){t.$Notice.error({title:"请求失败",desc:e,duration:10})})))}})),i)},o=(a("d18c"),a("c701")),l=Object(o.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header ",staticStyle:{"border-bottom":"1px solid #a9a9a9"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}})],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{width:"100%",position:"relative",float:"left","margin-top":"20px"}}),a("div",{staticStyle:{margin:"15px 10px"}},[a("table",{staticStyle:{width:"100%"},attrs:{border:"1"}},[t._m(0),a("tr",{staticStyle:{height:"35px"}},[t._m(1),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.collectWarnCpu,callback:function(e){t.$set(t.form,"collectWarnCpu",e)},expression:"form.collectWarnCpu"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectWarnCpu,callback:function(e){t.$set(t.form,"collectWarnCpu",e)},expression:"form.collectWarnCpu"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.collectRiskCpu,callback:function(e){t.$set(t.form,"collectRiskCpu",e)},expression:"form.collectRiskCpu"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectRiskCpu,callback:function(e){t.$set(t.form,"collectRiskCpu",e)},expression:"form.collectRiskCpu"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.uploadWarnCpu,callback:function(e){t.$set(t.form,"uploadWarnCpu",e)},expression:"form.uploadWarnCpu"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadWarnCpu,callback:function(e){t.$set(t.form,"uploadWarnCpu",e)},expression:"form.uploadWarnCpu"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.uploadRiskCpu,callback:function(e){t.$set(t.form,"uploadRiskCpu",e)},expression:"form.uploadRiskCpu"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadRiskCpu,callback:function(e){t.$set(t.form,"uploadRiskCpu",e)},expression:"form.uploadRiskCpu"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)])]),a("tr",{staticStyle:{height:"35px"}},[t._m(2),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.collectWarnMem,callback:function(e){t.$set(t.form,"collectWarnMem",e)},expression:"form.collectWarnMem"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectWarnMem,callback:function(e){t.$set(t.form,"collectWarnMem",e)},expression:"form.collectWarnMem"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.collectRiskMem,callback:function(e){t.$set(t.form,"collectRiskMem",e)},expression:"form.collectRiskMem"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectRiskMem,callback:function(e){t.$set(t.form,"collectRiskMem",e)},expression:"form.collectRiskMem"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.uploadWarnMem,callback:function(e){t.$set(t.form,"uploadWarnMem",e)},expression:"form.uploadWarnMem"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadWarnMem,callback:function(e){t.$set(t.form,"uploadWarnMem",e)},expression:"form.uploadWarnMem"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.uploadRiskMem,callback:function(e){t.$set(t.form,"uploadRiskMem",e)},expression:"form.uploadRiskMem"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadRiskMem,callback:function(e){t.$set(t.form,"uploadRiskMem",e)},expression:"form.uploadRiskMem"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)])]),a("tr",{staticStyle:{height:"35px"}},[t._m(3),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.collectWarnDisk,callback:function(e){t.$set(t.form,"collectWarnDisk",e)},expression:"form.collectWarnDisk"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectWarnDisk,callback:function(e){t.$set(t.form,"collectWarnDisk",e)},expression:"form.collectWarnDisk"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.collectRiskDisk,callback:function(e){t.$set(t.form,"collectRiskDisk",e)},expression:"form.collectRiskDisk"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectRiskDisk,callback:function(e){t.$set(t.form,"collectRiskDisk",e)},expression:"form.collectRiskDisk"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.uploadWarnDisk,callback:function(e){t.$set(t.form,"uploadWarnDisk",e)},expression:"form.uploadWarnDisk"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadWarnDisk,callback:function(e){t.$set(t.form,"uploadWarnDisk",e)},expression:"form.uploadWarnDisk"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},model:{value:t.form.uploadRiskDisk,callback:function(e){t.$set(t.form,"uploadRiskDisk",e)},expression:"form.uploadRiskDisk"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadRiskDisk,callback:function(e){t.$set(t.form,"uploadRiskDisk",e)},expression:"form.uploadRiskDisk"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" %   ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)])]),a("tr",{staticStyle:{height:"35px"}},[t._m(4),a("td",[a("span",{staticStyle:{"font-size":"12.5px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},attrs:{max:10240},model:{value:t.form.collectWarnUpFlow,callback:function(e){t.$set(t.form,"collectWarnUpFlow",e)},expression:"form.collectWarnUpFlow"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectWarnUpFlow,callback:function(e){t.$set(t.form,"collectWarnUpFlow",e)},expression:"form.collectWarnUpFlow"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" KB ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12.5px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},attrs:{max:10240},model:{value:t.form.collectRiskUpFlow,callback:function(e){t.$set(t.form,"collectRiskUpFlow",e)},expression:"form.collectRiskUpFlow"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectRiskUpFlow,callback:function(e){t.$set(t.form,"collectRiskUpFlow",e)},expression:"form.collectRiskUpFlow"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" KB ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12.5px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},attrs:{max:10240},model:{value:t.form.uploadWarnUpFlow,callback:function(e){t.$set(t.form,"uploadWarnUpFlow",e)},expression:"form.uploadWarnUpFlow"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadWarnUpFlow,callback:function(e){t.$set(t.form,"uploadWarnUpFlow",e)},expression:"form.uploadWarnUpFlow"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" KB ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12.5px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},attrs:{max:10240},model:{value:t.form.uploadRiskUpFlow,callback:function(e){t.$set(t.form,"uploadRiskUpFlow",e)},expression:"form.uploadRiskUpFlow"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadRiskUpFlow,callback:function(e){t.$set(t.form,"uploadRiskUpFlow",e)},expression:"form.uploadRiskUpFlow"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" KB ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)])]),a("tr",{staticStyle:{height:"35px"}},[t._m(5),a("td",[a("span",{staticStyle:{"font-size":"12.5px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},attrs:{max:10240},model:{value:t.form.collectWarnDownFlow,callback:function(e){t.$set(t.form,"collectWarnDownFlow",e)},expression:"form.collectWarnDownFlow"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectWarnDownFlow,callback:function(e){t.$set(t.form,"collectWarnDownFlow",e)},expression:"form.collectWarnDownFlow"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" KB ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12.5px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},attrs:{max:10240},model:{value:t.form.collectRiskDownFlow,callback:function(e){t.$set(t.form,"collectRiskDownFlow",e)},expression:"form.collectRiskDownFlow"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.collectRiskDownFlow,callback:function(e){t.$set(t.form,"collectRiskDownFlow",e)},expression:"form.collectRiskDownFlow"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" KB ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12.5px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"warningSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},attrs:{max:10240},model:{value:t.form.uploadWarnDownFlow,callback:function(e){t.$set(t.form,"uploadWarnDownFlow",e)},expression:"form.uploadWarnDownFlow"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadWarnDownFlow,callback:function(e){t.$set(t.form,"uploadWarnDownFlow",e)},expression:"form.uploadWarnDownFlow"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" KB ")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1)]),a("td",[a("span",{staticStyle:{"font-size":"12.5px"}},[a("span",{staticStyle:{width:"25%"}},[a("Slider",{staticClass:"dangerSlider",staticStyle:{"margin-left":"5%",width:"38%",float:"left"},attrs:{max:10240},model:{value:t.form.uploadRiskDownFlow,callback:function(e){t.$set(t.form,"uploadRiskDownFlow",e)},expression:"form.uploadRiskDownFlow"}})],1),a("Input",{staticStyle:{width:"22%","margin-top":"2px"},model:{value:t.form.uploadRiskDownFlow,callback:function(e){t.$set(t.form,"uploadRiskDownFlow",e)},expression:"form.uploadRiskDownFlow"}}),a("span",{staticStyle:{"line-height":"32px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v(" KB ")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)])]),a("tr",{staticStyle:{height:"35px"}},[t._m(6),a("td",{attrs:{colspan:"4"}},[a("span",{staticStyle:{"font-size":"12px"}},[a("Input",{staticStyle:{width:"12.5%"},model:{value:t.form.freezeWarnTime,callback:function(e){t.$set(t.form,"freezeWarnTime",e)},expression:"form.freezeWarnTime"}}),a("span",{staticStyle:{"line-height":"32px","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("  秒")]),a("Tag",{attrs:{color:"warning"}},[t._v("预警")])],1),a("span",{staticStyle:{"font-size":"12px","margin-left":"25%"}},[a("Input",{staticStyle:{width:"12.5%"},model:{value:t.form.freezeRiskTime,callback:function(e){t.$set(t.form,"freezeRiskTime",e)},expression:"form.freezeRiskTime"}}),a("span",{staticStyle:{"line-height":"32px","margin-right":"10px"},attrs:{slot:"suffix"},slot:"suffix"},[t._v("  秒")]),a("Tag",{attrs:{color:"error"}},[t._v("风险")])],1)])]),a("tr",{staticStyle:{height:"35px"}},[t._m(7),a("td",{attrs:{colspan:"4"}},[a("span",{staticStyle:{"font-size":"12px"}},[a("i-switch",{staticStyle:{"margin-left":"12px"},attrs:{size:"large"},on:{"on-change":t.checkstatus},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("开启")]),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("关闭")])])],1)])])])])]),a("div",{staticStyle:{margin:"10px 0 10px 50%"}},[a("Button",{staticStyle:{"margin-right":"10px"},on:{click:t.reset}},[t._v("重置")]),a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确定")])],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticStyle:{height:"35px"}},[e("th",{staticStyle:{width:"10%"}},[e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"12px"}})]),e("th",{attrs:{colspan:"2"}},[e("span",{staticStyle:{width:"45%"}},[this._v("采集系统")])]),e("th",{attrs:{colspan:"2"}},[e("span",{staticStyle:{width:"45%"}},[this._v("上报系统")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticStyle:{"font-weight":"bold",width:"10%","font-size":"12px"}},[this._v("CPU利用率")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticStyle:{"font-weight":"bold",width:"10%","font-size":"12px"}},[this._v("内存利用率")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticStyle:{"font-weight":"bold",width:"10%","font-size":"12px"}},[this._v("磁盘利用率")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticStyle:{"font-weight":"bold",width:"10%","font-size":"12px"}},[this._v("上行流量")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticStyle:{"font-weight":"bold",width:"10%","font-size":"12px"}},[this._v("下行流量")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticStyle:{"font-weight":"bold",width:"10%","font-size":"12px"}},[this._v("数据冻结时长")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("td",[e("span",{staticStyle:{"font-weight":"bold",width:"10%","font-size":"12px"}},[this._v("是否开启")])])}],!1,null,"e8dc9e9c",null);e.default=l.exports},f44a:function(t,e,a){},f4e9:function(t,e,a){"use strict";a.r(e);var i=a("25b1"),n=a("04d8"),s={inject:["reload"],filters:{ellipsis:function(t){return t?t.length>50?t.slice(0,47)+"...":t:""},dateFormat:function(t){if(!t)return"";var e=new Date(t);function a(t){return t<10&&(t="0"+t),t}var i=e.getFullYear(),n=e.getMonth()+1,s=e.getDate(),r=e.getHours(),o=e.getMinutes(),l=e.getSeconds();return i+"-"+a(n)+"-"+a(s)+" "+a(r)+":"+a(o)+":"+a(l)}},name:"StrategyList",components:{jk_tabs:i.a,Pies:n.a},data:function(){return{switch1:!0,PASSmodel:!0,password:"",confirmModal:!1,tablelogShow:!1,page:{datacount:0,page:1,currentPage:1},driveWarningTitle:"",drivecheckgroup:"全部",itemList:[],selected:[],strategyData:"",strategyBackupData:"",StrategyDatas:"",strategyListdata:[{name:"全通模式",val:"1"},{name:"工作模式",val:"2"},{name:"测试模式",val:"3"}],timeselectlist:"",weeks:[{name:"每天",value:0},{name:"每周一",value:1},{name:"每周二",value:2},{name:"每周三",value:3},{name:"每周四",value:4},{name:"每周五",value:5},{name:"每周六",value:6},{name:"每周日",value:7}],dataCount:0,currentPage:1,pageSize:10,data1:[],data3:[],stateTitle:"",stateContent:"",links:[{name:"阈值告警",to:"/strategy/thresholdAlarm"},{name:"采集阈值",to:"/strategy/collectThresholdAlarm"},{name:"上报阈值",to:"/strategy/uploadThresholdAlarm"}],iconName:null,StatisticsModal:!1,pieData:[],resp:{Duuid:"",Suuid:""}}},mounted:function(){this.getData(!0)},methods:{changeEcharts:function(){this.getData(this.switch1)},cancelCheckidentity:function(){this.confirmModal=!1,this.strategyData=this.strategyBackupData},getDriveLoginfo:function(t){var e=this,a={filters:[{filed:"alarmType",params:["CPU"]},{filed:"alarmLevel",params:["2"]}],page:1,size:10};"cpuWarnCount"==t?(a.filters[0].params=["CPU"],a.filters[1].params=["1"]):"cpuRiskCount"==t?(a.filters[0].params=["CPU"],a.filters[1].params=["2"]):"memWarnCount"==t?(a.filters[0].params=["MEM"],a.filters[1].params=["1"]):"memRiskCount"==t?(a.filters[0].params=["MEM"],a.filters[1].params=["2"]):"diskWarnCount"==t?(a.filters[0].params=["DISK"],a.filters[1].params=["1"]):"diskRiskCount"==t?(a.filters[0].params=["DISK"],a.filters[1].params=["2"]):"upFlowWarnCount"==t?(a.filters[0].params=["UPFLOW"],a.filters[1].params=["1"]):"upFlowRiskCount"==t?(a.filters[0].params=["UPFLOW"],a.filters[1].params=["2"]):"downFlowWarnCount"==t?(a.filters[0].params=["DOWNFLOW"],a.filters[1].params=["1"]):"downFlowRiskCount"==t&&(a.filters[0].params=["DOWNFLOW"],a.filters[1].params=["2"]),this.$https.fetchPost(this.$api.strategy.findCollectAlarmLog.url,a).then((function(t){if(200==t.data.code){if(e.tablelogShow=!0,e.itemList=t.data.data.data,0==t.data.data.count)e.itemList=[{alarmMsg:"暂无数据"}];else if(-1!=e.itemList[0].uuid.indexOf("risk"))for(var a in e.itemList)e.itemList[a].alarmType=!0}else e.$Notice.error({title:"数据源对象添加失败",desc:"错误："+t.data.desc,duration:5})})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:5})}))},getDriveLogData:function(t,e){this.page.page=1,this.page.currentPage=1,this.getDriveLoginfo(e),this.driveWarningTitle=t+"拦截详情"},changepage:function(t){this.currentPage=t,this.showData(t,10)},getData:function(t){var e=this;this.$https.fetchGet(this.$api.strategy.collectSystemAlarmCount.url).then((function(a){200==a.data.code?(e.pieData=a.data.data,t?e.$refs.pies.chart(e.pieData):e.$refs.pies.barchart(e.pieData)):e.$Notice.error({title:"数据源对象添加失败",desc:"错误："+a.data.desc,duration:5})})).catch((function(t){e.$Notice.error({title:"请求失败",desc:t,duration:5})}))}}},r=(a("388e"),a("c701")),o=Object(r.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row box margin-x clear-margin padding-x"},[a("div",{staticClass:"modal-header",staticStyle:{"border-bottom":"1px solid #a9a9a9","padding-bottom":"15px"}},[a("blockquote",{staticStyle:{padding:"0",margin:"0",border:"none",color:"#000"}},[a("jk_tabs",{staticStyle:{float:"left","font-size":"14px"},attrs:{links:t.links}}),a("span",{staticStyle:{float:"right","font-size":"12px"}},[t._v("柱状图 / 饼图 "),a("i-switch",{on:{"on-change":t.changeEcharts},model:{value:t.switch1,callback:function(e){t.switch1=e},expression:"switch1"}})],1)],1)]),a("div",{staticClass:"modal-body"},[a("div",{staticStyle:{display:"flex",height:"90%","justify-content":"center",position:"relative"}},[a("Pies",{ref:"pies",staticStyle:{width:"48%",height:"510px"},attrs:{warning:t.drivecheckgroup,id:"1"},on:{sendDriveLogData:t.getDriveLogData}}),t.tablelogShow?a("Card",{staticStyle:{width:"48%",height:"510px","margin-left":"3%"}},[a("div",{staticStyle:{height:"450px","overflow-y":"scroll",background:"#fff"}},[a("table",{staticStyle:{width:"100%","border-collapse":"collapse"},attrs:{dataArr:t.pieData}},[a("thead",{staticStyle:{"border-bottom":"1px"}},[a("tr",{staticStyle:{"background-color":"#eee","text-align":"center",padding:"10px 5px"}},[a("span",{staticStyle:{margin:"0 auto",display:"block",width:"100%","font-weight":"bold",padding:"5px 0"}},[t._v(t._s(t.driveWarningTitle))])])])]),t._l(t.itemList,(function(e,i){return a("ul",{key:i,staticClass:"connectList agile-list"},[a("li",{class:1==e.alarmType?"danger-element":"warning-element",staticStyle:{width:"100%","table-layout":"fixed",maring:"10px"}},[t._v("\n                                "+t._s(10*(t.page.page-1)+i+1+". ")+" "+t._s(e.alarmMsg)+"\n                                "),a("div",{staticClass:"agile-detail"},["暂无数据"!=e.alarmMsg?a("Icon",{staticStyle:{"margin-right":"5px"},attrs:{type:"md-time",size:"12"}}):t._e(),t._v("\n                                    "+t._s(t._f("dateFormat")(e.updateTime))+"\n                                ")],1)])])}))],2)]):t._e()],1)])])])}),[],!1,null,"55a27f80",null);e.default=o.exports},f60a:function(t,e,a){},f61c:function(t,e,a){"use strict";a("be08")},f6ca:function(t,e,a){"use strict";a("971b")},f7b0:function(t,e,a){},f82c:function(t,e,a){},f8ba:function(t,e,a){"use strict";a("8526")},f8d4:function(t,e,a){},faa5:function(t,e,a){"use strict";a("f82c")},fab3:function(t,e,a){"use strict";a("871d")},fbf6:function(t,e,a){"use strict";a("d224")}}]);